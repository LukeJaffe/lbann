<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>LBANN: lbann::dropout Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LBANN
   &#160;<span id="projectnumber">eb6d832-ci240440460</span>
   </div>
   <div id="projectbrief">LivermoreBigArtificialNeuralNetworkToolkit</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classlbann_1_1dropout.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classlbann_1_1dropout-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">lbann::dropout Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="lbann__dropout_8hpp_source.html">lbann_dropout.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for lbann::dropout:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1dropout__inherit__graph.png" border="0" usemap="#lbann_1_1dropout_inherit__map" alt="Inheritance graph"/></div>
<map name="lbann_1_1dropout_inherit__map" id="lbann_1_1dropout_inherit__map">
<area shape="rect" id="node2" href="classlbann_1_1regularizer.html" title="lbann::regularizer" alt="" coords="5,5,125,32"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for lbann::dropout:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1dropout__coll__graph.png" border="0" usemap="#lbann_1_1dropout_coll__map" alt="Collaboration graph"/></div>
<map name="lbann_1_1dropout_coll__map" id="lbann_1_1dropout_coll__map">
<area shape="rect" id="node2" href="classlbann_1_1regularizer.html" title="lbann::regularizer" alt="" coords="89,440,209,467"/><area shape="rect" id="node3" href="classlbann_1_1Layer.html" title="lbann::Layer" alt="" coords="209,349,303,376"/><area shape="rect" id="node4" href="classcudnn_1_1cudnn__manager.html" title="cudnn::cudnn_manager" alt="" coords="259,259,416,285"/><area shape="rect" id="node5" href="classlbann_1_1lbann__comm.html" title="lbann::lbann_comm" alt="" coords="247,13,381,40"/><area shape="rect" id="node6" href="classlbann_1_1optimizer.html" title="Optimizer base class. " alt="" coords="273,208,388,235"/><area shape="rect" id="node7" href="classlbann_1_1model.html" title="lbann::model" alt="" coords="564,259,660,285"/><area shape="rect" id="node8" href="classlbann_1_1optimizer__factory.html" title="Optimizer factory base class. " alt="" coords="353,149,513,176"/><area shape="rect" id="node9" href="classlbann_1_1objective__functions_1_1objective__fn.html" title="lbann::objective_functions\l::objective_fn" alt="" coords="628,142,801,183"/><area shape="rect" id="node10" href="classlbann_1_1objective__functions_1_1statistics.html" title="lbann::objective_functions\l::statistics" alt="" coords="628,6,801,47"/><area shape="rect" id="node11" href="classlbann_1_1Activation.html" title="lbann::Activation" alt="" coords="115,259,233,285"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a475a5f62e79fddc530dcf9982ace918a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#a475a5f62e79fddc530dcf9982ace918a">dropout</a> (<a class="el" href="lbann__base_8hpp.html#a786677cbfb3f5677b4d84f3056eb08db">data_layout</a> data_dist, <a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *<a class="el" href="classlbann_1_1dropout.html#a8d771ad4215b0235d3270a71ca8bd33e">comm</a>, float keep_prob=0.5f)</td></tr>
<tr class="separator:a475a5f62e79fddc530dcf9982ace918a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcec1bc033a38501bb60797ac1b97dbf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#abcec1bc033a38501bb60797ac1b97dbf">~dropout</a> ()</td></tr>
<tr class="separator:abcec1bc033a38501bb60797ac1b97dbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adac8d66b5add45bd1dcea08c109ef68e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#adac8d66b5add45bd1dcea08c109ef68e">initialize_model_parallel_distribution</a> ()</td></tr>
<tr class="memdesc:adac8d66b5add45bd1dcea08c109ef68e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Matrices should be in MC,MR distributions.  <a href="#adac8d66b5add45bd1dcea08c109ef68e">More...</a><br/></td></tr>
<tr class="separator:adac8d66b5add45bd1dcea08c109ef68e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d871f6dd815b3883b472c40858e11c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#a9d871f6dd815b3883b472c40858e11c1">initialize_data_parallel_distribution</a> ()</td></tr>
<tr class="memdesc:a9d871f6dd815b3883b472c40858e11c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Weight matrices should be in Star,Star and data matrices Star,VC distributions.  <a href="#a9d871f6dd815b3883b472c40858e11c1">More...</a><br/></td></tr>
<tr class="separator:a9d871f6dd815b3883b472c40858e11c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c33aee6cc1323496120bb545cd27148"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#a7c33aee6cc1323496120bb545cd27148">fp_activations</a> ()</td></tr>
<tr class="separator:a7c33aee6cc1323496120bb545cd27148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b1ecd42b39fb914cfb04fde2278e8ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#a9b1ecd42b39fb914cfb04fde2278e8ed">bp_activations</a> ()</td></tr>
<tr class="separator:a9b1ecd42b39fb914cfb04fde2278e8ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlbann_1_1regularizer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlbann_1_1regularizer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classlbann_1_1regularizer.html">lbann::regularizer</a></td></tr>
<tr class="memitem:a6f9e59630b11ca7b6349e0f3f3331e47 inherit pub_methods_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#a6f9e59630b11ca7b6349e0f3f3331e47">fp_connections</a> ()</td></tr>
<tr class="separator:a6f9e59630b11ca7b6349e0f3f3331e47 inherit pub_methods_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b36f80c1f2d359e263527eb00c75341 inherit pub_methods_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#a3b36f80c1f2d359e263527eb00c75341">bp_connections</a> ()</td></tr>
<tr class="separator:a3b36f80c1f2d359e263527eb00c75341 inherit pub_methods_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab36e9a970736527ae2e8e73b723a3de4 inherit pub_methods_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#ab36e9a970736527ae2e8e73b723a3de4">fp_weights</a> ()</td></tr>
<tr class="separator:ab36e9a970736527ae2e8e73b723a3de4 inherit pub_methods_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a399de786010af74ec685bc27b9edba inherit pub_methods_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#a6a399de786010af74ec685bc27b9edba">bp_weights</a> ()</td></tr>
<tr class="separator:a6a399de786010af74ec685bc27b9edba inherit pub_methods_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af438ba42815eb0ed5ae22a4dae456795 inherit pub_methods_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#af438ba42815eb0ed5ae22a4dae456795">update_gradients</a> ()</td></tr>
<tr class="separator:af438ba42815eb0ed5ae22a4dae456795 inherit pub_methods_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0fd1a331a6fd12025843c7d84783ea4 inherit pub_methods_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#ad0fd1a331a6fd12025843c7d84783ea4">update</a> ()</td></tr>
<tr class="separator:ad0fd1a331a6fd12025843c7d84783ea4 inherit pub_methods_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fda5d9230f7fe9f33348dc494245cb3 inherit pub_methods_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#a8fda5d9230f7fe9f33348dc494245cb3">setup</a> (<a class="el" href="classlbann_1_1Layer.html">Layer</a> *l)</td></tr>
<tr class="separator:a8fda5d9230f7fe9f33348dc494245cb3 inherit pub_methods_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a8d771ad4215b0235d3270a71ca8bd33e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#a8d771ad4215b0235d3270a71ca8bd33e">comm</a></td></tr>
<tr class="separator:a8d771ad4215b0235d3270a71ca8bd33e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b4540ea622609b518d691d68e6db92c"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a></td></tr>
<tr class="separator:a2b4540ea622609b518d691d68e6db92c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1da084708f189cdc5f53cb59ab5c18d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">m_cur_mask</a></td></tr>
<tr class="separator:a1da084708f189cdc5f53cb59ab5c18d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classlbann_1_1regularizer"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classlbann_1_1regularizer')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classlbann_1_1regularizer.html">lbann::regularizer</a></td></tr>
<tr class="memitem:a6d0d44f4f9a3c8c24d0acdda8cf7d4b5 inherit pro_attribs_classlbann_1_1regularizer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1Layer.html">Layer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a></td></tr>
<tr class="separator:a6d0d44f4f9a3c8c24d0acdda8cf7d4b5 inherit pro_attribs_classlbann_1_1regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Dropout: probabilistically drop units from a layer. See this paper for full details: Srivastava, Nitish, et al. "Dropout: a simple way to prevent neural networks
from overfitting." Journal of Machine Learning Research 15.1 (2014). This implementation uses the approach noted in section 10 of that paper of multiplying weights by 1/(keep probability) at training time and not modifying them at test time. The implementation recommends a keep probability of 0.5 for fully-connected layers and 0.8 for input layers as good starting points. </p>

<p>Definition at line <a class="el" href="lbann__dropout_8hpp_source.html#l00047">47</a> of file <a class="el" href="lbann__dropout_8hpp_source.html">lbann_dropout.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a475a5f62e79fddc530dcf9982ace918a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lbann::dropout::dropout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#a786677cbfb3f5677b4d84f3056eb08db">data_layout</a>&#160;</td>
          <td class="paramname"><em>data_dist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *&#160;</td>
          <td class="paramname"><em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>keep_prob</em> = <code>0.5f</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Keep units with probabiliy keep_prob. </p>

<p>Definition at line <a class="el" href="lbann__dropout_8cpp_source.html#l00037">37</a> of file <a class="el" href="lbann__dropout_8cpp_source.html">lbann_dropout.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                                                                         :</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <a class="code" href="classlbann_1_1dropout.html#a8d771ad4215b0235d3270a71ca8bd33e">comm</a>(<a class="code" href="classlbann_1_1dropout.html#a8d771ad4215b0235d3270a71ca8bd33e">comm</a>), <a class="code" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a>(keep_prob)</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;{</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="comment">// Setup the data distribution</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordflow">switch</span>(data_dist) {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="lbann__base_8hpp.html#a786677cbfb3f5677b4d84f3056eb08dbac94d7b0e44ab8bdcdad694a673cdeae0">data_layout::MODEL_PARALLEL</a>:</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="classlbann_1_1dropout.html#adac8d66b5add45bd1dcea08c109ef68e">initialize_model_parallel_distribution</a>();</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="lbann__base_8hpp.html#a786677cbfb3f5677b4d84f3056eb08dba37d2a3465f7cbf4ab60f4e79944d0638">data_layout::DATA_PARALLEL</a>:</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="classlbann_1_1dropout.html#a9d871f6dd815b3883b472c40858e11c1">initialize_data_parallel_distribution</a>();</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">throw</span> lbann_exception(std::string{} + __FILE__ + <span class="stringliteral">&quot; &quot;</span> +</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                          std::to_string(__LINE__) +</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                          <span class="stringliteral">&quot;Invalid data layout selected&quot;</span>);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div>
<div class="ttc" id="classlbann_1_1dropout_html_a9d871f6dd815b3883b472c40858e11c1"><div class="ttname"><a href="classlbann_1_1dropout.html#a9d871f6dd815b3883b472c40858e11c1">lbann::dropout::initialize_data_parallel_distribution</a></div><div class="ttdeci">void initialize_data_parallel_distribution()</div><div class="ttdoc">Weight matrices should be in Star,Star and data matrices Star,VC distributions. </div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8cpp_source.html#l00069">lbann_dropout.cpp:69</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a786677cbfb3f5677b4d84f3056eb08dba37d2a3465f7cbf4ab60f4e79944d0638"><div class="ttname"><a href="lbann__base_8hpp.html#a786677cbfb3f5677b4d84f3056eb08dba37d2a3465f7cbf4ab60f4e79944d0638">data_layout::DATA_PARALLEL</a></div></div>
<div class="ttc" id="classlbann_1_1dropout_html_a8d771ad4215b0235d3270a71ca8bd33e"><div class="ttname"><a href="classlbann_1_1dropout.html#a8d771ad4215b0235d3270a71ca8bd33e">lbann::dropout::comm</a></div><div class="ttdeci">lbann_comm * comm</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00059">lbann_dropout.hpp:59</a></div></div>
<div class="ttc" id="classlbann_1_1dropout_html_a2b4540ea622609b518d691d68e6db92c"><div class="ttname"><a href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">lbann::dropout::m_keep_prob</a></div><div class="ttdeci">float m_keep_prob</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00061">lbann_dropout.hpp:61</a></div></div>
<div class="ttc" id="classlbann_1_1dropout_html_adac8d66b5add45bd1dcea08c109ef68e"><div class="ttname"><a href="classlbann_1_1dropout.html#adac8d66b5add45bd1dcea08c109ef68e">lbann::dropout::initialize_model_parallel_distribution</a></div><div class="ttdeci">void initialize_model_parallel_distribution()</div><div class="ttdoc">Matrices should be in MC,MR distributions. </div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8cpp_source.html#l00060">lbann_dropout.cpp:60</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a786677cbfb3f5677b4d84f3056eb08dbac94d7b0e44ab8bdcdad694a673cdeae0"><div class="ttname"><a href="lbann__base_8hpp.html#a786677cbfb3f5677b4d84f3056eb08dbac94d7b0e44ab8bdcdad694a673cdeae0">data_layout::MODEL_PARALLEL</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1dropout_a475a5f62e79fddc530dcf9982ace918a_cgraph.png" border="0" usemap="#classlbann_1_1dropout_a475a5f62e79fddc530dcf9982ace918a_cgraph" alt=""/></div>
<map name="classlbann_1_1dropout_a475a5f62e79fddc530dcf9982ace918a_cgraph" id="classlbann_1_1dropout_a475a5f62e79fddc530dcf9982ace918a_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1dropout.html#adac8d66b5add45bd1dcea08c109ef68e" title="Matrices should be in MC,MR distributions. " alt="" coords="209,5,391,46"/><area shape="rect" id="node4" href="classlbann_1_1dropout.html#a9d871f6dd815b3883b472c40858e11c1" title="Weight matrices should be in Star,Star and data matrices Star,VC distributions. " alt="" coords="214,70,386,111"/><area shape="rect" id="node3" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4" title="lbann::lbann_comm::\lget_model_grid" alt="" coords="441,38,583,79"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abcec1bc033a38501bb60797ac1b97dbf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lbann::dropout::~dropout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lbann__dropout_8cpp_source.html#l00055">55</a> of file <a class="el" href="lbann__dropout_8cpp_source.html">lbann_dropout.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                  {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keyword">delete</span> <a class="code" href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">m_cur_mask</a>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div>
<div class="ttc" id="classlbann_1_1dropout_html_a1da084708f189cdc5f53cb59ab5c18d0"><div class="ttname"><a href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">lbann::dropout::m_cur_mask</a></div><div class="ttdeci">Mat * m_cur_mask</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00067">lbann_dropout.hpp:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a9b1ecd42b39fb914cfb04fde2278e8ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lbann::dropout::bp_activations </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Adjust gradients for dropout in backprop. </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1regularizer.html#a520fb6e3ff605f4c5c6de7eda003f0aa">lbann::regularizer</a>.</p>

<p>Definition at line <a class="el" href="lbann__dropout_8cpp_source.html#l00116">116</a> of file <a class="el" href="lbann__dropout_8cpp_source.html">lbann_dropout.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                             {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;  <span class="comment">// Terminate early if dropout is disabled</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a>-&gt;<a class="code" href="classlbann_1_1Layer.html#af8b115cb89d6e8081de3f148a8ad2ef7">m_execution_mode</a> != <a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      || <a class="code" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a> &lt; 0.0f) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#ifdef LBANN_PROCDET_DROPOUT</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor"></span>  Hadamard(*(<a class="code" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a>-&gt;<a class="code" href="classlbann_1_1Layer.html#a81d6e3e65adcfee83e953b63ff5e9121">m_prev_error_signal</a>), *<a class="code" href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">m_cur_mask</a>, *(<a class="code" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a>-&gt;<a class="code" href="classlbann_1_1Layer.html#a81d6e3e65adcfee83e953b63ff5e9121">m_prev_error_signal</a>));</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor"></span>  <span class="comment">// Re-weight the incoming loss using dropout mask</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <a class="code" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> local_prev_error_signal = <a class="code" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a>-&gt;<a class="code" href="classlbann_1_1Layer.html#a81d6e3e65adcfee83e953b63ff5e9121">m_prev_error_signal</a>-&gt;Matrix();</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  Hadamard(local_prev_error_signal, *<a class="code" href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">m_cur_mask</a>, local_prev_error_signal);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor">#endif  // LBANN_PROCDET_DROPOUT</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor"></span>}</div>
<div class="ttc" id="classlbann_1_1dropout_html_a1da084708f189cdc5f53cb59ab5c18d0"><div class="ttname"><a href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">lbann::dropout::m_cur_mask</a></div><div class="ttdeci">Mat * m_cur_mask</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00067">lbann_dropout.hpp:67</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214"><div class="ttname"><a href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a></div></div>
<div class="ttc" id="classlbann_1_1regularizer_html_a6d0d44f4f9a3c8c24d0acdda8cf7d4b5"><div class="ttname"><a href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">lbann::regularizer::m_layer</a></div><div class="ttdeci">Layer * m_layer</div><div class="ttdef"><b>Definition:</b> <a href="lbann__regularizer_8hpp_source.html#l00079">lbann_regularizer.hpp:79</a></div></div>
<div class="ttc" id="classlbann_1_1dropout_html_a2b4540ea622609b518d691d68e6db92c"><div class="ttname"><a href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">lbann::dropout::m_keep_prob</a></div><div class="ttdeci">float m_keep_prob</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00061">lbann_dropout.hpp:61</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a483ed30937584c6d3a4d76bff5215a34"><div class="ttname"><a href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a></div><div class="ttdeci">El::Matrix&lt; DataType &gt; Mat</div><div class="ttdef"><b>Definition:</b> <a href="lbann__base_8hpp_source.html#l00042">lbann_base.hpp:42</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_af8b115cb89d6e8081de3f148a8ad2ef7"><div class="ttname"><a href="classlbann_1_1Layer.html#af8b115cb89d6e8081de3f148a8ad2ef7">lbann::Layer::m_execution_mode</a></div><div class="ttdeci">execution_mode m_execution_mode</div><div class="ttdoc">Number of neurons in previous layer. </div><div class="ttdef"><b>Definition:</b> <a href="lbann__layer_8hpp_source.html#l00206">lbann_layer.hpp:206</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a81d6e3e65adcfee83e953b63ff5e9121"><div class="ttname"><a href="classlbann_1_1Layer.html#a81d6e3e65adcfee83e953b63ff5e9121">lbann::Layer::m_prev_error_signal</a></div><div class="ttdeci">ElMat * m_prev_error_signal</div><div class="ttdoc">Weighted sum - Output of forward pass linear transformation ((# neurons) x mini-batch size) ...</div><div class="ttdef"><b>Definition:</b> <a href="lbann__layer_8hpp_source.html#l00213">lbann_layer.hpp:213</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7c33aee6cc1323496120bb545cd27148"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void lbann::dropout::fp_activations </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Drop out units in forward propagation. </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1regularizer.html#a8006f575c31fd152d2f048d50994e9f6">lbann::regularizer</a>.</p>

<p>Definition at line <a class="el" href="lbann__dropout_8cpp_source.html#l00077">77</a> of file <a class="el" href="lbann__dropout_8cpp_source.html">lbann_dropout.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                             {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="comment">// Terminate early if dropout is disabled</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a>-&gt;<a class="code" href="classlbann_1_1Layer.html#af8b115cb89d6e8081de3f148a8ad2ef7">m_execution_mode</a> != <a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      || <a class="code" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a> &lt; 0.0f) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="comment">// Get local activations</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a>* acts = <a class="code" href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">m_layer</a>-&gt;<a class="code" href="classlbann_1_1Layer.html#a7a28e5b795fcd852dea62e57d7a6f97e">m_activations</a>;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  <span class="keyword">const</span> Int local_height = acts-&gt;LocalHeight();</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keyword">const</span> Int local_width = acts-&gt;LocalWidth();</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keyword">const</span> Int global_height = acts-&gt;Height();</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#ifdef LBANN_PROCDET_DROPOUT</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor"></span>  <a class="code" href="namespacelbann.html#a6add4d3337110d567e7b398a262fd010">bernoulli_fill_procdet</a>(*<a class="code" href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">m_cur_mask</a>, acts-&gt;Height(), acts-&gt;Width(),</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                         <a class="code" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a>);</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  *<a class="code" href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">m_cur_mask</a> *= 1.0 / <a class="code" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  <span class="keywordflow">if</span> (acts-&gt;GlobalRow(local_height - 1) == global_height - 1) {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">for</span> (Int col = 0; col &lt; local_width; ++col) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      m_cur_mask-&gt;SetLocal(local_height - 1, col, 1.0f);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  Hadamard(*acts, *m_cur_mask, *acts);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor"></span>  <a class="code" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> local_acts = acts-&gt;Matrix();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// Construct dropout mask</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// Note: Construct Bernoulli matrix and scale by 1/m_keep_prob.</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  m_cur_mask-&gt;Resize(local_height, local_width);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  EntrywiseMap(*m_cur_mask,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;               (std::function&lt;<a class="code" href="lbann__base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(<span class="keyword">const</span> <a class="code" href="lbann__base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&amp;)&gt;)</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;               ([<span class="keyword">this</span>](<span class="keyword">const</span> <a class="code" href="lbann__base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&amp; z)-&gt;<a class="code" href="lbann__base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                 <span class="keyword">auto</span>&amp; gen = <a class="code" href="namespacelbann.html#ae6ce9c2fdec6f81803f6b1a6555c31c5">get_fast_generator</a>();</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                 std::bernoulli_distribution dist(<a class="code" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                 <span class="keywordflow">return</span> dist(gen) ? <a class="code" href="lbann__base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(1) / <a class="code" href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">m_keep_prob</a> : <a class="code" href="lbann__base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(0);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;               }));</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// Apply dropout mask to local activations</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  Hadamard(local_acts, *m_cur_mask, local_acts);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#endif  // LBANN_PROCDET_DROPOUT</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor"></span>}</div>
<div class="ttc" id="classlbann_1_1Layer_html_a7a28e5b795fcd852dea62e57d7a6f97e"><div class="ttname"><a href="classlbann_1_1Layer.html#a7a28e5b795fcd852dea62e57d7a6f97e">lbann::Layer::m_activations</a></div><div class="ttdeci">ElMat * m_activations</div><div class="ttdoc">Error signal to &quot;next&quot; layer (i.e. deltas) ((# neurons) x mini-batch size) </div><div class="ttdef"><b>Definition:</b> <a href="lbann__layer_8hpp_source.html#l00216">lbann_layer.hpp:216</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_afad88fb587c304caea8a36ee5a5c1df8"><div class="ttname"><a href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a></div><div class="ttdeci">El::ElementalMatrix&lt; DataType &gt; ElMat</div><div class="ttdef"><b>Definition:</b> <a href="lbann__base_8hpp_source.html#l00052">lbann_base.hpp:52</a></div></div>
<div class="ttc" id="namespacelbann_html_a6add4d3337110d567e7b398a262fd010"><div class="ttname"><a href="namespacelbann.html#a6add4d3337110d567e7b398a262fd010">lbann::bernoulli_fill_procdet</a></div><div class="ttdeci">void bernoulli_fill_procdet(ElMat &amp;mat, El::Int m, El::Int n, double p)</div><div class="ttdef"><b>Definition:</b> <a href="lbann__random_8cpp_source.html#l00174">lbann_random.cpp:174</a></div></div>
<div class="ttc" id="classlbann_1_1dropout_html_a1da084708f189cdc5f53cb59ab5c18d0"><div class="ttname"><a href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">lbann::dropout::m_cur_mask</a></div><div class="ttdeci">Mat * m_cur_mask</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00067">lbann_dropout.hpp:67</a></div></div>
<div class="ttc" id="namespacelbann_html_ae6ce9c2fdec6f81803f6b1a6555c31c5"><div class="ttname"><a href="namespacelbann.html#ae6ce9c2fdec6f81803f6b1a6555c31c5">lbann::get_fast_generator</a></div><div class="ttdeci">fast_rng_gen &amp; get_fast_generator()</div><div class="ttdef"><b>Definition:</b> <a href="lbann__random_8cpp_source.html#l00064">lbann_random.cpp:64</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214"><div class="ttname"><a href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a></div></div>
<div class="ttc" id="classlbann_1_1regularizer_html_a6d0d44f4f9a3c8c24d0acdda8cf7d4b5"><div class="ttname"><a href="classlbann_1_1regularizer.html#a6d0d44f4f9a3c8c24d0acdda8cf7d4b5">lbann::regularizer::m_layer</a></div><div class="ttdeci">Layer * m_layer</div><div class="ttdef"><b>Definition:</b> <a href="lbann__regularizer_8hpp_source.html#l00079">lbann_regularizer.hpp:79</a></div></div>
<div class="ttc" id="classlbann_1_1dropout_html_a2b4540ea622609b518d691d68e6db92c"><div class="ttname"><a href="classlbann_1_1dropout.html#a2b4540ea622609b518d691d68e6db92c">lbann::dropout::m_keep_prob</a></div><div class="ttdeci">float m_keep_prob</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00061">lbann_dropout.hpp:61</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a483ed30937584c6d3a4d76bff5215a34"><div class="ttname"><a href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a></div><div class="ttdeci">El::Matrix&lt; DataType &gt; Mat</div><div class="ttdef"><b>Definition:</b> <a href="lbann__base_8hpp_source.html#l00042">lbann_base.hpp:42</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_af8b115cb89d6e8081de3f148a8ad2ef7"><div class="ttname"><a href="classlbann_1_1Layer.html#af8b115cb89d6e8081de3f148a8ad2ef7">lbann::Layer::m_execution_mode</a></div><div class="ttdeci">execution_mode m_execution_mode</div><div class="ttdoc">Number of neurons in previous layer. </div><div class="ttdef"><b>Definition:</b> <a href="lbann__layer_8hpp_source.html#l00206">lbann_layer.hpp:206</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a279b64f47fb2213ad73e59be937afcfa"><div class="ttname"><a href="lbann__base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a></div><div class="ttdeci">float DataType</div><div class="ttdef"><b>Definition:</b> <a href="lbann__base_8hpp_source.html#l00037">lbann_base.hpp:37</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1dropout_a7c33aee6cc1323496120bb545cd27148_cgraph.png" border="0" usemap="#classlbann_1_1dropout_a7c33aee6cc1323496120bb545cd27148_cgraph" alt=""/></div>
<map name="classlbann_1_1dropout_a7c33aee6cc1323496120bb545cd27148_cgraph" id="classlbann_1_1dropout_a7c33aee6cc1323496120bb545cd27148_cgraph">
<area shape="rect" id="node2" href="namespacelbann.html#a6add4d3337110d567e7b398a262fd010" title="lbann::bernoulli_fill\l_procdet" alt="" coords="197,5,326,46"/><area shape="rect" id="node4" href="namespacelbann.html#ae6ce9c2fdec6f81803f6b1a6555c31c5" title="lbann::get_fast_generator" alt="" coords="177,71,346,97"/><area shape="rect" id="node3" href="namespacelbann.html#a4fea7ba21017b49d1e34394b4c20c764" title="lbann::get_generator" alt="" coords="395,12,535,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9d871f6dd815b3883b472c40858e11c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lbann::dropout::initialize_data_parallel_distribution </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Weight matrices should be in Star,Star and data matrices Star,VC distributions. </p>

<p>Definition at line <a class="el" href="lbann__dropout_8cpp_source.html#l00069">69</a> of file <a class="el" href="lbann__dropout_8cpp_source.html">lbann_dropout.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                                                    {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#ifdef LBANN_PROCDET_DROPOUT</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor"></span>  <a class="code" href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">m_cur_mask</a> = <span class="keyword">new</span> <a class="code" href="lbann__base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(<a class="code" href="classlbann_1_1dropout.html#a8d771ad4215b0235d3270a71ca8bd33e">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor"></span>  <a class="code" href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">m_cur_mask</a> = <span class="keyword">new</span> <a class="code" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor"></span>}</div>
<div class="ttc" id="lbann__base_8hpp_html_ac1f107dfdc1d078904b4b666af5b6b86"><div class="ttname"><a href="lbann__base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a></div><div class="ttdeci">El::DistMatrix&lt; DataType, El::STAR, El::STAR &gt; StarMat</div><div class="ttdef"><b>Definition:</b> <a href="lbann__base_8hpp_source.html#l00046">lbann_base.hpp:46</a></div></div>
<div class="ttc" id="classlbann_1_1dropout_html_a1da084708f189cdc5f53cb59ab5c18d0"><div class="ttname"><a href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">lbann::dropout::m_cur_mask</a></div><div class="ttdeci">Mat * m_cur_mask</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00067">lbann_dropout.hpp:67</a></div></div>
<div class="ttc" id="classlbann_1_1dropout_html_a8d771ad4215b0235d3270a71ca8bd33e"><div class="ttname"><a href="classlbann_1_1dropout.html#a8d771ad4215b0235d3270a71ca8bd33e">lbann::dropout::comm</a></div><div class="ttdeci">lbann_comm * comm</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00059">lbann_dropout.hpp:59</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a483ed30937584c6d3a4d76bff5215a34"><div class="ttname"><a href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a></div><div class="ttdeci">El::Matrix&lt; DataType &gt; Mat</div><div class="ttdef"><b>Definition:</b> <a href="lbann__base_8hpp_source.html#l00042">lbann_base.hpp:42</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__comm_html_a483bf8a72d44a0e83da45f3d47bd20d4"><div class="ttname"><a href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">lbann::lbann_comm::get_model_grid</a></div><div class="ttdeci">Grid &amp; get_model_grid()</div><div class="ttdef"><b>Definition:</b> <a href="lbann__comm_8hpp_source.html#l00084">lbann_comm.hpp:84</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1dropout_a9d871f6dd815b3883b472c40858e11c1_cgraph.png" border="0" usemap="#classlbann_1_1dropout_a9d871f6dd815b3883b472c40858e11c1_cgraph" alt=""/></div>
<map name="classlbann_1_1dropout_a9d871f6dd815b3883b472c40858e11c1_cgraph" id="classlbann_1_1dropout_a9d871f6dd815b3883b472c40858e11c1_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4" title="lbann::lbann_comm::\lget_model_grid" alt="" coords="227,5,370,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1dropout_a9d871f6dd815b3883b472c40858e11c1_icgraph.png" border="0" usemap="#classlbann_1_1dropout_a9d871f6dd815b3883b472c40858e11c1_icgraph" alt=""/></div>
<map name="classlbann_1_1dropout_a9d871f6dd815b3883b472c40858e11c1_icgraph" id="classlbann_1_1dropout_a9d871f6dd815b3883b472c40858e11c1_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1dropout.html#a475a5f62e79fddc530dcf9982ace918a" title="lbann::dropout::dropout" alt="" coords="227,12,381,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="adac8d66b5add45bd1dcea08c109ef68e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lbann::dropout::initialize_model_parallel_distribution </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Matrices should be in MC,MR distributions. </p>

<p>Definition at line <a class="el" href="lbann__dropout_8cpp_source.html#l00060">60</a> of file <a class="el" href="lbann__dropout_8cpp_source.html">lbann_dropout.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                                                     {</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#ifdef LBANN_PROCDET_DROPOUT</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor"></span>  <a class="code" href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">m_cur_mask</a> = <span class="keyword">new</span> <a class="code" href="lbann__base_8hpp.html#a8e774b79084797a8f87918d8f66b6802">DistMat</a>(<a class="code" href="classlbann_1_1dropout.html#a8d771ad4215b0235d3270a71ca8bd33e">comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor"></span>  <a class="code" href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">m_cur_mask</a> = <span class="keyword">new</span> <a class="code" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor"></span>}</div>
<div class="ttc" id="classlbann_1_1dropout_html_a1da084708f189cdc5f53cb59ab5c18d0"><div class="ttname"><a href="classlbann_1_1dropout.html#a1da084708f189cdc5f53cb59ab5c18d0">lbann::dropout::m_cur_mask</a></div><div class="ttdeci">Mat * m_cur_mask</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00067">lbann_dropout.hpp:67</a></div></div>
<div class="ttc" id="classlbann_1_1dropout_html_a8d771ad4215b0235d3270a71ca8bd33e"><div class="ttname"><a href="classlbann_1_1dropout.html#a8d771ad4215b0235d3270a71ca8bd33e">lbann::dropout::comm</a></div><div class="ttdeci">lbann_comm * comm</div><div class="ttdef"><b>Definition:</b> <a href="lbann__dropout_8hpp_source.html#l00059">lbann_dropout.hpp:59</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a483ed30937584c6d3a4d76bff5215a34"><div class="ttname"><a href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a></div><div class="ttdeci">El::Matrix&lt; DataType &gt; Mat</div><div class="ttdef"><b>Definition:</b> <a href="lbann__base_8hpp_source.html#l00042">lbann_base.hpp:42</a></div></div>
<div class="ttc" id="lbann__base_8hpp_html_a8e774b79084797a8f87918d8f66b6802"><div class="ttname"><a href="lbann__base_8hpp.html#a8e774b79084797a8f87918d8f66b6802">DistMat</a></div><div class="ttdeci">El::DistMatrix&lt; DataType, El::MC, El::MR &gt; DistMat</div><div class="ttdef"><b>Definition:</b> <a href="lbann__base_8hpp_source.html#l00044">lbann_base.hpp:44</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__comm_html_a483bf8a72d44a0e83da45f3d47bd20d4"><div class="ttname"><a href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">lbann::lbann_comm::get_model_grid</a></div><div class="ttdeci">Grid &amp; get_model_grid()</div><div class="ttdef"><b>Definition:</b> <a href="lbann__comm_8hpp_source.html#l00084">lbann_comm.hpp:84</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1dropout_adac8d66b5add45bd1dcea08c109ef68e_cgraph.png" border="0" usemap="#classlbann_1_1dropout_adac8d66b5add45bd1dcea08c109ef68e_cgraph" alt=""/></div>
<map name="classlbann_1_1dropout_adac8d66b5add45bd1dcea08c109ef68e_cgraph" id="classlbann_1_1dropout_adac8d66b5add45bd1dcea08c109ef68e_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4" title="lbann::lbann_comm::\lget_model_grid" alt="" coords="238,5,381,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1dropout_adac8d66b5add45bd1dcea08c109ef68e_icgraph.png" border="0" usemap="#classlbann_1_1dropout_adac8d66b5add45bd1dcea08c109ef68e_icgraph" alt=""/></div>
<map name="classlbann_1_1dropout_adac8d66b5add45bd1dcea08c109ef68e_icgraph" id="classlbann_1_1dropout_adac8d66b5add45bd1dcea08c109ef68e_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1dropout.html#a475a5f62e79fddc530dcf9982ace918a" title="lbann::dropout::dropout" alt="" coords="237,12,392,39"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a8d771ad4215b0235d3270a71ca8bd33e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a>* lbann::dropout::comm</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lbann__dropout_8hpp_source.html#l00059">59</a> of file <a class="el" href="lbann__dropout_8hpp_source.html">lbann_dropout.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1da084708f189cdc5f53cb59ab5c18d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>* lbann::dropout::m_cur_mask</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Current dropout mask (a scaled Bernoulli random matrix). </p>

<p>Definition at line <a class="el" href="lbann__dropout_8hpp_source.html#l00067">67</a> of file <a class="el" href="lbann__dropout_8hpp_source.html">lbann_dropout.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2b4540ea622609b518d691d68e6db92c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float lbann::dropout::m_keep_prob</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Probability of keeping each unit. </p>

<p>Definition at line <a class="el" href="lbann__dropout_8hpp_source.html#l00061">61</a> of file <a class="el" href="lbann__dropout_8hpp_source.html">lbann_dropout.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/travis/build/LLNL/lbann/include/lbann/regularization/<a class="el" href="lbann__dropout_8hpp_source.html">lbann_dropout.hpp</a></li>
<li>/home/travis/build/LLNL/lbann/src/regularization/<a class="el" href="lbann__dropout_8cpp_source.html">lbann_dropout.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacelbann.html">lbann</a></li><li class="navelem"><a class="el" href="classlbann_1_1dropout.html">dropout</a></li>
    <li class="footer">Generated on Wed Jun 7 2017 16:23:38 for LBANN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
