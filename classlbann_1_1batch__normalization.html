<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>LBANN: lbann::batch_normalization&lt; T_layout &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LBANN
   &#160;<span id="projectnumber">4b0b39b-ci288</span>
   </div>
   <div id="projectbrief">LivermoreBigArtificialNeuralNetworkToolkit</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classlbann_1_1batch__normalization.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classlbann_1_1batch__normalization-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">lbann::batch_normalization&lt; T_layout &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for lbann::batch_normalization&lt; T_layout &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization__inherit__graph.png" border="0" usemap="#lbann_1_1batch__normalization_3_01T__layout_01_4_inherit__map" alt="Inheritance graph"/></div>
<map name="lbann_1_1batch__normalization_3_01T__layout_01_4_inherit__map" id="lbann_1_1batch__normalization_3_01T__layout_01_4_inherit__map">
<area shape="rect" id="node2" href="classlbann_1_1learning__regularizer.html" title="lbann::learning_regularizer" alt="" coords="52,171,225,197"/><area shape="rect" id="node3" href="classlbann_1_1regularizer__layer.html" title="lbann::regularizer\l_layer" alt="" coords="5,81,125,122"/><area shape="rect" id="node4" href="classlbann_1_1Layer.html" title="lbann::Layer" alt="" coords="19,5,112,32"/><area shape="rect" id="node5" href="classlbann_1_1optimizable__layer.html" title="lbann::optimizable\l_layer" alt="" coords="150,81,276,122"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for lbann::batch_normalization&lt; T_layout &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization__coll__graph.png" border="0" usemap="#lbann_1_1batch__normalization_3_01T__layout_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="lbann_1_1batch__normalization_3_01T__layout_01_4_coll__map" id="lbann_1_1batch__normalization_3_01T__layout_01_4_coll__map">
<area shape="rect" id="node2" href="classlbann_1_1learning__regularizer.html" title="lbann::learning_regularizer" alt="" coords="362,467,535,493"/><area shape="rect" id="node3" href="classlbann_1_1regularizer__layer.html" title="lbann::regularizer\l_layer" alt="" coords="197,374,318,415"/><area shape="rect" id="node4" href="classlbann_1_1Layer.html" title="lbann::Layer" alt="" coords="151,295,244,321"/><area shape="rect" id="node5" href="classcudnn_1_1cudnn__manager.html" title="cudnn::cudnn_manager" alt="" coords="322,203,479,229"/><area shape="rect" id="node11" href="classlbann_1_1optimizer.html" title="Optimizer base class. " alt="" coords="402,295,516,321"/><area shape="rect" id="node6" href="classlbann_1_1lbann__comm.html" title="lbann::lbann_comm" alt="" coords="272,5,406,32"/><area shape="rect" id="node8" href="classlbann_1_1optimizer__factory.html" title="Optimizer factory base class. " alt="" coords="33,104,194,131"/><area shape="rect" id="node7" href="classlbann_1_1model.html" title="lbann::model" alt="" coords="180,203,276,229"/><area shape="rect" id="node9" href="classlbann_1_1objective__functions_1_1objective__function.html" title="lbann::objective_functions\l::objective_function" alt="" coords="219,97,392,138"/><area shape="rect" id="node10" href="classlbann_1_1optimizable__layer.html" title="lbann::optimizable\l_layer" alt="" coords="549,374,675,415"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a52dbaeac2465af96f28ce98bf7afc5ac"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a52dbaeac2465af96f28ce98bf7afc5ac">batch_normalization</a> (int index, <a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *<a class="el" href="file__io_8cpp.html#ab048c6f9fcbcfaa57ce68b00263dbebe">comm</a>, <a class="el" href="classlbann_1_1optimizer.html">optimizer</a> *opt, <a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> decay=0.9, <a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> scale_init=1.0, <a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> bias_init=0.0, <a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> epsilon=1e-5, cudnn::cudnn_manager *cudnn=NULL, bool use_global_stats=true)</td></tr>
<tr class="separator:a52dbaeac2465af96f28ce98bf7afc5ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62e642fc7c064a49826e5d4a10a87e5c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a62e642fc7c064a49826e5d4a10a87e5c">batch_normalization</a> (const <a class="el" href="classlbann_1_1batch__normalization.html">batch_normalization</a> &amp;other)</td></tr>
<tr class="separator:a62e642fc7c064a49826e5d4a10a87e5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb3c03a8dd166a64a77a26ee06ba81cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1batch__normalization.html">batch_normalization</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#aeb3c03a8dd166a64a77a26ee06ba81cd">operator=</a> (const <a class="el" href="classlbann_1_1batch__normalization.html">batch_normalization</a> &amp;other)</td></tr>
<tr class="separator:aeb3c03a8dd166a64a77a26ee06ba81cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f2af2677426a80f25cb00ac14d42997"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a6f2af2677426a80f25cb00ac14d42997">get_description</a> () const </td></tr>
<tr class="separator:a6f2af2677426a80f25cb00ac14d42997"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ce6201cc142c5ca598f230132c5270b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a8ce6201cc142c5ca598f230132c5270b">~batch_normalization</a> ()</td></tr>
<tr class="separator:a8ce6201cc142c5ca598f230132c5270b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b759a4555f36a8b4738a690f0c7b328"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1batch__normalization.html">batch_normalization</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a9b759a4555f36a8b4738a690f0c7b328">copy</a> () const </td></tr>
<tr class="separator:a9b759a4555f36a8b4738a690f0c7b328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dce280ee5446209bbc32357870aabb6"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a7dce280ee5446209bbc32357870aabb6">get_name</a> () const </td></tr>
<tr class="separator:a7dce280ee5446209bbc32357870aabb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8a8bef1eaf98000d644911a3f1e4c9b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#af8a8bef1eaf98000d644911a3f1e4c9b">initialize_distributed_matrices</a> ()</td></tr>
<tr class="separator:af8a8bef1eaf98000d644911a3f1e4c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed654d7472aef17d707f8ce5ccb7868d"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_8hpp.html#a786677cbfb3f5677b4d84f3056eb08db">data_layout</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#aed654d7472aef17d707f8ce5ccb7868d">get_data_layout</a> () const </td></tr>
<tr class="separator:aed654d7472aef17d707f8ce5ccb7868d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab515e25ae0e7e4e3349d82d0ad1d9b88"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#ab515e25ae0e7e4e3349d82d0ad1d9b88">setup_data</a> ()</td></tr>
<tr class="separator:ab515e25ae0e7e4e3349d82d0ad1d9b88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64da84b86a304065627ddb7a7482f81a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a64da84b86a304065627ddb7a7482f81a">setup_views</a> ()</td></tr>
<tr class="separator:a64da84b86a304065627ddb7a7482f81a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f7438ba7638a71cc14f49676a4e5e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#aa5f7438ba7638a71cc14f49676a4e5e8">setup_gpu</a> ()</td></tr>
<tr class="separator:aa5f7438ba7638a71cc14f49676a4e5e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af900dea1f07987cd56471a441c5f2f71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#af900dea1f07987cd56471a441c5f2f71">fp_compute</a> ()</td></tr>
<tr class="separator:af900dea1f07987cd56471a441c5f2f71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a121ba408814e3c2537b2cf015a35ea4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a121ba408814e3c2537b2cf015a35ea4a">bp_compute</a> ()</td></tr>
<tr class="separator:a121ba408814e3c2537b2cf015a35ea4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacff2c47a5455a4c28b9695f4fb37249"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#aacff2c47a5455a4c28b9695f4fb37249">fp_compute_gpu</a> ()</td></tr>
<tr class="separator:aacff2c47a5455a4c28b9695f4fb37249"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d48ad1531825fc9745c77f9ae5f68d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a7d48ad1531825fc9745c77f9ae5f68d6">bp_compute_gpu</a> ()</td></tr>
<tr class="separator:a7d48ad1531825fc9745c77f9ae5f68d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4cad47f456752e4ea20add0f6f38819"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#ae4cad47f456752e4ea20add0f6f38819">fp_compute_cpu</a> ()</td></tr>
<tr class="separator:ae4cad47f456752e4ea20add0f6f38819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83e40edd001a0b71c31fbc9a3acb2231"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a83e40edd001a0b71c31fbc9a3acb2231">bp_compute_cpu</a> ()</td></tr>
<tr class="separator:a83e40edd001a0b71c31fbc9a3acb2231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada966e3ec503f6ef8361c4cd0aa423fb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#ada966e3ec503f6ef8361c4cd0aa423fb">update_compute</a> ()</td></tr>
<tr class="separator:ada966e3ec503f6ef8361c4cd0aa423fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlbann_1_1learning__regularizer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlbann_1_1learning__regularizer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classlbann_1_1learning__regularizer.html">lbann::learning_regularizer</a></td></tr>
<tr class="memitem:ac47bb0bef9e4491cff6de0af3ea8110a inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1learning__regularizer.html#ac47bb0bef9e4491cff6de0af3ea8110a">learning_regularizer</a> (int index, <a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *<a class="el" href="file__io_8cpp.html#ab048c6f9fcbcfaa57ce68b00263dbebe">comm</a>, <a class="el" href="classlbann_1_1optimizer.html">optimizer</a> *opt)</td></tr>
<tr class="separator:ac47bb0bef9e4491cff6de0af3ea8110a inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30b0df9768f5c15d903e371ebec88d82 inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1learning__regularizer.html#a30b0df9768f5c15d903e371ebec88d82">learning_regularizer</a> (const <a class="el" href="classlbann_1_1learning__regularizer.html">learning_regularizer</a> &amp;other)</td></tr>
<tr class="separator:a30b0df9768f5c15d903e371ebec88d82 inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27e4a3d82399359415a52cf7d4f6c7e7 inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1learning__regularizer.html">learning_regularizer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1learning__regularizer.html#a27e4a3d82399359415a52cf7d4f6c7e7">operator=</a> (const <a class="el" href="classlbann_1_1learning__regularizer.html">learning_regularizer</a> &amp;other)</td></tr>
<tr class="separator:a27e4a3d82399359415a52cf7d4f6c7e7 inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64b9d369545368a017f4b6895d5b0f46 inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1learning__regularizer.html#a64b9d369545368a017f4b6895d5b0f46">~learning_regularizer</a> ()</td></tr>
<tr class="separator:a64b9d369545368a017f4b6895d5b0f46 inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7ab05e4126102c96b12d8b29fd0b76e inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memTemplParams" colspan="2">template&lt;data_layout T_layout&gt; </td></tr>
<tr class="memitem:ae7ab05e4126102c96b12d8b29fd0b76e inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classlbann_1_1learning__regularizer.html#ae7ab05e4126102c96b12d8b29fd0b76e">initialize_distributed_matrices</a> ()</td></tr>
<tr class="separator:ae7ab05e4126102c96b12d8b29fd0b76e inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11e27b699241abc7901bffad0b2e0b8f inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1optimizer.html">optimizer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1learning__regularizer.html#a11e27b699241abc7901bffad0b2e0b8f">get_optimizer</a> () const override</td></tr>
<tr class="memdesc:a11e27b699241abc7901bffad0b2e0b8f inherit pub_methods_classlbann_1_1learning__regularizer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return this layer's optimizer.  <a href="#a11e27b699241abc7901bffad0b2e0b8f">More...</a><br/></td></tr>
<tr class="separator:a11e27b699241abc7901bffad0b2e0b8f inherit pub_methods_classlbann_1_1learning__regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlbann_1_1regularizer__layer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlbann_1_1regularizer__layer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classlbann_1_1regularizer__layer.html">lbann::regularizer_layer</a></td></tr>
<tr class="memitem:a04323da91e8d794f0b1d5cdb2668df44 inherit pub_methods_classlbann_1_1regularizer__layer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer__layer.html#a04323da91e8d794f0b1d5cdb2668df44">regularizer_layer</a> (int index, <a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *<a class="el" href="file__io_8cpp.html#ab048c6f9fcbcfaa57ce68b00263dbebe">comm</a>)</td></tr>
<tr class="separator:a04323da91e8d794f0b1d5cdb2668df44 inherit pub_methods_classlbann_1_1regularizer__layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26ab0f58b966785067da25e7b18f5703 inherit pub_methods_classlbann_1_1regularizer__layer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer__layer.html#a26ab0f58b966785067da25e7b18f5703">regularizer_layer</a> (const <a class="el" href="classlbann_1_1regularizer__layer.html">regularizer_layer</a> &amp;)=default</td></tr>
<tr class="separator:a26ab0f58b966785067da25e7b18f5703 inherit pub_methods_classlbann_1_1regularizer__layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e199a411e4fd1e53ebf829b25b4610e inherit pub_methods_classlbann_1_1regularizer__layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1regularizer__layer.html">regularizer_layer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer__layer.html#a1e199a411e4fd1e53ebf829b25b4610e">operator=</a> (const <a class="el" href="classlbann_1_1regularizer__layer.html">regularizer_layer</a> &amp;)=default</td></tr>
<tr class="separator:a1e199a411e4fd1e53ebf829b25b4610e inherit pub_methods_classlbann_1_1regularizer__layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f6736f0a780f8a485e8f204b15dcda4 inherit pub_methods_classlbann_1_1regularizer__layer"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer__layer.html#a6f6736f0a780f8a485e8f204b15dcda4">~regularizer_layer</a> ()</td></tr>
<tr class="separator:a6f6736f0a780f8a485e8f204b15dcda4 inherit pub_methods_classlbann_1_1regularizer__layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad942e97d12c60e09cfd72f5eb739a60a inherit pub_methods_classlbann_1_1regularizer__layer"><td class="memTemplParams" colspan="2">template&lt;data_layout T_layout&gt; </td></tr>
<tr class="memitem:ad942e97d12c60e09cfd72f5eb739a60a inherit pub_methods_classlbann_1_1regularizer__layer"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classlbann_1_1regularizer__layer.html#ad942e97d12c60e09cfd72f5eb739a60a">initialize_distributed_matrices</a> ()</td></tr>
<tr class="separator:ad942e97d12c60e09cfd72f5eb739a60a inherit pub_methods_classlbann_1_1regularizer__layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlbann_1_1Layer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlbann_1_1Layer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classlbann_1_1Layer.html">lbann::Layer</a></td></tr>
<tr class="memitem:a4c903cfe85edfc57ab305e2bdf3e3345 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a4c903cfe85edfc57ab305e2bdf3e3345">Layer</a> (const int index, <a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *<a class="el" href="file__io_8cpp.html#ab048c6f9fcbcfaa57ce68b00263dbebe">comm</a>)</td></tr>
<tr class="separator:a4c903cfe85edfc57ab305e2bdf3e3345 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a247cc68c730284f10a2cb42985fe5f3a inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a247cc68c730284f10a2cb42985fe5f3a">Layer</a> (const <a class="el" href="classlbann_1_1Layer.html">Layer</a> &amp;other)</td></tr>
<tr class="separator:a247cc68c730284f10a2cb42985fe5f3a inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00d8acde68fda2f38c4a39ef8c89234a inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1Layer.html">Layer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a00d8acde68fda2f38c4a39ef8c89234a">operator=</a> (const <a class="el" href="classlbann_1_1Layer.html">Layer</a> &amp;other)</td></tr>
<tr class="separator:a00d8acde68fda2f38c4a39ef8c89234a inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68c3f57587956da938406812f13ecb78 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a68c3f57587956da938406812f13ecb78">~Layer</a> ()</td></tr>
<tr class="separator:a68c3f57587956da938406812f13ecb78 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f08fe144a625a9560c8c6984d256672 inherit pub_methods_classlbann_1_1Layer"><td class="memTemplParams" colspan="2">template&lt;data_layout T_layout&gt; </td></tr>
<tr class="memitem:a4f08fe144a625a9560c8c6984d256672 inherit pub_methods_classlbann_1_1Layer"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a4f08fe144a625a9560c8c6984d256672">initialize_distributed_matrices</a> ()</td></tr>
<tr class="separator:a4f08fe144a625a9560c8c6984d256672 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2483ccd8a4406a6891f6176f1001b4e5 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a2483ccd8a4406a6891f6176f1001b4e5">forward_prop</a> ()</td></tr>
<tr class="separator:a2483ccd8a4406a6891f6176f1001b4e5 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a502d9218d7dbbfd10ebebb6f917033 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a0a502d9218d7dbbfd10ebebb6f917033">back_prop</a> ()</td></tr>
<tr class="separator:a0a502d9218d7dbbfd10ebebb6f917033 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4a050e51e3a9bec431cf8b7a5660f2c inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#ae4a050e51e3a9bec431cf8b7a5660f2c">update</a> ()</td></tr>
<tr class="separator:ae4a050e51e3a9bec431cf8b7a5660f2c inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f3f26e2ae0497f9a00fd6bc56b50543 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a7f3f26e2ae0497f9a00fd6bc56b50543">summarize_stats</a> (<a class="el" href="classlbann_1_1lbann__summary.html">lbann_summary</a> &amp;summarizer, int step)</td></tr>
<tr class="separator:a7f3f26e2ae0497f9a00fd6bc56b50543 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7e50932bb60d4cab3b21ab3fb0707ea inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#af7e50932bb60d4cab3b21ab3fb0707ea">summarize_matrices</a> (<a class="el" href="classlbann_1_1lbann__summary.html">lbann_summary</a> &amp;summarizer, int step)</td></tr>
<tr class="separator:af7e50932bb60d4cab3b21ab3fb0707ea inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af258db35456927df5df31af6bcd33473 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#af258db35456927df5df31af6bcd33473">epoch_print</a> () const </td></tr>
<tr class="separator:af258db35456927df5df31af6bcd33473 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4e3ac01d376d9d0a1153d49b2253d03 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#af4e3ac01d376d9d0a1153d49b2253d03">checkGradientMB</a> (<a class="el" href="classlbann_1_1Layer.html">Layer</a> &amp;PrevLayer, <a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> Epsilon=1e-4)</td></tr>
<tr class="separator:af4e3ac01d376d9d0a1153d49b2253d03 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af455f02e7d3111a3610bc3fb705f3292 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#af455f02e7d3111a3610bc3fb705f3292">setup</a> (const <a class="el" href="classlbann_1_1Layer.html">Layer</a> *prev_layer, const <a class="el" href="classlbann_1_1Layer.html">Layer</a> *next_layer)</td></tr>
<tr class="separator:af455f02e7d3111a3610bc3fb705f3292 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac54fc73f5d751fe61238dbd7940d391a inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#ac54fc73f5d751fe61238dbd7940d391a">setup_pointers</a> (const <a class="el" href="classlbann_1_1Layer.html">Layer</a> *prev_layer, const <a class="el" href="classlbann_1_1Layer.html">Layer</a> *next_layer)</td></tr>
<tr class="separator:ac54fc73f5d751fe61238dbd7940d391a inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeec1c710c3d53b5e43a4d4f67b0a21b2 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#aeec1c710c3d53b5e43a4d4f67b0a21b2">check_setup</a> ()</td></tr>
<tr class="separator:aeec1c710c3d53b5e43a4d4f67b0a21b2 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f302cabbc39769b1a029dfe2af0825c inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a2f302cabbc39769b1a029dfe2af0825c">get_data_layout_string</a> (<a class="el" href="base_8hpp.html#a786677cbfb3f5677b4d84f3056eb08db">data_layout</a> d) const </td></tr>
<tr class="separator:a2f302cabbc39769b1a029dfe2af0825c inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0da8a58bab0e1de8e410c70b81a3427 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#aa0da8a58bab0e1de8e410c70b81a3427">get_index</a> () const </td></tr>
<tr class="separator:aa0da8a58bab0e1de8e410c70b81a3427 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeb8de566903c69eb695cca8d46aa514 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#aeeb8de566903c69eb695cca8d46aa514">set_index</a> (int i)</td></tr>
<tr class="separator:aeeb8de566903c69eb695cca8d46aa514 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34d337afce3ff00bd9bb63e6b25ba885 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a34d337afce3ff00bd9bb63e6b25ba885">get_num_prev_neurons</a> () const </td></tr>
<tr class="separator:a34d337afce3ff00bd9bb63e6b25ba885 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a823730fb451b04b44b786a32f0149b0e inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a823730fb451b04b44b786a32f0149b0e">get_num_prev_neuron_dims</a> () const </td></tr>
<tr class="separator:a823730fb451b04b44b786a32f0149b0e inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9dbf2d54061cdd56782f0c61398da8d inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#ad9dbf2d54061cdd56782f0c61398da8d">get_prev_neuron_dims</a> () const </td></tr>
<tr class="separator:ad9dbf2d54061cdd56782f0c61398da8d inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c592a6fb8b3e0951344a3802f39d92a inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a3c592a6fb8b3e0951344a3802f39d92a">get_num_neurons</a> () const </td></tr>
<tr class="separator:a3c592a6fb8b3e0951344a3802f39d92a inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae09dec06726bdb73c3524c4896aaf5b4 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#ae09dec06726bdb73c3524c4896aaf5b4">get_num_neuron_dims</a> () const </td></tr>
<tr class="separator:ae09dec06726bdb73c3524c4896aaf5b4 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26db6bb902f60c213cb006a2fafc0667 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; int &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a26db6bb902f60c213cb006a2fafc0667">get_neuron_dims</a> () const </td></tr>
<tr class="separator:a26db6bb902f60c213cb006a2fafc0667 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f8a6efd69263d6268ced61c8121f344 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8">execution_mode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344">get_execution_mode</a> () const </td></tr>
<tr class="separator:a7f8a6efd69263d6268ced61c8121f344 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a6f588f9588200f8dedb670b3142652 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a8a6f588f9588200f8dedb670b3142652">set_execution_mode</a> (<a class="el" href="base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8">execution_mode</a> mode)</td></tr>
<tr class="separator:a8a6f588f9588200f8dedb670b3142652 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e307f92dcf0f9f1ea7cdb15d107ea9e inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a6e307f92dcf0f9f1ea7cdb15d107ea9e">get_activations</a> ()</td></tr>
<tr class="separator:a6e307f92dcf0f9f1ea7cdb15d107ea9e inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a0f8e32e2b17953f87652f855ccfbf9 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a0a0f8e32e2b17953f87652f855ccfbf9">reset_counters</a> ()</td></tr>
<tr class="separator:a0a0f8e32e2b17953f87652f855ccfbf9 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acee56be91337bbd78bc4371a8159b760 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#acee56be91337bbd78bc4371a8159b760">using_gpus</a> () const </td></tr>
<tr class="separator:acee56be91337bbd78bc4371a8159b760 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52b76376a530210e37665afb7d55540c inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1model.html">model</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a52b76376a530210e37665afb7d55540c">get_neural_network_model</a> () const </td></tr>
<tr class="separator:a52b76376a530210e37665afb7d55540c inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab10731b838313aa7259fa62d5d229a76 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#ab10731b838313aa7259fa62d5d229a76">set_neural_network_model</a> (<a class="el" href="classlbann_1_1model.html">model</a> *const m)</td></tr>
<tr class="separator:ab10731b838313aa7259fa62d5d229a76 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ac13af6f5ee8316d64c550bef919ee0 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual El::Matrix&lt; El::Int &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a0ac13af6f5ee8316d64c550bef919ee0">get_sample_indices_per_mb</a> ()</td></tr>
<tr class="separator:a0ac13af6f5ee8316d64c550bef919ee0 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13eafbc8040160268f0782959014cd94 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a13eafbc8040160268f0782959014cd94">saveToFile</a> (int fd, const char *filename)</td></tr>
<tr class="separator:a13eafbc8040160268f0782959014cd94 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ae0e6015dd427c63236a07f8cbd3878 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a1ae0e6015dd427c63236a07f8cbd3878">loadFromFile</a> (int fd, const char *filename)</td></tr>
<tr class="separator:a1ae0e6015dd427c63236a07f8cbd3878 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3fee4a1a65d7c478165f65ebab6127d inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#af3fee4a1a65d7c478165f65ebab6127d">saveToCheckpoint</a> (int fd, const char *filename, size_t *bytes)</td></tr>
<tr class="separator:af3fee4a1a65d7c478165f65ebab6127d inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ac9335d75d817fc2d5cf171da9b7e22 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a7ac9335d75d817fc2d5cf171da9b7e22">loadFromCheckpoint</a> (int fd, const char *filename, size_t *bytes)</td></tr>
<tr class="separator:a7ac9335d75d817fc2d5cf171da9b7e22 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3821799295d5c30c5f47fd61880b9cf4 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a3821799295d5c30c5f47fd61880b9cf4">saveToCheckpointShared</a> (<a class="el" href="classlbann_1_1persist.html">persist</a> &amp;p)</td></tr>
<tr class="separator:a3821799295d5c30c5f47fd61880b9cf4 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd2524835a05a2d88c92e546e15a80a9 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#acd2524835a05a2d88c92e546e15a80a9">loadFromCheckpointShared</a> (<a class="el" href="classlbann_1_1persist.html">persist</a> &amp;p)</td></tr>
<tr class="separator:acd2524835a05a2d88c92e546e15a80a9 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abac507d5959895fc94a77a7d276acff8 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#abac507d5959895fc94a77a7d276acff8">get_fp_output</a> (<a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> &amp;fp_output, const <a class="el" href="classlbann_1_1Layer.html">Layer</a> *next_layer=NULL) const </td></tr>
<tr class="separator:abac507d5959895fc94a77a7d276acff8 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb826654d76064e06199e7deb4d06009 inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#abb826654d76064e06199e7deb4d06009">get_bp_output</a> (<a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> &amp;fp_output, const <a class="el" href="classlbann_1_1Layer.html">Layer</a> *prev_layer=NULL) const </td></tr>
<tr class="separator:abb826654d76064e06199e7deb4d06009 inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad882d4354555bc3782b1cfc219d8693f inherit pub_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual const std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#ad882d4354555bc3782b1cfc219d8693f">fp_output_dims</a> (const <a class="el" href="classlbann_1_1Layer.html">Layer</a> *next_layer=NULL) const </td></tr>
<tr class="separator:ad882d4354555bc3782b1cfc219d8693f inherit pub_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classlbann_1_1optimizable__layer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classlbann_1_1optimizable__layer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classlbann_1_1optimizable__layer.html">lbann::optimizable_layer</a></td></tr>
<tr class="memitem:ad3a85970b4dd064936e4808742356056 inherit pub_methods_classlbann_1_1optimizable__layer"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1optimizable__layer.html#ad3a85970b4dd064936e4808742356056">~optimizable_layer</a> ()</td></tr>
<tr class="separator:ad3a85970b4dd064936e4808742356056 inherit pub_methods_classlbann_1_1optimizable__layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abbff433a622a1182b1a6329fcc34982d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a></td></tr>
<tr class="separator:abbff433a622a1182b1a6329fcc34982d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1268cb12bd13dcfdcc842b9ff30cc371"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a></td></tr>
<tr class="separator:a1268cb12bd13dcfdcc842b9ff30cc371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ee72d5efbf47c74796510ee61dbb14"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a></td></tr>
<tr class="separator:aa2ee72d5efbf47c74796510ee61dbb14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2de71c25398f7d7e7e5382972a3e5f7f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">m_statistics_v</a></td></tr>
<tr class="separator:a2de71c25398f7d7e7e5382972a3e5f7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad99266cafa069f5e07595386ecfe2ad9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a></td></tr>
<tr class="separator:ad99266cafa069f5e07595386ecfe2ad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ffea88a297a2ee162357f27d14b5837"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a></td></tr>
<tr class="separator:a7ffea88a297a2ee162357f27d14b5837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade1799e1276f95596f9abec29869c04f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a></td></tr>
<tr class="separator:ade1799e1276f95596f9abec29869c04f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a658bcd94b2a07552f0dad589dcf7e6a9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a></td></tr>
<tr class="separator:a658bcd94b2a07552f0dad589dcf7e6a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dd4d9c92ea46fd9a4ee1eabda356053"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a></td></tr>
<tr class="separator:a9dd4d9c92ea46fd9a4ee1eabda356053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d4491ba60843b8f1db86e258d346dbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a></td></tr>
<tr class="separator:a1d4491ba60843b8f1db86e258d346dbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06648c33b0b48859e7f46697a9b9f3f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a06648c33b0b48859e7f46697a9b9f3f7">m_scale_init</a></td></tr>
<tr class="separator:a06648c33b0b48859e7f46697a9b9f3f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d6c3edc4bbbfd3a64b8ac7b385f8ce5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a9d6c3edc4bbbfd3a64b8ac7b385f8ce5">m_bias_init</a></td></tr>
<tr class="separator:a9d6c3edc4bbbfd3a64b8ac7b385f8ce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaa7676d8f6474cd8a482c35ad75e0e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a></td></tr>
<tr class="separator:afaa7676d8f6474cd8a482c35ad75e0e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa38922fa01fa2cf422599db2e9704273"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a></td></tr>
<tr class="separator:aa38922fa01fa2cf422599db2e9704273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae19e389d9af998d59ae205d69919f8b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a></td></tr>
<tr class="separator:ae19e389d9af998d59ae205d69919f8b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62c59c3e7e6b1a514c484c57e6e4fa89"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a></td></tr>
<tr class="separator:a62c59c3e7e6b1a514c484c57e6e4fa89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b8166a66c3f67998da26c52a306bf75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a></td></tr>
<tr class="separator:a2b8166a66c3f67998da26c52a306bf75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8685632d83933bd06d1dab311216648"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">m_scale_bias_gradient_v</a></td></tr>
<tr class="separator:ac8685632d83933bd06d1dab311216648"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab82e74f905b7a117d9940f8542451e37"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">m_epsilon</a></td></tr>
<tr class="separator:ab82e74f905b7a117d9940f8542451e37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a33289150c01899f4b7ef2980771899"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">m_use_global_stats</a></td></tr>
<tr class="separator:a0a33289150c01899f4b7ef2980771899"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pro_methods_classlbann_1_1Layer"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classlbann_1_1Layer')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classlbann_1_1Layer.html">lbann::Layer</a></td></tr>
<tr class="memitem:a935881e25a98b4ffad1985dc04c19572 inherit pro_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a935881e25a98b4ffad1985dc04c19572">fp_set_std_matrix_view</a> ()</td></tr>
<tr class="separator:a935881e25a98b4ffad1985dc04c19572 inherit pro_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad388ef1cc8ff6f43e531de7dbd62d996 inherit pro_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#ad388ef1cc8ff6f43e531de7dbd62d996">bp_set_std_matrix_view</a> ()</td></tr>
<tr class="separator:ad388ef1cc8ff6f43e531de7dbd62d996 inherit pro_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90fce1b06c1f2abb480e18cfe08a9746 inherit pro_methods_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a90fce1b06c1f2abb480e18cfe08a9746">setup_dims</a> ()</td></tr>
<tr class="separator:a90fce1b06c1f2abb480e18cfe08a9746 inherit pro_methods_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classlbann_1_1learning__regularizer"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classlbann_1_1learning__regularizer')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classlbann_1_1learning__regularizer.html">lbann::learning_regularizer</a></td></tr>
<tr class="memitem:a09a2a4285c8a6964f35e75ddf681d1d0 inherit pro_attribs_classlbann_1_1learning__regularizer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1optimizer.html">optimizer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1learning__regularizer.html#a09a2a4285c8a6964f35e75ddf681d1d0">m_optimizer</a></td></tr>
<tr class="separator:a09a2a4285c8a6964f35e75ddf681d1d0 inherit pro_attribs_classlbann_1_1learning__regularizer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classlbann_1_1Layer"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classlbann_1_1Layer')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classlbann_1_1Layer.html">lbann::Layer</a></td></tr>
<tr class="memitem:a09c7d2b97bd211099528f5b3c33c31e3 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a09c7d2b97bd211099528f5b3c33c31e3">m_index</a></td></tr>
<tr class="memdesc:a09c7d2b97bd211099528f5b3c33c31e3 inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classlbann_1_1Layer.html">Layer</a> index (start with 0)  <a href="#a09c7d2b97bd211099528f5b3c33c31e3">More...</a><br/></td></tr>
<tr class="separator:a09c7d2b97bd211099528f5b3c33c31e3 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5de05c52f22e0bbd7c703bec3ad4dbf2 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a></td></tr>
<tr class="separator:a5de05c52f22e0bbd7c703bec3ad4dbf2 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b5ebc8a7d9329d8a773ed787e7b41d8 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a6b5ebc8a7d9329d8a773ed787e7b41d8">m_num_neurons</a></td></tr>
<tr class="memdesc:a6b5ebc8a7d9329d8a773ed787e7b41d8 inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of neurons.  <a href="#a6b5ebc8a7d9329d8a773ed787e7b41d8">More...</a><br/></td></tr>
<tr class="separator:a6b5ebc8a7d9329d8a773ed787e7b41d8 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfd6178d21498c9095cd947ae1eb2d6a inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#adfd6178d21498c9095cd947ae1eb2d6a">m_num_neuron_dims</a></td></tr>
<tr class="memdesc:adfd6178d21498c9095cd947ae1eb2d6a inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of dimensions in neuron tensor.  <a href="#adfd6178d21498c9095cd947ae1eb2d6a">More...</a><br/></td></tr>
<tr class="separator:adfd6178d21498c9095cd947ae1eb2d6a inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb34bb8031f57a483e2e327a5f229f48 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">m_neuron_dims</a></td></tr>
<tr class="memdesc:abb34bb8031f57a483e2e327a5f229f48 inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Neuron tensor dimensions.  <a href="#abb34bb8031f57a483e2e327a5f229f48">More...</a><br/></td></tr>
<tr class="separator:abb34bb8031f57a483e2e327a5f229f48 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7b30f4e28d58204bfcbb76886f9136d inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#ac7b30f4e28d58204bfcbb76886f9136d">m_num_prev_neurons</a></td></tr>
<tr class="memdesc:ac7b30f4e28d58204bfcbb76886f9136d inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of neurons in previous layer.  <a href="#ac7b30f4e28d58204bfcbb76886f9136d">More...</a><br/></td></tr>
<tr class="separator:ac7b30f4e28d58204bfcbb76886f9136d inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc052afb38f170e839db00d3c8151d1e inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#adc052afb38f170e839db00d3c8151d1e">m_num_prev_neuron_dims</a></td></tr>
<tr class="memdesc:adc052afb38f170e839db00d3c8151d1e inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of dimensions in previous layer's neuron tensor.  <a href="#adc052afb38f170e839db00d3c8151d1e">More...</a><br/></td></tr>
<tr class="separator:adc052afb38f170e839db00d3c8151d1e inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae204d1a2a79606eaa117273857ff62a3 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#ae204d1a2a79606eaa117273857ff62a3">m_prev_neuron_dims</a></td></tr>
<tr class="memdesc:ae204d1a2a79606eaa117273857ff62a3 inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Neuron tensor dimensions in previous layer.  <a href="#ae204d1a2a79606eaa117273857ff62a3">More...</a><br/></td></tr>
<tr class="separator:ae204d1a2a79606eaa117273857ff62a3 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8b115cb89d6e8081de3f148a8ad2ef7 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8">execution_mode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#af8b115cb89d6e8081de3f148a8ad2ef7">m_execution_mode</a></td></tr>
<tr class="separator:af8b115cb89d6e8081de3f148a8ad2ef7 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9f5a9932ea3b5f7b9e43b200934b2e6 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#ae9f5a9932ea3b5f7b9e43b200934b2e6">m_prev_error_signal</a></td></tr>
<tr class="memdesc:ae9f5a9932ea3b5f7b9e43b200934b2e6 inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Local copy of the error signal from "previous" layer ((# neurons) x mini-batch size)  <a href="#ae9f5a9932ea3b5f7b9e43b200934b2e6">More...</a><br/></td></tr>
<tr class="separator:ae9f5a9932ea3b5f7b9e43b200934b2e6 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade2752719d9018f9def017340cd0e5b1 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#ade2752719d9018f9def017340cd0e5b1">m_activations</a></td></tr>
<tr class="memdesc:ade2752719d9018f9def017340cd0e5b1 inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activations - non-linearity applied to weighted sum ((# neurons) x mini-batch size)  <a href="#ade2752719d9018f9def017340cd0e5b1">More...</a><br/></td></tr>
<tr class="separator:ade2752719d9018f9def017340cd0e5b1 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc716e53078923a6f8bd17f751ddc5bc inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#abc716e53078923a6f8bd17f751ddc5bc">m_activations_v</a></td></tr>
<tr class="memdesc:abc716e53078923a6f8bd17f751ddc5bc inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">View of active columns in activations matrix.  <a href="#abc716e53078923a6f8bd17f751ddc5bc">More...</a><br/></td></tr>
<tr class="separator:abc716e53078923a6f8bd17f751ddc5bc inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f5e339cda98356c68063ea3845a94d2 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1model.html">model</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a8f5e339cda98356c68063ea3845a94d2">m_neural_network_model</a></td></tr>
<tr class="separator:a8f5e339cda98356c68063ea3845a94d2 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eba0e6629a2205291c3443a956a7c1a inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classlbann_1_1Layer.html">Layer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a3eba0e6629a2205291c3443a956a7c1a">m_prev_layer</a></td></tr>
<tr class="memdesc:a3eba0e6629a2205291c3443a956a7c1a inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to previous layer.  <a href="#a3eba0e6629a2205291c3443a956a7c1a">More...</a><br/></td></tr>
<tr class="separator:a3eba0e6629a2205291c3443a956a7c1a inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf38e5b69ae1a0538d676f91a00ceac1 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classlbann_1_1Layer.html">Layer</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#acf38e5b69ae1a0538d676f91a00ceac1">m_next_layer</a></td></tr>
<tr class="memdesc:acf38e5b69ae1a0538d676f91a00ceac1 inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to next layer.  <a href="#acf38e5b69ae1a0538d676f91a00ceac1">More...</a><br/></td></tr>
<tr class="separator:acf38e5b69ae1a0538d676f91a00ceac1 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdb56f81bf3ebe1ea95e860fb53c26a7 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#acdb56f81bf3ebe1ea95e860fb53c26a7">m_error_signal</a></td></tr>
<tr class="memdesc:acdb56f81bf3ebe1ea95e860fb53c26a7 inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error signal to "next" layer (i.e. deltas) ((# neurons) x mini-batch size)  <a href="#acdb56f81bf3ebe1ea95e860fb53c26a7">More...</a><br/></td></tr>
<tr class="separator:acdb56f81bf3ebe1ea95e860fb53c26a7 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cbe0052b5571d6c011733d0734ffb80 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a9cbe0052b5571d6c011733d0734ffb80">m_error_signal_v</a></td></tr>
<tr class="memdesc:a9cbe0052b5571d6c011733d0734ffb80 inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">View of active columns in error signal matrix.  <a href="#a9cbe0052b5571d6c011733d0734ffb80">More...</a><br/></td></tr>
<tr class="separator:a9cbe0052b5571d6c011733d0734ffb80 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8611c54213e26e902c396a152126b94 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a></td></tr>
<tr class="memdesc:ab8611c54213e26e902c396a152126b94 inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">Local view or copy of the activations from the "previous" layer ((# previous layer's neurons) x mini-batch size)  <a href="#ab8611c54213e26e902c396a152126b94">More...</a><br/></td></tr>
<tr class="separator:ab8611c54213e26e902c396a152126b94 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7881cb5eff5207c15fa835d65462e8f inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#af7881cb5eff5207c15fa835d65462e8f">m_using_gpus</a></td></tr>
<tr class="separator:af7881cb5eff5207c15fa835d65462e8f inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08dbb94239e3b8c96329786c57c72e21 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcudnn_1_1cudnn__manager.html">cudnn::cudnn_manager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a></td></tr>
<tr class="memdesc:a08dbb94239e3b8c96329786c57c72e21 inherit pro_attribs_classlbann_1_1Layer"><td class="mdescLeft">&#160;</td><td class="mdescRight">cuDNN manager  <a href="#a08dbb94239e3b8c96329786c57c72e21">More...</a><br/></td></tr>
<tr class="separator:a08dbb94239e3b8c96329786c57c72e21 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ee7bf7544942bc8cf208b565349c66 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a94ee7bf7544942bc8cf208b565349c66">fp_time</a></td></tr>
<tr class="separator:a94ee7bf7544942bc8cf208b565349c66 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19ead6e739e08170ef49c11f84eb638c inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a19ead6e739e08170ef49c11f84eb638c">fp_compute_time</a></td></tr>
<tr class="separator:a19ead6e739e08170ef49c11f84eb638c inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaa9acb195346090fffcd64013295479 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#abaa9acb195346090fffcd64013295479">bp_time</a></td></tr>
<tr class="separator:abaa9acb195346090fffcd64013295479 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18f90fa1ec6d7fb2288a40ada0105d11 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#a18f90fa1ec6d7fb2288a40ada0105d11">bp_compute_time</a></td></tr>
<tr class="separator:a18f90fa1ec6d7fb2288a40ada0105d11 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd6c1fa01659749b22de59baf8259b84 inherit pro_attribs_classlbann_1_1Layer"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1Layer.html#abd6c1fa01659749b22de59baf8259b84">update_time</a></td></tr>
<tr class="separator:abd6c1fa01659749b22de59baf8259b84 inherit pro_attribs_classlbann_1_1Layer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;data_layout T_layout&gt;<br/>
class lbann::batch_normalization&lt; T_layout &gt;</h3>

<p>Batch normalization: normalize layers to zero mean/unit standard deviation. See paper: Sergey Ioffe and Christian Szegedy. "Batch Normalization: Accelerating Deep Network Training by Reducing Internal Covariate Shift." ICML 2015. This keeps a running mean and standard deviation (with exponential decay) instead of computing it over the data at test time. This approach seems to have become standard. See also: <a href="https://cthorey.github.io/backpropagation/">https://cthorey.github.io/backpropagation/</a> </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00112">112</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a52dbaeac2465af96f28ce98bf7afc5ac"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::<a class="el" href="classlbann_1_1batch__normalization.html">batch_normalization</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *&#160;</td>
          <td class="paramname"><em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlbann_1_1optimizer.html">optimizer</a> *&#160;</td>
          <td class="paramname"><em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&#160;</td>
          <td class="paramname"><em>decay</em> = <code>0.9</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&#160;</td>
          <td class="paramname"><em>scale_init</em> = <code>1.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&#160;</td>
          <td class="paramname"><em>bias_init</em> = <code>0.0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&#160;</td>
          <td class="paramname"><em>epsilon</em> = <code>1e-5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcudnn_1_1cudnn__manager.html">cudnn::cudnn_manager</a> *&#160;</td>
          <td class="paramname"><em>cudnn</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_global_stats</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set up batch normalization. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">decay</td><td>Controls the momentum of the running mean/standard deviation averages. </td></tr>
    <tr><td class="paramname">scale_init</td><td>The initial value for scaling parameter <img class="formulaInl" alt="$\gamma$" src="form_0.png"/>. The paper recommends 1.0 as a starting point, but other papers have had better results with a smaller value (e.g. 0.1). </td></tr>
    <tr><td class="paramname">bias_init</td><td>The initial value for bias parameter <img class="formulaInl" alt="$\beta$" src="form_1.png"/>. This should almost always stay at zero. </td></tr>
    <tr><td class="paramname">epsilon</td><td>A small number to avoid division by zero. </td></tr>
    <tr><td class="paramname">use_global_stats</td><td>Whether to use running statistics when training. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00203">203</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    : <a class="code" href="classlbann_1_1learning__regularizer.html#ac47bb0bef9e4491cff6de0af3ea8110a">learning_regularizer</a>(index, <a class="code" href="file__io_8cpp.html#ab048c6f9fcbcfaa57ce68b00263dbebe">comm</a>, opt),</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <a class="code" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a>(decay),</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <a class="code" href="classlbann_1_1batch__normalization.html#a06648c33b0b48859e7f46697a9b9f3f7">m_scale_init</a>(scale_init),</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <a class="code" href="classlbann_1_1batch__normalization.html#a9d6c3edc4bbbfd3a64b8ac7b385f8ce5">m_bias_init</a>(bias_init),</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <a class="code" href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">m_epsilon</a>(epsilon),</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">m_use_global_stats</a>(use_global_stats) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    static_assert(T_layout == <a class="code" href="base_8hpp.html#a786677cbfb3f5677b4d84f3056eb08dba37d2a3465f7cbf4ab60f4e79944d0638">data_layout::DATA_PARALLEL</a>,</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                  <span class="stringliteral">&quot;batch normalization only supports DATA_PARALLEL&quot;</span>);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="preprocessor">  #ifdef LBANN_SEQUENTIAL_CONSISTENCY</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="preprocessor"></span>    <span class="comment">// Force global computation.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">m_use_global_stats</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">  #endif</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="preprocessor"></span>    <span class="comment">// Setup the data distribution</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#af8a8bef1eaf98000d644911a3f1e4c9b">initialize_distributed_matrices</a>();</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="preprocessor">  #ifdef __LIB_CUDNN</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// Initialize cuDNN objects</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    m_channel_tensor_desc = NULL;    </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">// Initialize GPU memory if using GPU</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">if</span>(cudnn) {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      this-&gt;<a class="code" href="classlbann_1_1Layer.html#af7881cb5eff5207c15fa835d65462e8f">m_using_gpus</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a> = cudnn;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor">  #endif // __LIB_CUDNN</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div>
<div class="ttc" id="base_8hpp_html_a786677cbfb3f5677b4d84f3056eb08dba37d2a3465f7cbf4ab60f4e79944d0638"><div class="ttname"><a href="base_8hpp.html#a786677cbfb3f5677b4d84f3056eb08dba37d2a3465f7cbf4ab60f4e79944d0638">data_layout::DATA_PARALLEL</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_af7881cb5eff5207c15fa835d65462e8f"><div class="ttname"><a href="classlbann_1_1Layer.html#af7881cb5eff5207c15fa835d65462e8f">lbann::Layer::m_using_gpus</a></div><div class="ttdeci">bool m_using_gpus</div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00268">layer.hpp:268</a></div></div>
<div class="ttc" id="file__io_8cpp_html_ab048c6f9fcbcfaa57ce68b00263dbebe"><div class="ttname"><a href="file__io_8cpp.html#ab048c6f9fcbcfaa57ce68b00263dbebe">comm</a></div><div class="ttdeci">static MPI_Comm comm</div><div class="ttdef"><b>Definition:</b> <a href="file__io_8cpp_source.html#l00044">file_io.cpp:44</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a0a33289150c01899f4b7ef2980771899"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">lbann::batch_normalization::m_use_global_stats</a></div><div class="ttdeci">bool m_use_global_stats</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00157">batch_normalization.hpp:157</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_af8a8bef1eaf98000d644911a3f1e4c9b"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#af8a8bef1eaf98000d644911a3f1e4c9b">lbann::batch_normalization::initialize_distributed_matrices</a></div><div class="ttdeci">void initialize_distributed_matrices()</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00382">batch_normalization.hpp:382</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa2ee72d5efbf47c74796510ee61dbb14"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">lbann::batch_normalization::m_decay</a></div><div class="ttdeci">DataType m_decay</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00121">batch_normalization.hpp:121</a></div></div>
<div class="ttc" id="classlbann_1_1learning__regularizer_html_ac47bb0bef9e4491cff6de0af3ea8110a"><div class="ttname"><a href="classlbann_1_1learning__regularizer.html#ac47bb0bef9e4491cff6de0af3ea8110a">lbann::learning_regularizer::learning_regularizer</a></div><div class="ttdeci">learning_regularizer(int index, lbann_comm *comm, optimizer *opt)</div><div class="ttdef"><b>Definition:</b> <a href="learning__regularizer_8hpp_source.html#l00044">learning_regularizer.hpp:44</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9d6c3edc4bbbfd3a64b8ac7b385f8ce5"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9d6c3edc4bbbfd3a64b8ac7b385f8ce5">lbann::batch_normalization::m_bias_init</a></div><div class="ttdeci">DataType m_bias_init</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00140">batch_normalization.hpp:140</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a08dbb94239e3b8c96329786c57c72e21"><div class="ttname"><a href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">lbann::Layer::m_cudnn</a></div><div class="ttdeci">cudnn::cudnn_manager * m_cudnn</div><div class="ttdoc">cuDNN manager </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00271">layer.hpp:271</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a06648c33b0b48859e7f46697a9b9f3f7"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a06648c33b0b48859e7f46697a9b9f3f7">lbann::batch_normalization::m_scale_init</a></div><div class="ttdeci">DataType m_scale_init</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00138">batch_normalization.hpp:138</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ab82e74f905b7a117d9940f8542451e37"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">lbann::batch_normalization::m_epsilon</a></div><div class="ttdeci">DataType m_epsilon</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00155">batch_normalization.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_a52dbaeac2465af96f28ce98bf7afc5ac_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_a52dbaeac2465af96f28ce98bf7afc5ac_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_a52dbaeac2465af96f28ce98bf7afc5ac_cgraph" id="classlbann_1_1batch__normalization_a52dbaeac2465af96f28ce98bf7afc5ac_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#af8a8bef1eaf98000d644911a3f1e4c9b" title="lbann::batch_normalization\l::initialize_distributed\l_matrices" alt="" coords="233,5,410,61"/><area shape="rect" id="node3" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4" title="lbann::lbann_comm::\lget_model_grid" alt="" coords="459,13,602,54"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_a52dbaeac2465af96f28ce98bf7afc5ac_icgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_a52dbaeac2465af96f28ce98bf7afc5ac_icgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_a52dbaeac2465af96f28ce98bf7afc5ac_icgraph" id="classlbann_1_1batch__normalization_a52dbaeac2465af96f28ce98bf7afc5ac_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#a9b759a4555f36a8b4738a690f0c7b328" title="lbann::batch_normalization\l::copy" alt="" coords="233,5,410,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a62e642fc7c064a49826e5d4a10a87e5c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::<a class="el" href="classlbann_1_1batch__normalization.html">batch_normalization</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlbann_1_1batch__normalization.html">batch_normalization</a>&lt; T_layout &gt; &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00242">242</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                                        :</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="classlbann_1_1learning__regularizer.html#ac47bb0bef9e4491cff6de0af3ea8110a">learning_regularizer</a>(other),</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a>(other.m_decay),</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a06648c33b0b48859e7f46697a9b9f3f7">m_scale_init</a>(other.m_scale_init),</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a9d6c3edc4bbbfd3a64b8ac7b385f8ce5">m_bias_init</a>(other.m_bias_init),</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">m_epsilon</a>(other.m_epsilon),</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">m_use_global_stats</a>(other.m_use_global_stats) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">// Copy matrices</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a> = other.m_parameters-&gt;Copy();</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a> = other.m_parameters_gradient-&gt;Copy();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a> = other.m_mean_v-&gt;Copy();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a> = other.m_var_v-&gt;Copy();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a> = other.m_running_mean_v-&gt;Copy();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a> = other.m_running_var_v-&gt;Copy();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a> = other.m_mean_gradient_v-&gt;Copy();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a> = other.m_var_gradient_v-&gt;Copy();</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a> = other.m_scale_v-&gt;Copy();</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a> = other.m_bias_v-&gt;Copy();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a> = other.m_scale_bias_v-&gt;Copy();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a> = other.m_scale_gradient_v-&gt;Copy();</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a> = other.m_bias_gradient_v-&gt;Copy();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">m_scale_bias_gradient_v</a> = other.m_scale_bias_gradient_v-&gt;Copy();</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// Setup matrix views</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a64da84b86a304065627ddb7a7482f81a">setup_views</a>();</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// Update optimizer.</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1learning__regularizer.html#a09a2a4285c8a6964f35e75ddf681d1d0">m_optimizer</a>-&gt;<a class="code" href="classlbann_1_1optimizer.html#a34a0dff15ff43cf9c76d0e1a4899d4cb">set_parameters</a>(<a class="code" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a>);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  }</div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ade1799e1276f95596f9abec29869c04f"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">lbann::batch_normalization::m_running_mean_v</a></div><div class="ttdeci">AbsDistMat * m_running_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00129">batch_normalization.hpp:129</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_afaa7676d8f6474cd8a482c35ad75e0e2"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">lbann::batch_normalization::m_scale_v</a></div><div class="ttdeci">AbsDistMat * m_scale_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00142">batch_normalization.hpp:142</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a2b8166a66c3f67998da26c52a306bf75"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">lbann::batch_normalization::m_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00150">batch_normalization.hpp:150</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1268cb12bd13dcfdcc842b9ff30cc371"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">lbann::batch_normalization::m_parameters_gradient</a></div><div class="ttdeci">AbsDistMat * m_parameters_gradient</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00118">batch_normalization.hpp:118</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa38922fa01fa2cf422599db2e9704273"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">lbann::batch_normalization::m_bias_v</a></div><div class="ttdeci">AbsDistMat * m_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00144">batch_normalization.hpp:144</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9dd4d9c92ea46fd9a4ee1eabda356053"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">lbann::batch_normalization::m_mean_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_mean_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00133">batch_normalization.hpp:133</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_abbff433a622a1182b1a6329fcc34982d"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">lbann::batch_normalization::m_parameters</a></div><div class="ttdeci">AbsDistMat * m_parameters</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00116">batch_normalization.hpp:116</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ae19e389d9af998d59ae205d69919f8b6"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">lbann::batch_normalization::m_scale_bias_v</a></div><div class="ttdeci">AbsDistMat * m_scale_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00146">batch_normalization.hpp:146</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a62c59c3e7e6b1a514c484c57e6e4fa89"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">lbann::batch_normalization::m_scale_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00148">batch_normalization.hpp:148</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a0a33289150c01899f4b7ef2980771899"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">lbann::batch_normalization::m_use_global_stats</a></div><div class="ttdeci">bool m_use_global_stats</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00157">batch_normalization.hpp:157</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa2ee72d5efbf47c74796510ee61dbb14"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">lbann::batch_normalization::m_decay</a></div><div class="ttdeci">DataType m_decay</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00121">batch_normalization.hpp:121</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ac8685632d83933bd06d1dab311216648"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">lbann::batch_normalization::m_scale_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00152">batch_normalization.hpp:152</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a658bcd94b2a07552f0dad589dcf7e6a9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">lbann::batch_normalization::m_running_var_v</a></div><div class="ttdeci">AbsDistMat * m_running_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00131">batch_normalization.hpp:131</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ad99266cafa069f5e07595386ecfe2ad9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">lbann::batch_normalization::m_mean_v</a></div><div class="ttdeci">AbsDistMat * m_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00125">batch_normalization.hpp:125</a></div></div>
<div class="ttc" id="classlbann_1_1learning__regularizer_html_ac47bb0bef9e4491cff6de0af3ea8110a"><div class="ttname"><a href="classlbann_1_1learning__regularizer.html#ac47bb0bef9e4491cff6de0af3ea8110a">lbann::learning_regularizer::learning_regularizer</a></div><div class="ttdeci">learning_regularizer(int index, lbann_comm *comm, optimizer *opt)</div><div class="ttdef"><b>Definition:</b> <a href="learning__regularizer_8hpp_source.html#l00044">learning_regularizer.hpp:44</a></div></div>
<div class="ttc" id="classlbann_1_1optimizer_html_a34a0dff15ff43cf9c76d0e1a4899d4cb"><div class="ttname"><a href="classlbann_1_1optimizer.html#a34a0dff15ff43cf9c76d0e1a4899d4cb">lbann::optimizer::set_parameters</a></div><div class="ttdeci">void set_parameters(AbsDistMat *parameters)</div><div class="ttdef"><b>Definition:</b> <a href="optimizer_8hpp_source.html#l00097">optimizer.hpp:97</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9d6c3edc4bbbfd3a64b8ac7b385f8ce5"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9d6c3edc4bbbfd3a64b8ac7b385f8ce5">lbann::batch_normalization::m_bias_init</a></div><div class="ttdeci">DataType m_bias_init</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00140">batch_normalization.hpp:140</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a7ffea88a297a2ee162357f27d14b5837"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">lbann::batch_normalization::m_var_v</a></div><div class="ttdeci">AbsDistMat * m_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00127">batch_normalization.hpp:127</a></div></div>
<div class="ttc" id="classlbann_1_1learning__regularizer_html_a09a2a4285c8a6964f35e75ddf681d1d0"><div class="ttname"><a href="classlbann_1_1learning__regularizer.html#a09a2a4285c8a6964f35e75ddf681d1d0">lbann::learning_regularizer::m_optimizer</a></div><div class="ttdeci">optimizer * m_optimizer</div><div class="ttdef"><b>Definition:</b> <a href="learning__regularizer_8hpp_source.html#l00042">learning_regularizer.hpp:42</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a06648c33b0b48859e7f46697a9b9f3f7"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a06648c33b0b48859e7f46697a9b9f3f7">lbann::batch_normalization::m_scale_init</a></div><div class="ttdeci">DataType m_scale_init</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00138">batch_normalization.hpp:138</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ab82e74f905b7a117d9940f8542451e37"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">lbann::batch_normalization::m_epsilon</a></div><div class="ttdeci">DataType m_epsilon</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00155">batch_normalization.hpp:155</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1d4491ba60843b8f1db86e258d346dbc"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">lbann::batch_normalization::m_var_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_var_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00135">batch_normalization.hpp:135</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a64da84b86a304065627ddb7a7482f81a"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a64da84b86a304065627ddb7a7482f81a">lbann::batch_normalization::setup_views</a></div><div class="ttdeci">void setup_views()</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00431">batch_normalization.hpp:431</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_a62e642fc7c064a49826e5d4a10a87e5c_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_a62e642fc7c064a49826e5d4a10a87e5c_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_a62e642fc7c064a49826e5d4a10a87e5c_cgraph" id="classlbann_1_1batch__normalization_a62e642fc7c064a49826e5d4a10a87e5c_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#a64da84b86a304065627ddb7a7482f81a" title="lbann::batch_normalization\l::setup_views" alt="" coords="233,5,410,46"/><area shape="rect" id="node4" href="classlbann_1_1optimizer.html#a34a0dff15ff43cf9c76d0e1a4899d4cb" title="lbann::optimizer::set\l_parameters" alt="" coords="251,70,391,111"/><area shape="rect" id="node3" href="classlbann_1_1Layer.html#a705cdeb600e57a076a24f6be1c31f5a5" title="lbann::Layer::setup\l_views" alt="" coords="459,5,592,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8ce6201cc142c5ca598f230132c5270b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::~<a class="el" href="classlbann_1_1batch__normalization.html">batch_normalization</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00337">337</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                         {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="preprocessor">  #ifdef __LIB_CUDNN</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="comment">// Destroy cuDNN objects</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span>(m_channel_tensor_desc) {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      CHECK_CUDNN(cudnnDestroyTensorDescriptor(m_channel_tensor_desc));</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="comment">// Deallocate GPU memory</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;deallocate_on_gpus(m_mean_d);</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;deallocate_on_gpus(m_var_d);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;deallocate_on_gpus(m_scale_d);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;deallocate_on_gpus(m_bias_d);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;deallocate_on_gpus(m_scale_gradient_d);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;deallocate_on_gpus(m_bias_gradient_d);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;deallocate_on_gpus(m_mean_gradient_d);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;deallocate_on_gpus(m_var_gradient_d);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="comment">// Delete pinned memory workspace</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;unpin_matrix(*m_pinned_workspace);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keyword">delete</span> m_pinned_workspace;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="preprocessor">  #endif // #ifdef __LIB_CUDNN</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="comment">// Deallocate matrices</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>)          <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>) <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a>)              <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a>)               <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a>)      <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a>;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a>)       <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a>)     <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a>;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a>)      <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a>;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a>)             <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a>;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a>)              <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a>;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a>)        <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a>;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a>)    <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a>;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a>)     <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a>;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">m_scale_bias_gradient_v</a>) <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">m_scale_bias_gradient_v</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  }</div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ade1799e1276f95596f9abec29869c04f"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">lbann::batch_normalization::m_running_mean_v</a></div><div class="ttdeci">AbsDistMat * m_running_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00129">batch_normalization.hpp:129</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_afaa7676d8f6474cd8a482c35ad75e0e2"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">lbann::batch_normalization::m_scale_v</a></div><div class="ttdeci">AbsDistMat * m_scale_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00142">batch_normalization.hpp:142</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a2b8166a66c3f67998da26c52a306bf75"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">lbann::batch_normalization::m_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00150">batch_normalization.hpp:150</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1268cb12bd13dcfdcc842b9ff30cc371"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">lbann::batch_normalization::m_parameters_gradient</a></div><div class="ttdeci">AbsDistMat * m_parameters_gradient</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00118">batch_normalization.hpp:118</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa38922fa01fa2cf422599db2e9704273"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">lbann::batch_normalization::m_bias_v</a></div><div class="ttdeci">AbsDistMat * m_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00144">batch_normalization.hpp:144</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9dd4d9c92ea46fd9a4ee1eabda356053"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">lbann::batch_normalization::m_mean_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_mean_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00133">batch_normalization.hpp:133</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_abbff433a622a1182b1a6329fcc34982d"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">lbann::batch_normalization::m_parameters</a></div><div class="ttdeci">AbsDistMat * m_parameters</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00116">batch_normalization.hpp:116</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ae19e389d9af998d59ae205d69919f8b6"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">lbann::batch_normalization::m_scale_bias_v</a></div><div class="ttdeci">AbsDistMat * m_scale_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00146">batch_normalization.hpp:146</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a62c59c3e7e6b1a514c484c57e6e4fa89"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">lbann::batch_normalization::m_scale_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00148">batch_normalization.hpp:148</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ac8685632d83933bd06d1dab311216648"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">lbann::batch_normalization::m_scale_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00152">batch_normalization.hpp:152</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a658bcd94b2a07552f0dad589dcf7e6a9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">lbann::batch_normalization::m_running_var_v</a></div><div class="ttdeci">AbsDistMat * m_running_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00131">batch_normalization.hpp:131</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ad99266cafa069f5e07595386ecfe2ad9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">lbann::batch_normalization::m_mean_v</a></div><div class="ttdeci">AbsDistMat * m_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00125">batch_normalization.hpp:125</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a7ffea88a297a2ee162357f27d14b5837"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">lbann::batch_normalization::m_var_v</a></div><div class="ttdeci">AbsDistMat * m_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00127">batch_normalization.hpp:127</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a08dbb94239e3b8c96329786c57c72e21"><div class="ttname"><a href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">lbann::Layer::m_cudnn</a></div><div class="ttdeci">cudnn::cudnn_manager * m_cudnn</div><div class="ttdoc">cuDNN manager </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00271">layer.hpp:271</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1d4491ba60843b8f1db86e258d346dbc"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">lbann::batch_normalization::m_var_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_var_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00135">batch_normalization.hpp:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a121ba408814e3c2537b2cf015a35ea4a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::bp_compute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perform the layers work / main function for backward propagation </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1Layer.html#a050f01cb51412227b1df289587d1d7ba">lbann::Layer</a>.</p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00514">514</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                    {</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#af7881cb5eff5207c15fa835d65462e8f">m_using_gpus</a>) {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <a class="code" href="classlbann_1_1batch__normalization.html#a7d48ad1531825fc9745c77f9ae5f68d6">bp_compute_gpu</a>();</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;      <a class="code" href="classlbann_1_1batch__normalization.html#a83e40edd001a0b71c31fbc9a3acb2231">bp_compute_cpu</a>();</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  }</div>
<div class="ttc" id="classlbann_1_1Layer_html_af7881cb5eff5207c15fa835d65462e8f"><div class="ttname"><a href="classlbann_1_1Layer.html#af7881cb5eff5207c15fa835d65462e8f">lbann::Layer::m_using_gpus</a></div><div class="ttdeci">bool m_using_gpus</div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00268">layer.hpp:268</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a7d48ad1531825fc9745c77f9ae5f68d6"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a7d48ad1531825fc9745c77f9ae5f68d6">lbann::batch_normalization::bp_compute_gpu</a></div><div class="ttdeci">void bp_compute_gpu()</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00640">batch_normalization.hpp:640</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a83e40edd001a0b71c31fbc9a3acb2231"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a83e40edd001a0b71c31fbc9a3acb2231">lbann::batch_normalization::bp_compute_cpu</a></div><div class="ttdeci">void bp_compute_cpu()</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00842">batch_normalization.hpp:842</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_a121ba408814e3c2537b2cf015a35ea4a_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_a121ba408814e3c2537b2cf015a35ea4a_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_a121ba408814e3c2537b2cf015a35ea4a_cgraph" id="classlbann_1_1batch__normalization_a121ba408814e3c2537b2cf015a35ea4a_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#a7d48ad1531825fc9745c77f9ae5f68d6" title="lbann::batch_normalization\l::bp_compute_gpu" alt="" coords="233,5,410,46"/><area shape="rect" id="node4" href="classlbann_1_1batch__normalization.html#a83e40edd001a0b71c31fbc9a3acb2231" title="lbann::batch_normalization\l::bp_compute_cpu" alt="" coords="233,70,410,111"/><area shape="rect" id="node3" href="classlbann_1_1model.html#adc2be91222e59b976a40f614dbcfb644" title="lbann::model::get_effective\l_mini_batch_size" alt="" coords="459,38,637,79"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a83e40edd001a0b71c31fbc9a3acb2231"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::bp_compute_cpu </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00842">842</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;                        {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <span class="comment">// Local matrices</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; prev_activations_local = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a>-&gt;LockedMatrix();</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; prev_error_signal_local = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ae9f5a9932ea3b5f7b9e43b200934b2e6">m_prev_error_signal</a>-&gt;LockedMatrix();</div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; error_signal_local = this-&gt;<a class="code" href="classlbann_1_1Layer.html#a9cbe0052b5571d6c011733d0734ffb80">m_error_signal_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; mean_local = <a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a>-&gt;LockedMatrix();</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; var_local = <a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a>-&gt;LockedMatrix();</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; scale_local = <a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a>-&gt;LockedMatrix();</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; mean_gradient_local = <a class="code" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; var_gradient_local = <a class="code" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; scale_gradient_local = <a class="code" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; bias_gradient_local = <a class="code" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// Matrix parameters</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structlayer__header.html#af1f45c9c74db048ea424114418f22d50">width</a> = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a>-&gt;Width();</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keyword">const</span> El::Int local_width = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a>-&gt;LocalWidth();</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num_channels = this-&gt;<a class="code" href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">m_neuron_dims</a>[0];</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> channel_size = this-&gt;<a class="code" href="classlbann_1_1Layer.html#a6b5ebc8a7d9329d8a773ed787e7b41d8">m_num_neurons</a> / num_channels;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="comment">// Compute local gradients</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;<span class="preprocessor">    #pragma omp parallel for</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> channel = 0; channel &lt; num_channels; ++channel) {</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="comment">// Initialize channel parameters and gradients</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> mean = mean_local(channel, 0);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> var = var_local(channel, 0);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> scale = scale_local(channel, 0);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> inv_stdev = 1 / std::sqrt(var + <a class="code" href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">m_epsilon</a>);</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dvar_factor = inv_stdev * inv_stdev * inv_stdev / 2;</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dmean = 0;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dvar = 0;</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dscale = 0;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dbias = 0;</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      <span class="comment">// Compute gradient contributions from local entries</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <span class="keyword">const</span> El::Int row_start = channel * channel_size;</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="keyword">const</span> El::Int row_end = (channel+1) * channel_size;</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;      <span class="keywordflow">for</span>(El::Int col = 0; col &lt; local_width; ++col) {</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;        <span class="keywordflow">for</span>(El::Int row = row_start; row &lt; row_end; ++row) {</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;          <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> x = prev_activations_local(row, col);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;          <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> xhat = (x - mean) * inv_stdev;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;          <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dy = prev_error_signal_local(row, col);</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;          dscale += dy * xhat;</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;          dbias += dy;</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;          <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dxhat = dy * scale;</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;          dmean += - dxhat * inv_stdev;</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;          dvar += - dxhat * (x - mean) * dvar_factor;</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      }</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      mean_gradient_local(channel, 0) = dmean;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      var_gradient_local(channel, 0) = dvar;</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      scale_gradient_local(channel, 0) = dscale;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      bias_gradient_local(channel, 0) = dbias;</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    }</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <span class="comment">// Get global gradients by accumulating local gradients</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    scale_gradient_local</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      *= <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(1) / this-&gt;<a class="code" href="classlbann_1_1Layer.html#a8f5e339cda98356c68063ea3845a94d2">m_neural_network_model</a>-&gt;<a class="code" href="classlbann_1_1model.html#adc2be91222e59b976a40f614dbcfb644">get_effective_mini_batch_size</a>();</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    bias_gradient_local</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      *= <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(1) / this-&gt;<a class="code" href="classlbann_1_1Layer.html#a8f5e339cda98356c68063ea3845a94d2">m_neural_network_model</a>-&gt;<a class="code" href="classlbann_1_1model.html#adc2be91222e59b976a40f614dbcfb644">get_effective_mini_batch_size</a>();</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">m_use_global_stats</a>) {</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      El::AllReduce(*<a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>,</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                    <a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>-&gt;RedundantComm(),</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                    El::mpi::SUM);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    </div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="comment">// Compute error signal</span></div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="preprocessor">    #pragma omp parallel for</span></div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> channel = 0; channel &lt; num_channels; ++channel) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="comment">// Initialize channel parameters and gradients</span></div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> mean = mean_local(channel, 0);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> var = var_local(channel, 0);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> scale = scale_local(channel, 0);</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dmean = mean_gradient_local(channel, 0);</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dvar = var_gradient_local(channel, 0);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <span class="comment">// Compute useful constants</span></div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> num_samples = width * channel_size;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> inv_stdev = 1 / std::sqrt(var + <a class="code" href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">m_epsilon</a>);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dmean_term = dmean / num_samples;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dvar_term = dvar * 2 / (num_samples - <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(1));</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="comment">// Compute error signal for current channel</span></div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      <span class="keyword">const</span> El::Int row_start = channel * channel_size;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="keyword">const</span> El::Int row_end = (channel+1) * channel_size;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <span class="keywordflow">for</span>(El::Int col = 0; col &lt; local_width; ++col) {</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;        <span class="keywordflow">for</span>(El::Int row = row_start; row &lt; row_end; ++row) {</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;          <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> x = prev_activations_local(row, col);</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;          <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dy = prev_error_signal_local(row, col);</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;          <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dxhat = dy * scale;</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;          <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> dx = dxhat * inv_stdev;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;          dx += dmean_term;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;          dx += dvar_term * (x - mean);</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;          error_signal_local(row, col) = dx;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        }</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      }</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    }</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;  }</div>
<div class="ttc" id="base_8hpp_html_a279b64f47fb2213ad73e59be937afcfa"><div class="ttname"><a href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a></div><div class="ttdeci">float DataType</div><div class="ttdef"><b>Definition:</b> <a href="base_8hpp_source.html#l00040">base.hpp:40</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_afaa7676d8f6474cd8a482c35ad75e0e2"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">lbann::batch_normalization::m_scale_v</a></div><div class="ttdeci">AbsDistMat * m_scale_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00142">batch_normalization.hpp:142</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a2b8166a66c3f67998da26c52a306bf75"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">lbann::batch_normalization::m_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00150">batch_normalization.hpp:150</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1268cb12bd13dcfdcc842b9ff30cc371"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">lbann::batch_normalization::m_parameters_gradient</a></div><div class="ttdeci">AbsDistMat * m_parameters_gradient</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00118">batch_normalization.hpp:118</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9dd4d9c92ea46fd9a4ee1eabda356053"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">lbann::batch_normalization::m_mean_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_mean_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00133">batch_normalization.hpp:133</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_ae9f5a9932ea3b5f7b9e43b200934b2e6"><div class="ttname"><a href="classlbann_1_1Layer.html#ae9f5a9932ea3b5f7b9e43b200934b2e6">lbann::Layer::m_prev_error_signal</a></div><div class="ttdeci">AbsDistMat * m_prev_error_signal</div><div class="ttdoc">Local copy of the error signal from &amp;quot;previous&amp;quot; layer ((# neurons) x mini-batch size) ...</div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00211">layer.hpp:211</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a6b5ebc8a7d9329d8a773ed787e7b41d8"><div class="ttname"><a href="classlbann_1_1Layer.html#a6b5ebc8a7d9329d8a773ed787e7b41d8">lbann::Layer::m_num_neurons</a></div><div class="ttdeci">int m_num_neurons</div><div class="ttdoc">Number of neurons. </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00202">layer.hpp:202</a></div></div>
<div class="ttc" id="base_8hpp_html_a483ed30937584c6d3a4d76bff5215a34"><div class="ttname"><a href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a></div><div class="ttdeci">El::Matrix&lt; DataType &gt; Mat</div><div class="ttdef"><b>Definition:</b> <a href="base_8hpp_source.html#l00045">base.hpp:45</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_ab8611c54213e26e902c396a152126b94"><div class="ttname"><a href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">lbann::Layer::m_prev_activations</a></div><div class="ttdeci">AbsDistMat * m_prev_activations</div><div class="ttdoc">Local view or copy of the activations from the &amp;quot;previous&amp;quot; layer ((# previous layer&amp;#39;s neurons) x min...</div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00224">layer.hpp:224</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a62c59c3e7e6b1a514c484c57e6e4fa89"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">lbann::batch_normalization::m_scale_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00148">batch_normalization.hpp:148</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a8f5e339cda98356c68063ea3845a94d2"><div class="ttname"><a href="classlbann_1_1Layer.html#a8f5e339cda98356c68063ea3845a94d2">lbann::Layer::m_neural_network_model</a></div><div class="ttdeci">model * m_neural_network_model</div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00216">layer.hpp:216</a></div></div>
<div class="ttc" id="structlayer__header_html_af1f45c9c74db048ea424114418f22d50"><div class="ttname"><a href="structlayer__header.html#af1f45c9c74db048ea424114418f22d50">layer_header::width</a></div><div class="ttdeci">uint64_t width</div><div class="ttdef"><b>Definition:</b> <a href="persist_8cpp_source.html#l00060">persist.cpp:60</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_abb34bb8031f57a483e2e327a5f229f48"><div class="ttname"><a href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">lbann::Layer::m_neuron_dims</a></div><div class="ttdeci">std::vector&lt; int &gt; m_neuron_dims</div><div class="ttdoc">Neuron tensor dimensions. </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00204">layer.hpp:204</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a0a33289150c01899f4b7ef2980771899"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">lbann::batch_normalization::m_use_global_stats</a></div><div class="ttdeci">bool m_use_global_stats</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00157">batch_normalization.hpp:157</a></div></div>
<div class="ttc" id="classlbann_1_1model_html_adc2be91222e59b976a40f614dbcfb644"><div class="ttname"><a href="classlbann_1_1model.html#adc2be91222e59b976a40f614dbcfb644">lbann::model::get_effective_mini_batch_size</a></div><div class="ttdeci">int get_effective_mini_batch_size() const </div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00129">model.hpp:129</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a9cbe0052b5571d6c011733d0734ffb80"><div class="ttname"><a href="classlbann_1_1Layer.html#a9cbe0052b5571d6c011733d0734ffb80">lbann::Layer::m_error_signal_v</a></div><div class="ttdeci">AbsDistMat * m_error_signal_v</div><div class="ttdoc">View of active columns in error signal matrix. </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00222">layer.hpp:222</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ad99266cafa069f5e07595386ecfe2ad9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">lbann::batch_normalization::m_mean_v</a></div><div class="ttdeci">AbsDistMat * m_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00125">batch_normalization.hpp:125</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a7ffea88a297a2ee162357f27d14b5837"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">lbann::batch_normalization::m_var_v</a></div><div class="ttdeci">AbsDistMat * m_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00127">batch_normalization.hpp:127</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ab82e74f905b7a117d9940f8542451e37"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">lbann::batch_normalization::m_epsilon</a></div><div class="ttdeci">DataType m_epsilon</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00155">batch_normalization.hpp:155</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1d4491ba60843b8f1db86e258d346dbc"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">lbann::batch_normalization::m_var_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_var_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00135">batch_normalization.hpp:135</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_a83e40edd001a0b71c31fbc9a3acb2231_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_a83e40edd001a0b71c31fbc9a3acb2231_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_a83e40edd001a0b71c31fbc9a3acb2231_cgraph" id="classlbann_1_1batch__normalization_a83e40edd001a0b71c31fbc9a3acb2231_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1model.html#adc2be91222e59b976a40f614dbcfb644" title="lbann::model::get_effective\l_mini_batch_size" alt="" coords="232,5,411,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_a83e40edd001a0b71c31fbc9a3acb2231_icgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_a83e40edd001a0b71c31fbc9a3acb2231_icgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_a83e40edd001a0b71c31fbc9a3acb2231_icgraph" id="classlbann_1_1batch__normalization_a83e40edd001a0b71c31fbc9a3acb2231_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#a121ba408814e3c2537b2cf015a35ea4a" title="lbann::batch_normalization\l::bp_compute" alt="" coords="233,5,410,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7d48ad1531825fc9745c77f9ae5f68d6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::bp_compute_gpu </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00640">640</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                        {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="preprocessor">  #ifndef __LIB_CUDNN</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">throw</span> lbann_exception(<span class="stringliteral">&quot;batch_normalization_layer: cuDNN not detected&quot;</span>);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="preprocessor">  #else</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="comment">// Number of GPUs</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num_gpus = this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;get_num_gpus();</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="comment">// Get local matrices</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; mean_gradient_local = <a class="code" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; var_gradient_local = <a class="code" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; scale_gradient_local = <a class="code" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; bias_gradient_local = <a class="code" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="comment">// Setup pinned workspace</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; pinned_workspace_local = m_pinned_workspace-&gt;Matrix();</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> workspace1 = pinned_workspace_local(El::ALL, El::IR(0, num_gpus));</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> workspace2 = pinned_workspace_local(El::ALL, El::IR(num_gpus, 2*num_gpus));</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> workspace3 = pinned_workspace_local(El::ALL, El::IR(2*num_gpus, 3*num_gpus));</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> workspace4 = pinned_workspace_local(El::ALL, El::IR(3*num_gpus, 4*num_gpus));</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="comment">// Matrix parameters</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structlayer__header.html#ad986e4b92e5b455e066fd349725c6bd9">height</a> = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a>-&gt;Height();</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structlayer__header.html#af1f45c9c74db048ea424114418f22d50">width</a> = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a>-&gt;Width();</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> local_width = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a>-&gt;LocalWidth();</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num_channels = this-&gt;<a class="code" href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">m_neuron_dims</a>[0];</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// Compute local gradient contributions</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;num_gpus; ++i) {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      CHECK_CUDA(cudaSetDevice(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;get_gpu(i)));</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> col_start = std::min(i * this-&gt;m_mini_batch_size_per_gpu, local_width);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> col_end = std::min((i+1) * this-&gt;m_mini_batch_size_per_gpu, local_width);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> current_width = col_end - col_start;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      batch_normalization_cuda</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        ::batch_normalization_backprop1&lt;DataType&gt;(<a class="code" href="structlayer__header.html#ad986e4b92e5b455e066fd349725c6bd9">height</a>,</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                                                  current_width,</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                                                  num_channels,</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                                                  this-&gt;m_prev_activations_d[i],</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                                                  this-&gt;m_prev_error_signal_d[i],</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                                                  m_mean_d[i],</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                                                  m_var_d[i],</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                                                  <a class="code" href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">m_epsilon</a>,</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                                                  m_scale_d[i],</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                                                  m_scale_gradient_d[i],</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                                                  m_bias_gradient_d[i],</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                                                  m_mean_gradient_d[i],</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;                                                  m_var_gradient_d[i],</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                                                  this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;get_stream(i));</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    }</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="comment">// Reduce sums and sums of squares across GPUs and nodes</span></div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;gather_from_gpus(workspace1, m_scale_gradient_d, 1);</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;gather_from_gpus(workspace2, m_bias_gradient_d, 1);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;gather_from_gpus(workspace3, m_mean_gradient_d, 1);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;gather_from_gpus(workspace4, m_var_gradient_d, 1);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;synchronize();</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;num_gpus; ++i) {</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">if</span>(i == 0) {</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        El::Copy(workspace1(El::ALL, El::IR(i)), scale_gradient_local);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        El::Copy(workspace2(El::ALL, El::IR(i)), bias_gradient_local);</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        El::Copy(workspace3(El::ALL, El::IR(i)), mean_gradient_local);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;        El::Copy(workspace4(El::ALL, El::IR(i)), var_gradient_local);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        scale_gradient_local += workspace1(El::ALL, El::IR(i));</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        bias_gradient_local += workspace2(El::ALL, El::IR(i));</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        mean_gradient_local += workspace3(El::ALL, El::IR(i));</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        var_gradient_local += workspace4(El::ALL, El::IR(i));</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    scale_gradient_local</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      *= <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(1) / this-&gt;<a class="code" href="classlbann_1_1Layer.html#a8f5e339cda98356c68063ea3845a94d2">m_neural_network_model</a>-&gt;<a class="code" href="classlbann_1_1model.html#adc2be91222e59b976a40f614dbcfb644">get_effective_mini_batch_size</a>();</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    bias_gradient_local</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      *= <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(1) / this-&gt;<a class="code" href="classlbann_1_1Layer.html#a8f5e339cda98356c68063ea3845a94d2">m_neural_network_model</a>-&gt;<a class="code" href="classlbann_1_1model.html#adc2be91222e59b976a40f614dbcfb644">get_effective_mini_batch_size</a>();</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">m_use_global_stats</a>) {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      El::AllReduce(*<a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>,</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                    <a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>-&gt;RedundantComm(),</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                    El::mpi::SUM);</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;broadcast_to_gpus(m_mean_gradient_d, mean_gradient_local);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;broadcast_to_gpus(m_var_gradient_d, var_gradient_local);</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="comment">// Compute error signal</span></div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;num_gpus; ++i) {</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      CHECK_CUDA(cudaSetDevice(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;get_gpu(i)));</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> col_start = std::min(i * this-&gt;m_mini_batch_size_per_gpu, local_width);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> col_end = std::min((i+1) * this-&gt;m_mini_batch_size_per_gpu, local_width);</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> current_width = col_end - col_start;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      batch_normalization_cuda</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        ::batch_normalization_backprop2&lt;DataType&gt;(<a class="code" href="structlayer__header.html#ad986e4b92e5b455e066fd349725c6bd9">height</a>,</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                                                  current_width,</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                                                  <a class="code" href="structlayer__header.html#af1f45c9c74db048ea424114418f22d50">width</a>,</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                                                  num_channels,</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                                                  this-&gt;m_prev_activations_d[i],</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                                                  this-&gt;m_prev_error_signal_d[i],</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                                                  m_mean_d[i],</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                                                  m_var_d[i],</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                                                  <a class="code" href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">m_epsilon</a>,</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                                                  m_scale_d[i],</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                                                  m_mean_gradient_d[i],</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                                                  m_var_gradient_d[i],</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                                                  this-&gt;m_error_signal_d[i],</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                                                  this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;get_stream(i));</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    }</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="preprocessor">  #endif // __LIB_CUDNN</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="preprocessor"></span>  }</div>
<div class="ttc" id="base_8hpp_html_a279b64f47fb2213ad73e59be937afcfa"><div class="ttname"><a href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a></div><div class="ttdeci">float DataType</div><div class="ttdef"><b>Definition:</b> <a href="base_8hpp_source.html#l00040">base.hpp:40</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a2b8166a66c3f67998da26c52a306bf75"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">lbann::batch_normalization::m_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00150">batch_normalization.hpp:150</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1268cb12bd13dcfdcc842b9ff30cc371"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">lbann::batch_normalization::m_parameters_gradient</a></div><div class="ttdeci">AbsDistMat * m_parameters_gradient</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00118">batch_normalization.hpp:118</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9dd4d9c92ea46fd9a4ee1eabda356053"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">lbann::batch_normalization::m_mean_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_mean_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00133">batch_normalization.hpp:133</a></div></div>
<div class="ttc" id="structlayer__header_html_ad986e4b92e5b455e066fd349725c6bd9"><div class="ttname"><a href="structlayer__header.html#ad986e4b92e5b455e066fd349725c6bd9">layer_header::height</a></div><div class="ttdeci">uint64_t height</div><div class="ttdef"><b>Definition:</b> <a href="persist_8cpp_source.html#l00061">persist.cpp:61</a></div></div>
<div class="ttc" id="base_8hpp_html_a483ed30937584c6d3a4d76bff5215a34"><div class="ttname"><a href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a></div><div class="ttdeci">El::Matrix&lt; DataType &gt; Mat</div><div class="ttdef"><b>Definition:</b> <a href="base_8hpp_source.html#l00045">base.hpp:45</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_ab8611c54213e26e902c396a152126b94"><div class="ttname"><a href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">lbann::Layer::m_prev_activations</a></div><div class="ttdeci">AbsDistMat * m_prev_activations</div><div class="ttdoc">Local view or copy of the activations from the &amp;quot;previous&amp;quot; layer ((# previous layer&amp;#39;s neurons) x min...</div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00224">layer.hpp:224</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a62c59c3e7e6b1a514c484c57e6e4fa89"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">lbann::batch_normalization::m_scale_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00148">batch_normalization.hpp:148</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a8f5e339cda98356c68063ea3845a94d2"><div class="ttname"><a href="classlbann_1_1Layer.html#a8f5e339cda98356c68063ea3845a94d2">lbann::Layer::m_neural_network_model</a></div><div class="ttdeci">model * m_neural_network_model</div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00216">layer.hpp:216</a></div></div>
<div class="ttc" id="structlayer__header_html_af1f45c9c74db048ea424114418f22d50"><div class="ttname"><a href="structlayer__header.html#af1f45c9c74db048ea424114418f22d50">layer_header::width</a></div><div class="ttdeci">uint64_t width</div><div class="ttdef"><b>Definition:</b> <a href="persist_8cpp_source.html#l00060">persist.cpp:60</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_abb34bb8031f57a483e2e327a5f229f48"><div class="ttname"><a href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">lbann::Layer::m_neuron_dims</a></div><div class="ttdeci">std::vector&lt; int &gt; m_neuron_dims</div><div class="ttdoc">Neuron tensor dimensions. </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00204">layer.hpp:204</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a0a33289150c01899f4b7ef2980771899"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">lbann::batch_normalization::m_use_global_stats</a></div><div class="ttdeci">bool m_use_global_stats</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00157">batch_normalization.hpp:157</a></div></div>
<div class="ttc" id="classlbann_1_1model_html_adc2be91222e59b976a40f614dbcfb644"><div class="ttname"><a href="classlbann_1_1model.html#adc2be91222e59b976a40f614dbcfb644">lbann::model::get_effective_mini_batch_size</a></div><div class="ttdeci">int get_effective_mini_batch_size() const </div><div class="ttdef"><b>Definition:</b> <a href="model_8hpp_source.html#l00129">model.hpp:129</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a08dbb94239e3b8c96329786c57c72e21"><div class="ttname"><a href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">lbann::Layer::m_cudnn</a></div><div class="ttdeci">cudnn::cudnn_manager * m_cudnn</div><div class="ttdoc">cuDNN manager </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00271">layer.hpp:271</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ab82e74f905b7a117d9940f8542451e37"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">lbann::batch_normalization::m_epsilon</a></div><div class="ttdeci">DataType m_epsilon</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00155">batch_normalization.hpp:155</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1d4491ba60843b8f1db86e258d346dbc"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">lbann::batch_normalization::m_var_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_var_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00135">batch_normalization.hpp:135</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_a7d48ad1531825fc9745c77f9ae5f68d6_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_a7d48ad1531825fc9745c77f9ae5f68d6_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_a7d48ad1531825fc9745c77f9ae5f68d6_cgraph" id="classlbann_1_1batch__normalization_a7d48ad1531825fc9745c77f9ae5f68d6_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1model.html#adc2be91222e59b976a40f614dbcfb644" title="lbann::model::get_effective\l_mini_batch_size" alt="" coords="232,5,411,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_a7d48ad1531825fc9745c77f9ae5f68d6_icgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_a7d48ad1531825fc9745c77f9ae5f68d6_icgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_a7d48ad1531825fc9745c77f9ae5f68d6_icgraph" id="classlbann_1_1batch__normalization_a7d48ad1531825fc9745c77f9ae5f68d6_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#a121ba408814e3c2537b2cf015a35ea4a" title="lbann::batch_normalization\l::bp_compute" alt="" coords="233,5,410,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9b759a4555f36a8b4738a690f0c7b328"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlbann_1_1batch__normalization.html">batch_normalization</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::copy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classlbann_1_1Layer.html#af420f22bbac801c85483ade84588a23f">lbann::Layer</a>.</p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00378">378</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;{ <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="classlbann_1_1batch__normalization.html#a52dbaeac2465af96f28ce98bf7afc5ac">batch_normalization</a>(*<span class="keyword">this</span>); }</div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a52dbaeac2465af96f28ce98bf7afc5ac"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a52dbaeac2465af96f28ce98bf7afc5ac">lbann::batch_normalization::batch_normalization</a></div><div class="ttdeci">batch_normalization(int index, lbann_comm *comm, optimizer *opt, DataType decay=0.9, DataType scale_init=1.0, DataType bias_init=0.0, DataType epsilon=1e-5, cudnn::cudnn_manager *cudnn=NULL, bool use_global_stats=true)</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00203">batch_normalization.hpp:203</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_a9b759a4555f36a8b4738a690f0c7b328_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_a9b759a4555f36a8b4738a690f0c7b328_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_a9b759a4555f36a8b4738a690f0c7b328_cgraph" id="classlbann_1_1batch__normalization_a9b759a4555f36a8b4738a690f0c7b328_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#a52dbaeac2465af96f28ce98bf7afc5ac" title="lbann::batch_normalization\l::batch_normalization" alt="" coords="233,13,410,54"/><area shape="rect" id="node3" href="classlbann_1_1batch__normalization.html#af8a8bef1eaf98000d644911a3f1e4c9b" title="lbann::batch_normalization\l::initialize_distributed\l_matrices" alt="" coords="459,5,637,61"/><area shape="rect" id="node4" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4" title="lbann::lbann_comm::\lget_model_grid" alt="" coords="686,13,829,54"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af900dea1f07987cd56471a441c5f2f71"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::fp_compute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perform the layers work / main function for forward propagation </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1Layer.html#a99a30fcb1b5ab3c47ff5c28a4920967c">lbann::Layer</a>.</p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00506">506</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                    {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#af7881cb5eff5207c15fa835d65462e8f">m_using_gpus</a>) {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <a class="code" href="classlbann_1_1batch__normalization.html#aacff2c47a5455a4c28b9695f4fb37249">fp_compute_gpu</a>();</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <a class="code" href="classlbann_1_1batch__normalization.html#ae4cad47f456752e4ea20add0f6f38819">fp_compute_cpu</a>();</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  }</div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ae4cad47f456752e4ea20add0f6f38819"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ae4cad47f456752e4ea20add0f6f38819">lbann::batch_normalization::fp_compute_cpu</a></div><div class="ttdeci">void fp_compute_cpu()</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00748">batch_normalization.hpp:748</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_af7881cb5eff5207c15fa835d65462e8f"><div class="ttname"><a href="classlbann_1_1Layer.html#af7881cb5eff5207c15fa835d65462e8f">lbann::Layer::m_using_gpus</a></div><div class="ttdeci">bool m_using_gpus</div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00268">layer.hpp:268</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aacff2c47a5455a4c28b9695f4fb37249"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aacff2c47a5455a4c28b9695f4fb37249">lbann::batch_normalization::fp_compute_gpu</a></div><div class="ttdeci">void fp_compute_gpu()</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00522">batch_normalization.hpp:522</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_af900dea1f07987cd56471a441c5f2f71_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_af900dea1f07987cd56471a441c5f2f71_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_af900dea1f07987cd56471a441c5f2f71_cgraph" id="classlbann_1_1batch__normalization_af900dea1f07987cd56471a441c5f2f71_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#aacff2c47a5455a4c28b9695f4fb37249" title="lbann::batch_normalization\l::fp_compute_gpu" alt="" coords="233,5,410,46"/><area shape="rect" id="node4" href="classlbann_1_1batch__normalization.html#ae4cad47f456752e4ea20add0f6f38819" title="lbann::batch_normalization\l::fp_compute_cpu" alt="" coords="233,70,410,111"/><area shape="rect" id="node3" href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344" title="lbann::Layer::get_execution_mode" alt="" coords="459,45,680,72"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae4cad47f456752e4ea20add0f6f38819"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::fp_compute_cpu </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00748">748</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                        {</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="comment">// Local matrices</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; prev_activations_local = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a>-&gt;LockedMatrix();</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; mean_local = <a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; var_local = <a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; running_mean_local = <a class="code" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; running_var_local = <a class="code" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; scale_local = <a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; bias_local = <a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; activations_local = this-&gt;<a class="code" href="classlbann_1_1Layer.html#abc716e53078923a6f8bd17f751ddc5bc">m_activations_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="comment">// Matrix parameters</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structlayer__header.html#af1f45c9c74db048ea424114418f22d50">width</a> = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a>-&gt;Width();</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keyword">const</span> El::Int local_width = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a>-&gt;LocalWidth();</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num_channels = this-&gt;<a class="code" href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">m_neuron_dims</a>[0];</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> channel_size = this-&gt;<a class="code" href="classlbann_1_1Layer.html#a6b5ebc8a7d9329d8a773ed787e7b41d8">m_num_neurons</a> / num_channels;</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="comment">// Compute statistics</span></div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344">get_execution_mode</a>() == <a class="code" href="base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a>) {</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="comment">// Compute sums and sums of squares</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="preprocessor">      #pragma omp parallel for</span></div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="preprocessor"></span>      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> channel = 0; channel &lt; num_channels; ++channel) {</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> sum = 0;</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> sqsum = 0;</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keyword">const</span> El::Int row_start = channel * channel_size;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <span class="keyword">const</span> El::Int row_end = (channel+1) * channel_size;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;        <span class="keywordflow">for</span>(El::Int col = 0; col &lt; local_width; ++col) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;          <span class="keywordflow">for</span>(El::Int row = row_start; row &lt; row_end; ++row) {</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> x = prev_activations_local(row, col);</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            sum += x;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            sqsum += x * x;</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;          }</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        mean_local(channel, 0) = sum;</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        var_local(channel, 0) = sqsum;</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      }</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">m_use_global_stats</a>) {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        El::AllReduce(*<a class="code" href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">m_statistics_v</a>,</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;                      <a class="code" href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">m_statistics_v</a>-&gt;RedundantComm(),</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                      El::mpi::SUM);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="comment">// Compute minibatch statistics and running statistics</span></div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> num_samples = width * channel_size;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="preprocessor">      #pragma omp parallel for</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="preprocessor"></span>      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> channel = 0; channel &lt; num_channels; ++channel) {</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> mean = mean_local(channel, 0) / num_samples;</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> sqmean = var_local(channel, 0) / num_samples;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> var = num_samples / (num_samples - <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(1)) * std::max(sqmean - mean * mean, <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(0));</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        mean_local(channel, 0) = mean;</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        var_local(channel, 0) = var;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&amp; running_mean = running_mean_local(channel, 0);</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&amp; running_var = running_var_local(channel, 0);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        running_mean = <a class="code" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a> * running_mean + (<a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(1) - <a class="code" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a>) * mean;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        running_var = <a class="code" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a> * running_var + (<a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(1) - <a class="code" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a>) * var;</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    }</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="comment">// Iterate through channels</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="preprocessor">    #pragma omp parallel for</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> channel = 0; channel &lt; num_channels; ++channel) {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <span class="comment">// Get channel parameters</span></div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> mean, var;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344">get_execution_mode</a>() == <a class="code" href="base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a>) { </div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;        mean = mean_local(channel, 0);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        var = var_local(channel, 0);</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        mean = running_mean_local(channel, 0);</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        var = running_var_local(channel, 0);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      }</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> inv_stdev = 1 / std::sqrt(var + <a class="code" href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">m_epsilon</a>);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> scale = scale_local(channel, 0);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> bias = bias_local(channel, 0);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="comment">// Apply batch normalization to inputs in channel</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      <span class="keyword">const</span> El::Int row_start = channel * channel_size;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <span class="keyword">const</span> El::Int row_end = (channel+1) * channel_size;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="keywordflow">for</span>(El::Int col = 0; col &lt; local_width; ++col) {</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">for</span>(El::Int row = row_start; row &lt; row_end; ++row) {</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;          <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> x = prev_activations_local(row, col);</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;          <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> xhat = (x - mean) * inv_stdev;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;          <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> y = scale * xhat + bias;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;          activations_local(row, col) = y;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      }</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  }  </div>
<div class="ttc" id="base_8hpp_html_a279b64f47fb2213ad73e59be937afcfa"><div class="ttname"><a href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a></div><div class="ttdeci">float DataType</div><div class="ttdef"><b>Definition:</b> <a href="base_8hpp_source.html#l00040">base.hpp:40</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ade1799e1276f95596f9abec29869c04f"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">lbann::batch_normalization::m_running_mean_v</a></div><div class="ttdeci">AbsDistMat * m_running_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00129">batch_normalization.hpp:129</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_afaa7676d8f6474cd8a482c35ad75e0e2"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">lbann::batch_normalization::m_scale_v</a></div><div class="ttdeci">AbsDistMat * m_scale_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00142">batch_normalization.hpp:142</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa38922fa01fa2cf422599db2e9704273"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">lbann::batch_normalization::m_bias_v</a></div><div class="ttdeci">AbsDistMat * m_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00144">batch_normalization.hpp:144</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a6b5ebc8a7d9329d8a773ed787e7b41d8"><div class="ttname"><a href="classlbann_1_1Layer.html#a6b5ebc8a7d9329d8a773ed787e7b41d8">lbann::Layer::m_num_neurons</a></div><div class="ttdeci">int m_num_neurons</div><div class="ttdoc">Number of neurons. </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00202">layer.hpp:202</a></div></div>
<div class="ttc" id="base_8hpp_html_a483ed30937584c6d3a4d76bff5215a34"><div class="ttname"><a href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a></div><div class="ttdeci">El::Matrix&lt; DataType &gt; Mat</div><div class="ttdef"><b>Definition:</b> <a href="base_8hpp_source.html#l00045">base.hpp:45</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_ab8611c54213e26e902c396a152126b94"><div class="ttname"><a href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">lbann::Layer::m_prev_activations</a></div><div class="ttdeci">AbsDistMat * m_prev_activations</div><div class="ttdoc">Local view or copy of the activations from the &amp;quot;previous&amp;quot; layer ((# previous layer&amp;#39;s neurons) x min...</div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00224">layer.hpp:224</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a7f8a6efd69263d6268ced61c8121f344"><div class="ttname"><a href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344">lbann::Layer::get_execution_mode</a></div><div class="ttdeci">execution_mode get_execution_mode() const </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00138">layer.hpp:138</a></div></div>
<div class="ttc" id="structlayer__header_html_af1f45c9c74db048ea424114418f22d50"><div class="ttname"><a href="structlayer__header.html#af1f45c9c74db048ea424114418f22d50">layer_header::width</a></div><div class="ttdeci">uint64_t width</div><div class="ttdef"><b>Definition:</b> <a href="persist_8cpp_source.html#l00060">persist.cpp:60</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_abb34bb8031f57a483e2e327a5f229f48"><div class="ttname"><a href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">lbann::Layer::m_neuron_dims</a></div><div class="ttdeci">std::vector&lt; int &gt; m_neuron_dims</div><div class="ttdoc">Neuron tensor dimensions. </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00204">layer.hpp:204</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a0a33289150c01899f4b7ef2980771899"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">lbann::batch_normalization::m_use_global_stats</a></div><div class="ttdeci">bool m_use_global_stats</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00157">batch_normalization.hpp:157</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_abc716e53078923a6f8bd17f751ddc5bc"><div class="ttname"><a href="classlbann_1_1Layer.html#abc716e53078923a6f8bd17f751ddc5bc">lbann::Layer::m_activations_v</a></div><div class="ttdeci">AbsDistMat * m_activations_v</div><div class="ttdoc">View of active columns in activations matrix. </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00214">layer.hpp:214</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa2ee72d5efbf47c74796510ee61dbb14"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">lbann::batch_normalization::m_decay</a></div><div class="ttdeci">DataType m_decay</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00121">batch_normalization.hpp:121</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a658bcd94b2a07552f0dad589dcf7e6a9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">lbann::batch_normalization::m_running_var_v</a></div><div class="ttdeci">AbsDistMat * m_running_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00131">batch_normalization.hpp:131</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ad99266cafa069f5e07595386ecfe2ad9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">lbann::batch_normalization::m_mean_v</a></div><div class="ttdeci">AbsDistMat * m_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00125">batch_normalization.hpp:125</a></div></div>
<div class="ttc" id="base_8hpp_html_a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214"><div class="ttname"><a href="base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a2de71c25398f7d7e7e5382972a3e5f7f"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">lbann::batch_normalization::m_statistics_v</a></div><div class="ttdeci">AbsDistMat * m_statistics_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00123">batch_normalization.hpp:123</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a7ffea88a297a2ee162357f27d14b5837"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">lbann::batch_normalization::m_var_v</a></div><div class="ttdeci">AbsDistMat * m_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00127">batch_normalization.hpp:127</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ab82e74f905b7a117d9940f8542451e37"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">lbann::batch_normalization::m_epsilon</a></div><div class="ttdeci">DataType m_epsilon</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00155">batch_normalization.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_ae4cad47f456752e4ea20add0f6f38819_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_ae4cad47f456752e4ea20add0f6f38819_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_ae4cad47f456752e4ea20add0f6f38819_cgraph" id="classlbann_1_1batch__normalization_ae4cad47f456752e4ea20add0f6f38819_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344" title="lbann::Layer::get_execution_mode" alt="" coords="232,12,453,39"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_ae4cad47f456752e4ea20add0f6f38819_icgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_ae4cad47f456752e4ea20add0f6f38819_icgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_ae4cad47f456752e4ea20add0f6f38819_icgraph" id="classlbann_1_1batch__normalization_ae4cad47f456752e4ea20add0f6f38819_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#af900dea1f07987cd56471a441c5f2f71" title="lbann::batch_normalization\l::fp_compute" alt="" coords="233,5,410,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aacff2c47a5455a4c28b9695f4fb37249"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::fp_compute_gpu </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00522">522</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                        {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="preprocessor">  #ifndef __LIB_CUDNN</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">throw</span> lbann_exception(<span class="stringliteral">&quot;batch_normalization_layer: cuDNN not detected&quot;</span>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="preprocessor">  #else</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">// Number of GPUs</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num_gpus = this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;get_num_gpus();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">// Get local matrices</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; mean_local = <a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; var_local = <a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; running_mean_local = <a class="code" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; running_var_local = <a class="code" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a>-&gt;Matrix();</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; scale_local = <a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a>-&gt;LockedMatrix();</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; bias_local = <a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a>-&gt;LockedMatrix();</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="comment">// Setup pinned workspace</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a>&amp; pinned_workspace_local = m_pinned_workspace-&gt;Matrix();</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> workspace1 = pinned_workspace_local(El::ALL, El::IR(0, num_gpus));</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    <a class="code" href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> workspace2 = pinned_workspace_local(El::ALL, El::IR(num_gpus, 2*num_gpus));</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="comment">// Matrix parameters</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structlayer__header.html#ad986e4b92e5b455e066fd349725c6bd9">height</a> = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a>-&gt;Height();</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="structlayer__header.html#af1f45c9c74db048ea424114418f22d50">width</a> = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a>-&gt;Width();</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> local_width = this-&gt;<a class="code" href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">m_prev_activations</a>-&gt;LocalWidth();</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> num_channels = this-&gt;<a class="code" href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">m_neuron_dims</a>[0];</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> channel_size = this-&gt;<a class="code" href="classlbann_1_1Layer.html#a6b5ebc8a7d9329d8a773ed787e7b41d8">m_num_neurons</a> / num_channels;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">// Compute statistics</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344">get_execution_mode</a>() == <a class="code" href="base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a>) {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="comment">// Compute sums and sums of squares on each GPU</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;num_gpus; ++i) {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        CHECK_CUDA(cudaSetDevice(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;get_gpu(i)));</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> col_start = std::min(i * this-&gt;m_mini_batch_size_per_gpu, local_width);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> col_end = std::min((i+1) * this-&gt;m_mini_batch_size_per_gpu, local_width);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> current_width = col_end - col_start;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        batch_normalization_cuda</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;          ::channel_sums_and_sqsums&lt;DataType&gt;(<a class="code" href="structlayer__header.html#ad986e4b92e5b455e066fd349725c6bd9">height</a>,</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                                              current_width,</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                                              num_channels,</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                                              this-&gt;m_prev_activations_d[i],</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                                              m_mean_d[i],</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                                              m_var_d[i],</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                                              this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;get_stream(i));</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      }</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      </div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="comment">// Reduce sums and sums of squares across GPUs and nodes</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;gather_from_gpus(workspace1, m_mean_d, 1);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;gather_from_gpus(workspace2, m_var_d, 1);</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;synchronize();</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;num_gpus; ++i) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="keywordflow">if</span>(i == 0) {</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;          El::Copy(workspace1(El::ALL, El::IR(0)), mean_local);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;          El::Copy(workspace2(El::ALL, El::IR(0)), var_local);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;          mean_local += workspace1(El::ALL, El::IR(i));</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;          var_local += workspace2(El::ALL, El::IR(i));</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">m_use_global_stats</a>) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        El::AllReduce(*<a class="code" href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">m_statistics_v</a>,</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                      <a class="code" href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">m_statistics_v</a>-&gt;RedundantComm(),</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                      El::mpi::SUM);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="comment">// Compute minibatch statistics and running statistics</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> num_samples = width * channel_size;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="preprocessor">      #pragma omp parallel for</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="preprocessor"></span>      <span class="keywordflow">for</span>(<span class="keywordtype">int</span> channel = 0; channel &lt; num_channels; ++channel) {</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> mean = mean_local(channel, 0) / num_samples;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> sqmean = var_local(channel, 0) / num_samples;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="keyword">const</span> <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> var = num_samples / (num_samples - <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(1)) * std::max(sqmean - mean * mean, <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(0));</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        mean_local(channel, 0) = mean;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        var_local(channel, 0) = var;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&amp; running_mean = running_mean_local(channel, 0);</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>&amp; running_var = running_var_local(channel, 0);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        running_mean = <a class="code" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a> * running_mean + (<a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(1) - <a class="code" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a>) * mean;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;        running_var = <a class="code" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a> * running_var + (<a class="code" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a>(1) - <a class="code" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a>) * var;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment">// Transfer parameters from CPU to GPUs</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;broadcast_to_gpus(m_scale_d, scale_local);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;broadcast_to_gpus(m_bias_d, bias_local);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">if</span>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344">get_execution_mode</a>() == <a class="code" href="base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a>) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;broadcast_to_gpus(m_mean_d, mean_local);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;broadcast_to_gpus(m_var_d, var_local);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;broadcast_to_gpus(m_mean_d, running_mean_local);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;broadcast_to_gpus(m_var_d, running_var_local);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="comment">// Perform batch normalization with each GPU</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;num_gpus; ++i) {</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      CHECK_CUDA(cudaSetDevice(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;get_gpu(i)));</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> col_start = std::min(i * this-&gt;m_mini_batch_size_per_gpu, local_width);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> col_end = std::min((i+1) * this-&gt;m_mini_batch_size_per_gpu, local_width);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> current_width = col_end - col_start;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      batch_normalization_cuda</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        ::batch_normalization&lt;DataType&gt;(<a class="code" href="structlayer__header.html#ad986e4b92e5b455e066fd349725c6bd9">height</a>,</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                                        current_width,</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                                        num_channels,</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                                        this-&gt;m_prev_activations_d[i],</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                                        m_mean_d[i],</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                                        m_var_d[i],</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                                        <a class="code" href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">m_epsilon</a>,</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                                        m_scale_d[i],</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                                        m_bias_d[i],</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                        this-&gt;m_activations_d[i],</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                                        this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;get_stream(i));</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    }</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="preprocessor">  #endif // __LIB_CUDNN</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="preprocessor"></span>  }</div>
<div class="ttc" id="base_8hpp_html_a279b64f47fb2213ad73e59be937afcfa"><div class="ttname"><a href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a></div><div class="ttdeci">float DataType</div><div class="ttdef"><b>Definition:</b> <a href="base_8hpp_source.html#l00040">base.hpp:40</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ade1799e1276f95596f9abec29869c04f"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">lbann::batch_normalization::m_running_mean_v</a></div><div class="ttdeci">AbsDistMat * m_running_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00129">batch_normalization.hpp:129</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_afaa7676d8f6474cd8a482c35ad75e0e2"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">lbann::batch_normalization::m_scale_v</a></div><div class="ttdeci">AbsDistMat * m_scale_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00142">batch_normalization.hpp:142</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa38922fa01fa2cf422599db2e9704273"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">lbann::batch_normalization::m_bias_v</a></div><div class="ttdeci">AbsDistMat * m_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00144">batch_normalization.hpp:144</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a6b5ebc8a7d9329d8a773ed787e7b41d8"><div class="ttname"><a href="classlbann_1_1Layer.html#a6b5ebc8a7d9329d8a773ed787e7b41d8">lbann::Layer::m_num_neurons</a></div><div class="ttdeci">int m_num_neurons</div><div class="ttdoc">Number of neurons. </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00202">layer.hpp:202</a></div></div>
<div class="ttc" id="structlayer__header_html_ad986e4b92e5b455e066fd349725c6bd9"><div class="ttname"><a href="structlayer__header.html#ad986e4b92e5b455e066fd349725c6bd9">layer_header::height</a></div><div class="ttdeci">uint64_t height</div><div class="ttdef"><b>Definition:</b> <a href="persist_8cpp_source.html#l00061">persist.cpp:61</a></div></div>
<div class="ttc" id="base_8hpp_html_a483ed30937584c6d3a4d76bff5215a34"><div class="ttname"><a href="base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a></div><div class="ttdeci">El::Matrix&lt; DataType &gt; Mat</div><div class="ttdef"><b>Definition:</b> <a href="base_8hpp_source.html#l00045">base.hpp:45</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_ab8611c54213e26e902c396a152126b94"><div class="ttname"><a href="classlbann_1_1Layer.html#ab8611c54213e26e902c396a152126b94">lbann::Layer::m_prev_activations</a></div><div class="ttdeci">AbsDistMat * m_prev_activations</div><div class="ttdoc">Local view or copy of the activations from the &amp;quot;previous&amp;quot; layer ((# previous layer&amp;#39;s neurons) x min...</div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00224">layer.hpp:224</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a7f8a6efd69263d6268ced61c8121f344"><div class="ttname"><a href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344">lbann::Layer::get_execution_mode</a></div><div class="ttdeci">execution_mode get_execution_mode() const </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00138">layer.hpp:138</a></div></div>
<div class="ttc" id="structlayer__header_html_af1f45c9c74db048ea424114418f22d50"><div class="ttname"><a href="structlayer__header.html#af1f45c9c74db048ea424114418f22d50">layer_header::width</a></div><div class="ttdeci">uint64_t width</div><div class="ttdef"><b>Definition:</b> <a href="persist_8cpp_source.html#l00060">persist.cpp:60</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_abb34bb8031f57a483e2e327a5f229f48"><div class="ttname"><a href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">lbann::Layer::m_neuron_dims</a></div><div class="ttdeci">std::vector&lt; int &gt; m_neuron_dims</div><div class="ttdoc">Neuron tensor dimensions. </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00204">layer.hpp:204</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a0a33289150c01899f4b7ef2980771899"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">lbann::batch_normalization::m_use_global_stats</a></div><div class="ttdeci">bool m_use_global_stats</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00157">batch_normalization.hpp:157</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa2ee72d5efbf47c74796510ee61dbb14"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">lbann::batch_normalization::m_decay</a></div><div class="ttdeci">DataType m_decay</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00121">batch_normalization.hpp:121</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a658bcd94b2a07552f0dad589dcf7e6a9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">lbann::batch_normalization::m_running_var_v</a></div><div class="ttdeci">AbsDistMat * m_running_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00131">batch_normalization.hpp:131</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ad99266cafa069f5e07595386ecfe2ad9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">lbann::batch_normalization::m_mean_v</a></div><div class="ttdeci">AbsDistMat * m_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00125">batch_normalization.hpp:125</a></div></div>
<div class="ttc" id="base_8hpp_html_a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214"><div class="ttname"><a href="base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a2de71c25398f7d7e7e5382972a3e5f7f"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">lbann::batch_normalization::m_statistics_v</a></div><div class="ttdeci">AbsDistMat * m_statistics_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00123">batch_normalization.hpp:123</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a7ffea88a297a2ee162357f27d14b5837"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">lbann::batch_normalization::m_var_v</a></div><div class="ttdeci">AbsDistMat * m_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00127">batch_normalization.hpp:127</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a08dbb94239e3b8c96329786c57c72e21"><div class="ttname"><a href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">lbann::Layer::m_cudnn</a></div><div class="ttdeci">cudnn::cudnn_manager * m_cudnn</div><div class="ttdoc">cuDNN manager </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00271">layer.hpp:271</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ab82e74f905b7a117d9940f8542451e37"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">lbann::batch_normalization::m_epsilon</a></div><div class="ttdeci">DataType m_epsilon</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00155">batch_normalization.hpp:155</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_aacff2c47a5455a4c28b9695f4fb37249_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_aacff2c47a5455a4c28b9695f4fb37249_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_aacff2c47a5455a4c28b9695f4fb37249_cgraph" id="classlbann_1_1batch__normalization_aacff2c47a5455a4c28b9695f4fb37249_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344" title="lbann::Layer::get_execution_mode" alt="" coords="232,12,453,39"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_aacff2c47a5455a4c28b9695f4fb37249_icgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_aacff2c47a5455a4c28b9695f4fb37249_icgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_aacff2c47a5455a4c28b9695f4fb37249_icgraph" id="classlbann_1_1batch__normalization_aacff2c47a5455a4c28b9695f4fb37249_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#af900dea1f07987cd56471a441c5f2f71" title="lbann::batch_normalization\l::fp_compute" alt="" coords="233,5,410,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aed654d7472aef17d707f8ce5ccb7868d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="base_8hpp.html#a786677cbfb3f5677b4d84f3056eb08db">data_layout</a> <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::get_data_layout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the data layout of the given layer &ndash; Every concrete layer has to overrride this with its T_layout template parameter </p>

<p>Implements <a class="el" href="classlbann_1_1Layer.html#a5dfb66e81fc085997402a5e2241316bd">lbann::Layer</a>.</p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00404">404</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;{ <span class="keywordflow">return</span> T_layout; }</div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_aed654d7472aef17d707f8ce5ccb7868d_icgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_aed654d7472aef17d707f8ce5ccb7868d_icgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_aed654d7472aef17d707f8ce5ccb7868d_icgraph" id="classlbann_1_1batch__normalization_aed654d7472aef17d707f8ce5ccb7868d_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#a6f2af2677426a80f25cb00ac14d42997" title="lbann::batch_normalization\l::get_description" alt="" coords="233,5,410,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6f2af2677426a80f25cb00ac14d42997"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::get_description </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns description of ctor params </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1Layer.html#a3d691259252c4e41457434bf804ff900">lbann::Layer</a>.</p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00327">327</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                                    {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keywordflow">return</span> std::string {} +</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;     std::to_string(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a09c7d2b97bd211099528f5b3c33c31e3">m_index</a>) + <span class="stringliteral">&quot; batch_normalization; decay: &quot;</span> </div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;     + std::to_string(this-&gt;<a class="code" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a>) + <span class="stringliteral">&quot; scale_init: &quot;</span> </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;     + std::to_string(this-&gt;<a class="code" href="classlbann_1_1batch__normalization.html#a06648c33b0b48859e7f46697a9b9f3f7">m_scale_init</a>)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;     + <span class="stringliteral">&quot; bias: &quot;</span> + std::to_string(this-&gt;<a class="code" href="classlbann_1_1batch__normalization.html#a9d6c3edc4bbbfd3a64b8ac7b385f8ce5">m_bias_init</a>) + <span class="stringliteral">&quot; epsilon: &quot;</span> </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;     + std::to_string(this-&gt;<a class="code" href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">m_epsilon</a>)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;     + <span class="stringliteral">&quot; dataLayout: &quot;</span> + <a class="code" href="classlbann_1_1Layer.html#a2f302cabbc39769b1a029dfe2af0825c">get_data_layout_string</a>(<a class="code" href="classlbann_1_1batch__normalization.html#aed654d7472aef17d707f8ce5ccb7868d">get_data_layout</a>());</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  }</div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa2ee72d5efbf47c74796510ee61dbb14"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">lbann::batch_normalization::m_decay</a></div><div class="ttdeci">DataType m_decay</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00121">batch_normalization.hpp:121</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9d6c3edc4bbbfd3a64b8ac7b385f8ce5"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9d6c3edc4bbbfd3a64b8ac7b385f8ce5">lbann::batch_normalization::m_bias_init</a></div><div class="ttdeci">DataType m_bias_init</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00140">batch_normalization.hpp:140</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a09c7d2b97bd211099528f5b3c33c31e3"><div class="ttname"><a href="classlbann_1_1Layer.html#a09c7d2b97bd211099528f5b3c33c31e3">lbann::Layer::m_index</a></div><div class="ttdeci">int m_index</div><div class="ttdoc">Layer index (start with 0) </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00198">layer.hpp:198</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aed654d7472aef17d707f8ce5ccb7868d"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aed654d7472aef17d707f8ce5ccb7868d">lbann::batch_normalization::get_data_layout</a></div><div class="ttdeci">virtual data_layout get_data_layout() const </div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00404">batch_normalization.hpp:404</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a06648c33b0b48859e7f46697a9b9f3f7"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a06648c33b0b48859e7f46697a9b9f3f7">lbann::batch_normalization::m_scale_init</a></div><div class="ttdeci">DataType m_scale_init</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00138">batch_normalization.hpp:138</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ab82e74f905b7a117d9940f8542451e37"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">lbann::batch_normalization::m_epsilon</a></div><div class="ttdeci">DataType m_epsilon</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00155">batch_normalization.hpp:155</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a2f302cabbc39769b1a029dfe2af0825c"><div class="ttname"><a href="classlbann_1_1Layer.html#a2f302cabbc39769b1a029dfe2af0825c">lbann::Layer::get_data_layout_string</a></div><div class="ttdeci">std::string get_data_layout_string(data_layout d) const </div><div class="ttdef"><b>Definition:</b> <a href="layer_8cpp_source.html#l00672">layer.cpp:672</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_a6f2af2677426a80f25cb00ac14d42997_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_a6f2af2677426a80f25cb00ac14d42997_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_a6f2af2677426a80f25cb00ac14d42997_cgraph" id="classlbann_1_1batch__normalization_a6f2af2677426a80f25cb00ac14d42997_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1Layer.html#a2f302cabbc39769b1a029dfe2af0825c" title="lbann::Layer::get_data\l_layout_string" alt="" coords="246,5,397,46"/><area shape="rect" id="node3" href="classlbann_1_1batch__normalization.html#aed654d7472aef17d707f8ce5ccb7868d" title="lbann::batch_normalization\l::get_data_layout" alt="" coords="233,70,410,111"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7dce280ee5446209bbc32357870aabb6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::get_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return this layer's name </p>

<p>Implements <a class="el" href="classlbann_1_1Layer.html#abb61e5c9919d84793378beb17bc4d287">lbann::Layer</a>.</p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00380">380</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;batch normalization&quot;</span>; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af8a8bef1eaf98000d644911a3f1e4c9b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::initialize_distributed_matrices </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00382">382</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                         {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    regularizer_layer::initialize_distributed_matrices&lt;T_layout&gt;();</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">m_statistics_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">m_scale_bias_gradient_v</a> = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="preprocessor">  #ifdef __LIB_CUDNN</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="preprocessor"></span>    m_pinned_workspace = <span class="keyword">new</span> <a class="code" href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a>(this-&gt;<a class="code" href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">m_comm</a>-&gt;<a class="code" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">get_model_grid</a>());</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="preprocessor">  #endif // #ifdef __LIB_CUDNN</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="preprocessor"></span>  }</div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ade1799e1276f95596f9abec29869c04f"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">lbann::batch_normalization::m_running_mean_v</a></div><div class="ttdeci">AbsDistMat * m_running_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00129">batch_normalization.hpp:129</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_afaa7676d8f6474cd8a482c35ad75e0e2"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">lbann::batch_normalization::m_scale_v</a></div><div class="ttdeci">AbsDistMat * m_scale_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00142">batch_normalization.hpp:142</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a2b8166a66c3f67998da26c52a306bf75"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">lbann::batch_normalization::m_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00150">batch_normalization.hpp:150</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1268cb12bd13dcfdcc842b9ff30cc371"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">lbann::batch_normalization::m_parameters_gradient</a></div><div class="ttdeci">AbsDistMat * m_parameters_gradient</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00118">batch_normalization.hpp:118</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa38922fa01fa2cf422599db2e9704273"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">lbann::batch_normalization::m_bias_v</a></div><div class="ttdeci">AbsDistMat * m_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00144">batch_normalization.hpp:144</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9dd4d9c92ea46fd9a4ee1eabda356053"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">lbann::batch_normalization::m_mean_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_mean_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00133">batch_normalization.hpp:133</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_abbff433a622a1182b1a6329fcc34982d"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">lbann::batch_normalization::m_parameters</a></div><div class="ttdeci">AbsDistMat * m_parameters</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00116">batch_normalization.hpp:116</a></div></div>
<div class="ttc" id="base_8hpp_html_ac1f107dfdc1d078904b4b666af5b6b86"><div class="ttname"><a href="base_8hpp.html#ac1f107dfdc1d078904b4b666af5b6b86">StarMat</a></div><div class="ttdeci">El::DistMatrix&lt; DataType, El::STAR, El::STAR &gt; StarMat</div><div class="ttdef"><b>Definition:</b> <a href="base_8hpp_source.html#l00049">base.hpp:49</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ae19e389d9af998d59ae205d69919f8b6"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">lbann::batch_normalization::m_scale_bias_v</a></div><div class="ttdeci">AbsDistMat * m_scale_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00146">batch_normalization.hpp:146</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a62c59c3e7e6b1a514c484c57e6e4fa89"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">lbann::batch_normalization::m_scale_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00148">batch_normalization.hpp:148</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ac8685632d83933bd06d1dab311216648"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">lbann::batch_normalization::m_scale_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00152">batch_normalization.hpp:152</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a658bcd94b2a07552f0dad589dcf7e6a9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">lbann::batch_normalization::m_running_var_v</a></div><div class="ttdeci">AbsDistMat * m_running_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00131">batch_normalization.hpp:131</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ad99266cafa069f5e07595386ecfe2ad9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">lbann::batch_normalization::m_mean_v</a></div><div class="ttdeci">AbsDistMat * m_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00125">batch_normalization.hpp:125</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a2de71c25398f7d7e7e5382972a3e5f7f"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">lbann::batch_normalization::m_statistics_v</a></div><div class="ttdeci">AbsDistMat * m_statistics_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00123">batch_normalization.hpp:123</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a7ffea88a297a2ee162357f27d14b5837"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">lbann::batch_normalization::m_var_v</a></div><div class="ttdeci">AbsDistMat * m_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00127">batch_normalization.hpp:127</a></div></div>
<div class="ttc" id="classlbann_1_1lbann__comm_html_a483bf8a72d44a0e83da45f3d47bd20d4"><div class="ttname"><a href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4">lbann::lbann_comm::get_model_grid</a></div><div class="ttdeci">Grid &amp; get_model_grid()</div><div class="ttdef"><b>Definition:</b> <a href="comm_8hpp_source.html#l00104">comm.hpp:104</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a5de05c52f22e0bbd7c703bec3ad4dbf2"><div class="ttname"><a href="classlbann_1_1Layer.html#a5de05c52f22e0bbd7c703bec3ad4dbf2">lbann::Layer::m_comm</a></div><div class="ttdeci">lbann_comm * m_comm</div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00200">layer.hpp:200</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1d4491ba60843b8f1db86e258d346dbc"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">lbann::batch_normalization::m_var_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_var_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00135">batch_normalization.hpp:135</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_af8a8bef1eaf98000d644911a3f1e4c9b_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_af8a8bef1eaf98000d644911a3f1e4c9b_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_af8a8bef1eaf98000d644911a3f1e4c9b_cgraph" id="classlbann_1_1batch__normalization_af8a8bef1eaf98000d644911a3f1e4c9b_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4" title="lbann::lbann_comm::\lget_model_grid" alt="" coords="233,13,375,54"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_af8a8bef1eaf98000d644911a3f1e4c9b_icgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_af8a8bef1eaf98000d644911a3f1e4c9b_icgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_af8a8bef1eaf98000d644911a3f1e4c9b_icgraph" id="classlbann_1_1batch__normalization_af8a8bef1eaf98000d644911a3f1e4c9b_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#a52dbaeac2465af96f28ce98bf7afc5ac" title="lbann::batch_normalization\l::batch_normalization" alt="" coords="233,13,410,54"/><area shape="rect" id="node3" href="classlbann_1_1batch__normalization.html#a9b759a4555f36a8b4738a690f0c7b328" title="lbann::batch_normalization\l::copy" alt="" coords="459,13,637,54"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aeb3c03a8dd166a64a77a26ee06ba81cd"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlbann_1_1batch__normalization.html">batch_normalization</a>&amp; <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlbann_1_1batch__normalization.html">batch_normalization</a>&lt; T_layout &gt; &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00273">273</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                                                                   {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="classlbann_1_1learning__regularizer.html#a27e4a3d82399359415a52cf7d4f6c7e7">learning_regularizer::operator=</a>(other);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">// Deallocate matrices</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>)          <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>) <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a>)              <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a>)               <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a>)      <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a>)       <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a>)     <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a>)      <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a>)             <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a>)              <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a>)        <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a>)    <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a>;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a>)     <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">m_scale_bias_gradient_v</a>) <span class="keyword">delete</span> <a class="code" href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">m_scale_bias_gradient_v</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// Copy POD members</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">m_decay</a> = other.m_decay;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a06648c33b0b48859e7f46697a9b9f3f7">m_scale_init</a> = other.m_scale_init;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a9d6c3edc4bbbfd3a64b8ac7b385f8ce5">m_bias_init</a> = other.m_bias_init;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">m_epsilon</a> = other.m_epsilon;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">m_use_global_stats</a> = other.m_use_global_stats;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">// Copy matrices</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a> = other.m_parameters-&gt;Copy();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a> = other.m_parameters_gradient-&gt;Copy();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a> = other.m_mean_v-&gt;Copy();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a> = other.m_var_v-&gt;Copy();</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a> = other.m_running_mean_v-&gt;Copy();</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a> = other.m_running_var_v-&gt;Copy();</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a> = other.m_mean_gradient_v-&gt;Copy();</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a> = other.m_var_gradient_v-&gt;Copy();</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a> = other.m_scale_v-&gt;Copy();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a> = other.m_bias_v-&gt;Copy();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a> = other.m_scale_bias_v-&gt;Copy();</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a> = other.m_scale_gradient_v-&gt;Copy();</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a> = other.m_bias_gradient_v-&gt;Copy();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">m_scale_bias_gradient_v</a> = other.m_scale_bias_gradient_v-&gt;Copy();</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// Setup matrix view</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a64da84b86a304065627ddb7a7482f81a">setup_views</a>();</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="comment">// Update optimizer.</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1learning__regularizer.html#a09a2a4285c8a6964f35e75ddf681d1d0">m_optimizer</a>-&gt;<a class="code" href="classlbann_1_1optimizer.html#a34a0dff15ff43cf9c76d0e1a4899d4cb">set_parameters</a>(<a class="code" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a>);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">// Return copy</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ade1799e1276f95596f9abec29869c04f"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">lbann::batch_normalization::m_running_mean_v</a></div><div class="ttdeci">AbsDistMat * m_running_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00129">batch_normalization.hpp:129</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_afaa7676d8f6474cd8a482c35ad75e0e2"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">lbann::batch_normalization::m_scale_v</a></div><div class="ttdeci">AbsDistMat * m_scale_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00142">batch_normalization.hpp:142</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a2b8166a66c3f67998da26c52a306bf75"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">lbann::batch_normalization::m_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00150">batch_normalization.hpp:150</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1268cb12bd13dcfdcc842b9ff30cc371"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">lbann::batch_normalization::m_parameters_gradient</a></div><div class="ttdeci">AbsDistMat * m_parameters_gradient</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00118">batch_normalization.hpp:118</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa38922fa01fa2cf422599db2e9704273"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">lbann::batch_normalization::m_bias_v</a></div><div class="ttdeci">AbsDistMat * m_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00144">batch_normalization.hpp:144</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9dd4d9c92ea46fd9a4ee1eabda356053"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">lbann::batch_normalization::m_mean_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_mean_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00133">batch_normalization.hpp:133</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_abbff433a622a1182b1a6329fcc34982d"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">lbann::batch_normalization::m_parameters</a></div><div class="ttdeci">AbsDistMat * m_parameters</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00116">batch_normalization.hpp:116</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ae19e389d9af998d59ae205d69919f8b6"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">lbann::batch_normalization::m_scale_bias_v</a></div><div class="ttdeci">AbsDistMat * m_scale_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00146">batch_normalization.hpp:146</a></div></div>
<div class="ttc" id="classlbann_1_1learning__regularizer_html_a27e4a3d82399359415a52cf7d4f6c7e7"><div class="ttname"><a href="classlbann_1_1learning__regularizer.html#a27e4a3d82399359415a52cf7d4f6c7e7">lbann::learning_regularizer::operator=</a></div><div class="ttdeci">learning_regularizer &amp; operator=(const learning_regularizer &amp;other)</div><div class="ttdef"><b>Definition:</b> <a href="learning__regularizer_8hpp_source.html#l00050">learning_regularizer.hpp:50</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a62c59c3e7e6b1a514c484c57e6e4fa89"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">lbann::batch_normalization::m_scale_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00148">batch_normalization.hpp:148</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a0a33289150c01899f4b7ef2980771899"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a0a33289150c01899f4b7ef2980771899">lbann::batch_normalization::m_use_global_stats</a></div><div class="ttdeci">bool m_use_global_stats</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00157">batch_normalization.hpp:157</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa2ee72d5efbf47c74796510ee61dbb14"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa2ee72d5efbf47c74796510ee61dbb14">lbann::batch_normalization::m_decay</a></div><div class="ttdeci">DataType m_decay</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00121">batch_normalization.hpp:121</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ac8685632d83933bd06d1dab311216648"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">lbann::batch_normalization::m_scale_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00152">batch_normalization.hpp:152</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a658bcd94b2a07552f0dad589dcf7e6a9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">lbann::batch_normalization::m_running_var_v</a></div><div class="ttdeci">AbsDistMat * m_running_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00131">batch_normalization.hpp:131</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ad99266cafa069f5e07595386ecfe2ad9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">lbann::batch_normalization::m_mean_v</a></div><div class="ttdeci">AbsDistMat * m_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00125">batch_normalization.hpp:125</a></div></div>
<div class="ttc" id="classlbann_1_1optimizer_html_a34a0dff15ff43cf9c76d0e1a4899d4cb"><div class="ttname"><a href="classlbann_1_1optimizer.html#a34a0dff15ff43cf9c76d0e1a4899d4cb">lbann::optimizer::set_parameters</a></div><div class="ttdeci">void set_parameters(AbsDistMat *parameters)</div><div class="ttdef"><b>Definition:</b> <a href="optimizer_8hpp_source.html#l00097">optimizer.hpp:97</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9d6c3edc4bbbfd3a64b8ac7b385f8ce5"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9d6c3edc4bbbfd3a64b8ac7b385f8ce5">lbann::batch_normalization::m_bias_init</a></div><div class="ttdeci">DataType m_bias_init</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00140">batch_normalization.hpp:140</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a7ffea88a297a2ee162357f27d14b5837"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">lbann::batch_normalization::m_var_v</a></div><div class="ttdeci">AbsDistMat * m_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00127">batch_normalization.hpp:127</a></div></div>
<div class="ttc" id="classlbann_1_1learning__regularizer_html_a09a2a4285c8a6964f35e75ddf681d1d0"><div class="ttname"><a href="classlbann_1_1learning__regularizer.html#a09a2a4285c8a6964f35e75ddf681d1d0">lbann::learning_regularizer::m_optimizer</a></div><div class="ttdeci">optimizer * m_optimizer</div><div class="ttdef"><b>Definition:</b> <a href="learning__regularizer_8hpp_source.html#l00042">learning_regularizer.hpp:42</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a06648c33b0b48859e7f46697a9b9f3f7"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a06648c33b0b48859e7f46697a9b9f3f7">lbann::batch_normalization::m_scale_init</a></div><div class="ttdeci">DataType m_scale_init</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00138">batch_normalization.hpp:138</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ab82e74f905b7a117d9940f8542451e37"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ab82e74f905b7a117d9940f8542451e37">lbann::batch_normalization::m_epsilon</a></div><div class="ttdeci">DataType m_epsilon</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00155">batch_normalization.hpp:155</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1d4491ba60843b8f1db86e258d346dbc"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">lbann::batch_normalization::m_var_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_var_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00135">batch_normalization.hpp:135</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a64da84b86a304065627ddb7a7482f81a"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a64da84b86a304065627ddb7a7482f81a">lbann::batch_normalization::setup_views</a></div><div class="ttdeci">void setup_views()</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00431">batch_normalization.hpp:431</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_aeb3c03a8dd166a64a77a26ee06ba81cd_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_aeb3c03a8dd166a64a77a26ee06ba81cd_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_aeb3c03a8dd166a64a77a26ee06ba81cd_cgraph" id="classlbann_1_1batch__normalization_aeb3c03a8dd166a64a77a26ee06ba81cd_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1learning__regularizer.html#a27e4a3d82399359415a52cf7d4f6c7e7" title="lbann::learning_regularizer\l::operator=" alt="" coords="235,59,408,101"/><area shape="rect" id="node5" href="classlbann_1_1batch__normalization.html#a64da84b86a304065627ddb7a7482f81a" title="lbann::batch_normalization\l::setup_views" alt="" coords="233,125,410,166"/><area shape="rect" id="node7" href="classlbann_1_1optimizer.html#a34a0dff15ff43cf9c76d0e1a4899d4cb" title="lbann::optimizer::set\l_parameters" alt="" coords="251,190,391,231"/><area shape="rect" id="node3" href="classlbann_1_1regularizer__layer.html#a1e199a411e4fd1e53ebf829b25b4610e" title="lbann::regularizer\l_layer::operator=" alt="" coords="474,5,595,46"/><area shape="rect" id="node4" href="classlbann_1_1optimizer.html#adf19a1d19d832ebfe70072cc202cdf39" title="lbann::optimizer::copy" alt="" coords="459,71,610,97"/><area shape="rect" id="node6" href="classlbann_1_1Layer.html#a705cdeb600e57a076a24f6be1c31f5a5" title="lbann::Layer::setup\l_views" alt="" coords="468,125,601,166"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab515e25ae0e7e4e3349d82d0ad1d9b88"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::setup_data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called by <a class="el" href="classlbann_1_1Layer.html#af455f02e7d3111a3610bc3fb705f3292">setup()</a>, each layer should override to call its parent and set up the layer's data (e.g. weights). This base method sets up the activations and error signal matrices. This is always called after setup_dims. </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1Layer.html#a50a89f8a68762c677d48efe384676e81">lbann::Layer</a>.</p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00406">406</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                    {</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="classlbann_1_1Layer.html#a50a89f8a68762c677d48efe384676e81">regularizer_layer::setup_data</a>();</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">// Allocate memory</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>-&gt;Resize(this-&gt;<a class="code" href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">m_neuron_dims</a>[0], 6);</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>-&gt;Resize(this-&gt;<a class="code" href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">m_neuron_dims</a>[0], 4);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="comment">// Initialize statistics</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>, El::ALL, El::IR(2));</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>, El::ALL, El::IR(3));</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    El::Zero(*<a class="code" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a>);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    El::Zero(*<a class="code" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a>);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="comment">// Initialize scaling and bias terms</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>, El::ALL, El::IR(4));</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>, El::ALL, El::IR(5));</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>, El::ALL, El::IR(4, 6));</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    El::Fill(*<a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a>, <a class="code" href="classlbann_1_1batch__normalization.html#a06648c33b0b48859e7f46697a9b9f3f7">m_scale_init</a>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    El::Fill(*<a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a>, <a class="code" href="classlbann_1_1batch__normalization.html#a9d6c3edc4bbbfd3a64b8ac7b385f8ce5">m_bias_init</a>);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="comment">// Initialize optimizer; since optimizers are element-wise, we use one</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="comment">// optimizer for both the scale and bias parameters.</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1learning__regularizer.html#a09a2a4285c8a6964f35e75ddf681d1d0">m_optimizer</a>-&gt;<a class="code" href="classlbann_1_1optimizer.html#a6eb6169ed46ad602339c7b0bc2633c37">setup</a>(<a class="code" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a>);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  }</div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ade1799e1276f95596f9abec29869c04f"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">lbann::batch_normalization::m_running_mean_v</a></div><div class="ttdeci">AbsDistMat * m_running_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00129">batch_normalization.hpp:129</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_afaa7676d8f6474cd8a482c35ad75e0e2"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">lbann::batch_normalization::m_scale_v</a></div><div class="ttdeci">AbsDistMat * m_scale_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00142">batch_normalization.hpp:142</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1268cb12bd13dcfdcc842b9ff30cc371"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">lbann::batch_normalization::m_parameters_gradient</a></div><div class="ttdeci">AbsDistMat * m_parameters_gradient</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00118">batch_normalization.hpp:118</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa38922fa01fa2cf422599db2e9704273"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">lbann::batch_normalization::m_bias_v</a></div><div class="ttdeci">AbsDistMat * m_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00144">batch_normalization.hpp:144</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_abbff433a622a1182b1a6329fcc34982d"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">lbann::batch_normalization::m_parameters</a></div><div class="ttdeci">AbsDistMat * m_parameters</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00116">batch_normalization.hpp:116</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ae19e389d9af998d59ae205d69919f8b6"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">lbann::batch_normalization::m_scale_bias_v</a></div><div class="ttdeci">AbsDistMat * m_scale_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00146">batch_normalization.hpp:146</a></div></div>
<div class="ttc" id="classlbann_1_1optimizer_html_a6eb6169ed46ad602339c7b0bc2633c37"><div class="ttname"><a href="classlbann_1_1optimizer.html#a6eb6169ed46ad602339c7b0bc2633c37">lbann::optimizer::setup</a></div><div class="ttdeci">virtual void setup(AbsDistMat *parameters)</div><div class="ttdoc">Set parameters to optimize and initialize optimizer. </div><div class="ttdef"><b>Definition:</b> <a href="optimizer_8cpp_source.html#l00040">optimizer.cpp:40</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_abb34bb8031f57a483e2e327a5f229f48"><div class="ttname"><a href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">lbann::Layer::m_neuron_dims</a></div><div class="ttdeci">std::vector&lt; int &gt; m_neuron_dims</div><div class="ttdoc">Neuron tensor dimensions. </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00204">layer.hpp:204</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a658bcd94b2a07552f0dad589dcf7e6a9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">lbann::batch_normalization::m_running_var_v</a></div><div class="ttdeci">AbsDistMat * m_running_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00131">batch_normalization.hpp:131</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9d6c3edc4bbbfd3a64b8ac7b385f8ce5"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9d6c3edc4bbbfd3a64b8ac7b385f8ce5">lbann::batch_normalization::m_bias_init</a></div><div class="ttdeci">DataType m_bias_init</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00140">batch_normalization.hpp:140</a></div></div>
<div class="ttc" id="classlbann_1_1learning__regularizer_html_a09a2a4285c8a6964f35e75ddf681d1d0"><div class="ttname"><a href="classlbann_1_1learning__regularizer.html#a09a2a4285c8a6964f35e75ddf681d1d0">lbann::learning_regularizer::m_optimizer</a></div><div class="ttdeci">optimizer * m_optimizer</div><div class="ttdef"><b>Definition:</b> <a href="learning__regularizer_8hpp_source.html#l00042">learning_regularizer.hpp:42</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a06648c33b0b48859e7f46697a9b9f3f7"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a06648c33b0b48859e7f46697a9b9f3f7">lbann::batch_normalization::m_scale_init</a></div><div class="ttdeci">DataType m_scale_init</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00138">batch_normalization.hpp:138</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a50a89f8a68762c677d48efe384676e81"><div class="ttname"><a href="classlbann_1_1Layer.html#a50a89f8a68762c677d48efe384676e81">lbann::Layer::setup_data</a></div><div class="ttdeci">virtual void setup_data()</div><div class="ttdef"><b>Definition:</b> <a href="layer_8cpp_source.html#l00371">layer.cpp:371</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_ab515e25ae0e7e4e3349d82d0ad1d9b88_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_ab515e25ae0e7e4e3349d82d0ad1d9b88_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_ab515e25ae0e7e4e3349d82d0ad1d9b88_cgraph" id="classlbann_1_1batch__normalization_ab515e25ae0e7e4e3349d82d0ad1d9b88_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1Layer.html#a50a89f8a68762c677d48efe384676e81" title="lbann::Layer::setup_data" alt="" coords="232,12,397,39"/><area shape="rect" id="node4" href="classlbann_1_1optimizer.html#a6eb6169ed46ad602339c7b0bc2633c37" title="Set parameters to optimize and initialize optimizer. " alt="" coords="237,63,392,89"/><area shape="rect" id="node3" href="classlbann_1_1model.html#a7c37a886565aaee121b7de862d8c06ad" title="lbann::model::get_max\l_mini_batch_size" alt="" coords="445,5,600,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa5f7438ba7638a71cc14f49676a4e5e8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::setup_gpu </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called by <a class="el" href="classlbann_1_1Layer.html#af455f02e7d3111a3610bc3fb705f3292">setup()</a>, each layer using GPU should override this to call its parent and set up the layer's GPU data (e.g. weights). This base method sets up the activations and error signal matrices. This is always called after setup_data. </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1Layer.html#a36aa22ef90ce4de65abe729d38490863">lbann::Layer</a>.</p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00453">453</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                   {</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="classlbann_1_1Layer.html#a36aa22ef90ce4de65abe729d38490863">regularizer_layer::setup_gpu</a>();</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="preprocessor">  #ifndef __LIB_CUDNN</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">throw</span> lbann_exception(<span class="stringliteral">&quot;convolution_layer: cuDNN not detected&quot;</span>);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="preprocessor">  #else</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">// Set tensor descriptor</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    CHECK_CUDNN(cudnnCreateTensorDescriptor(&amp;m_channel_tensor_desc));</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    std::vector&lt;int&gt; tensor_dims(this-&gt;<a class="code" href="classlbann_1_1Layer.html#adfd6178d21498c9095cd947ae1eb2d6a">m_num_neuron_dims</a>+1, 1);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    std::vector&lt;int&gt; tensor_strides(this-&gt;<a class="code" href="classlbann_1_1Layer.html#adfd6178d21498c9095cd947ae1eb2d6a">m_num_neuron_dims</a>+1, 1);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    tensor_dims[1] = this-&gt;<a class="code" href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">m_neuron_dims</a>[0];</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    tensor_strides[0] = tensor_dims[1];</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    CHECK_CUDNN(cudnnSetTensorNdDescriptor(m_channel_tensor_desc,</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                                           this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;get_cudnn_data_type(),</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                                           tensor_dims.size(),</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                                           tensor_dims.data(),</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                                           tensor_strides.data()));</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">// Allocate GPU memory</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;allocate_on_gpus(m_mean_d,</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a>-&gt;Height(),</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a>-&gt;Width());</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;allocate_on_gpus(m_var_d,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a>-&gt;Height(),</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a>-&gt;Width());</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;allocate_on_gpus(m_scale_d,</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a>-&gt;Height(),</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a>-&gt;Width());</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;allocate_on_gpus(m_bias_d,</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a>-&gt;Height(),</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a>-&gt;Width());</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;allocate_on_gpus(m_scale_gradient_d,</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a>-&gt;Height(),</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a>-&gt;Width());</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;allocate_on_gpus(m_bias_gradient_d,</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a>-&gt;Height(),</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a>-&gt;Width());</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;allocate_on_gpus(m_mean_gradient_d,</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a>-&gt;Height(),</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a>-&gt;Width());</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;allocate_on_gpus(m_var_gradient_d,</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a>-&gt;Height(),</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                                    <a class="code" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a>-&gt;Width());</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="comment">// Initialize pinned memory workspace</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    m_pinned_workspace-&gt;Resize(<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>-&gt;Height(),</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                               4 * this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;get_num_gpus());</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    this-&gt;<a class="code" href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">m_cudnn</a>-&gt;pin_matrix(*m_pinned_workspace);</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="preprocessor">  #endif // __LIB_CUDNN</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  }</div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_afaa7676d8f6474cd8a482c35ad75e0e2"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">lbann::batch_normalization::m_scale_v</a></div><div class="ttdeci">AbsDistMat * m_scale_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00142">batch_normalization.hpp:142</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a2b8166a66c3f67998da26c52a306bf75"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">lbann::batch_normalization::m_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00150">batch_normalization.hpp:150</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa38922fa01fa2cf422599db2e9704273"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">lbann::batch_normalization::m_bias_v</a></div><div class="ttdeci">AbsDistMat * m_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00144">batch_normalization.hpp:144</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9dd4d9c92ea46fd9a4ee1eabda356053"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">lbann::batch_normalization::m_mean_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_mean_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00133">batch_normalization.hpp:133</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_abbff433a622a1182b1a6329fcc34982d"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">lbann::batch_normalization::m_parameters</a></div><div class="ttdeci">AbsDistMat * m_parameters</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00116">batch_normalization.hpp:116</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a36aa22ef90ce4de65abe729d38490863"><div class="ttname"><a href="classlbann_1_1Layer.html#a36aa22ef90ce4de65abe729d38490863">lbann::Layer::setup_gpu</a></div><div class="ttdeci">virtual void setup_gpu()</div><div class="ttdef"><b>Definition:</b> <a href="layer_8cpp_source.html#l00392">layer.cpp:392</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a62c59c3e7e6b1a514c484c57e6e4fa89"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">lbann::batch_normalization::m_scale_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00148">batch_normalization.hpp:148</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_adfd6178d21498c9095cd947ae1eb2d6a"><div class="ttname"><a href="classlbann_1_1Layer.html#adfd6178d21498c9095cd947ae1eb2d6a">lbann::Layer::m_num_neuron_dims</a></div><div class="ttdeci">int m_num_neuron_dims</div><div class="ttdoc">Number of dimensions in neuron tensor. </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00203">layer.hpp:203</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_abb34bb8031f57a483e2e327a5f229f48"><div class="ttname"><a href="classlbann_1_1Layer.html#abb34bb8031f57a483e2e327a5f229f48">lbann::Layer::m_neuron_dims</a></div><div class="ttdeci">std::vector&lt; int &gt; m_neuron_dims</div><div class="ttdoc">Neuron tensor dimensions. </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00204">layer.hpp:204</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ad99266cafa069f5e07595386ecfe2ad9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">lbann::batch_normalization::m_mean_v</a></div><div class="ttdeci">AbsDistMat * m_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00125">batch_normalization.hpp:125</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a7ffea88a297a2ee162357f27d14b5837"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">lbann::batch_normalization::m_var_v</a></div><div class="ttdeci">AbsDistMat * m_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00127">batch_normalization.hpp:127</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a08dbb94239e3b8c96329786c57c72e21"><div class="ttname"><a href="classlbann_1_1Layer.html#a08dbb94239e3b8c96329786c57c72e21">lbann::Layer::m_cudnn</a></div><div class="ttdeci">cudnn::cudnn_manager * m_cudnn</div><div class="ttdoc">cuDNN manager </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00271">layer.hpp:271</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1d4491ba60843b8f1db86e258d346dbc"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">lbann::batch_normalization::m_var_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_var_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00135">batch_normalization.hpp:135</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_aa5f7438ba7638a71cc14f49676a4e5e8_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_aa5f7438ba7638a71cc14f49676a4e5e8_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_aa5f7438ba7638a71cc14f49676a4e5e8_cgraph" id="classlbann_1_1batch__normalization_aa5f7438ba7638a71cc14f49676a4e5e8_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1Layer.html#a36aa22ef90ce4de65abe729d38490863" title="lbann::Layer::setup_gpu" alt="" coords="233,100,394,127"/><area shape="rect" id="node3" href="classlbann_1_1Layer.html#a5dfb66e81fc085997402a5e2241316bd" title="lbann::Layer::get_data\l_layout" alt="" coords="451,5,602,46"/><area shape="rect" id="node4" href="classlbann_1_1Layer.html#acee56be91337bbd78bc4371a8159b760" title="lbann::Layer::using_gpus" alt="" coords="443,71,610,97"/><area shape="rect" id="node5" href="classlbann_1_1lbann__comm.html#ad67668baa49b8713f3c74816d1aeb175" title="lbann::lbann_comm::\lget_procs_per_model" alt="" coords="453,122,600,163"/><area shape="rect" id="node6" href="classlbann_1_1model.html#a7c37a886565aaee121b7de862d8c06ad" title="lbann::model::get_max\l_mini_batch_size" alt="" coords="449,187,604,229"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a64da84b86a304065627ddb7a7482f81a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::setup_views </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called by <a class="el" href="classlbann_1_1Layer.html#af455f02e7d3111a3610bc3fb705f3292">setup()</a>, each layer should override to call its parent and set up any views of the layer's data. This is always called after setup_data. </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1Layer.html#a705cdeb600e57a076a24f6be1c31f5a5">lbann::Layer</a>.</p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00431">431</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                     {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <a class="code" href="classlbann_1_1Layer.html#a705cdeb600e57a076a24f6be1c31f5a5">regularizer_layer::setup_views</a>();</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">// Initialize views into parameters</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">m_statistics_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>, El::ALL, El::IR(0,2));</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">m_mean_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">m_statistics_v</a>, El::ALL, El::IR(0));</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">m_var_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">m_statistics_v</a>, El::ALL, El::IR(1));</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">m_running_mean_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>, El::ALL, El::IR(2));</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">m_running_var_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>, El::ALL, El::IR(3));</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">m_scale_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>, El::ALL, El::IR(4));</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">m_bias_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>, El::ALL, El::IR(5));</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">m_scale_bias_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">m_parameters</a>, El::ALL, El::IR(4, 6));</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="comment">// Initialize views into parameter gradients</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">m_mean_gradient_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>, El::ALL, El::IR(0));</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">m_var_gradient_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>, El::ALL, El::IR(1));</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">m_scale_gradient_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>, El::ALL, El::IR(2));</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">m_bias_gradient_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>, El::ALL, El::IR(3));</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    El::View(*<a class="code" href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">m_scale_bias_gradient_v</a>, *<a class="code" href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">m_parameters_gradient</a>, El::ALL,</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;             El::IR(2, 4));</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  }</div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ade1799e1276f95596f9abec29869c04f"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ade1799e1276f95596f9abec29869c04f">lbann::batch_normalization::m_running_mean_v</a></div><div class="ttdeci">AbsDistMat * m_running_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00129">batch_normalization.hpp:129</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_afaa7676d8f6474cd8a482c35ad75e0e2"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#afaa7676d8f6474cd8a482c35ad75e0e2">lbann::batch_normalization::m_scale_v</a></div><div class="ttdeci">AbsDistMat * m_scale_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00142">batch_normalization.hpp:142</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a2b8166a66c3f67998da26c52a306bf75"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a2b8166a66c3f67998da26c52a306bf75">lbann::batch_normalization::m_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00150">batch_normalization.hpp:150</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1268cb12bd13dcfdcc842b9ff30cc371"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1268cb12bd13dcfdcc842b9ff30cc371">lbann::batch_normalization::m_parameters_gradient</a></div><div class="ttdeci">AbsDistMat * m_parameters_gradient</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00118">batch_normalization.hpp:118</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_aa38922fa01fa2cf422599db2e9704273"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#aa38922fa01fa2cf422599db2e9704273">lbann::batch_normalization::m_bias_v</a></div><div class="ttdeci">AbsDistMat * m_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00144">batch_normalization.hpp:144</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a9dd4d9c92ea46fd9a4ee1eabda356053"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a9dd4d9c92ea46fd9a4ee1eabda356053">lbann::batch_normalization::m_mean_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_mean_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00133">batch_normalization.hpp:133</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_abbff433a622a1182b1a6329fcc34982d"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#abbff433a622a1182b1a6329fcc34982d">lbann::batch_normalization::m_parameters</a></div><div class="ttdeci">AbsDistMat * m_parameters</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00116">batch_normalization.hpp:116</a></div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a705cdeb600e57a076a24f6be1c31f5a5"><div class="ttname"><a href="classlbann_1_1Layer.html#a705cdeb600e57a076a24f6be1c31f5a5">lbann::Layer::setup_views</a></div><div class="ttdeci">virtual void setup_views()</div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00259">layer.hpp:259</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ae19e389d9af998d59ae205d69919f8b6"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ae19e389d9af998d59ae205d69919f8b6">lbann::batch_normalization::m_scale_bias_v</a></div><div class="ttdeci">AbsDistMat * m_scale_bias_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00146">batch_normalization.hpp:146</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a62c59c3e7e6b1a514c484c57e6e4fa89"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a62c59c3e7e6b1a514c484c57e6e4fa89">lbann::batch_normalization::m_scale_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00148">batch_normalization.hpp:148</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ac8685632d83933bd06d1dab311216648"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">lbann::batch_normalization::m_scale_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00152">batch_normalization.hpp:152</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a658bcd94b2a07552f0dad589dcf7e6a9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a658bcd94b2a07552f0dad589dcf7e6a9">lbann::batch_normalization::m_running_var_v</a></div><div class="ttdeci">AbsDistMat * m_running_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00131">batch_normalization.hpp:131</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ad99266cafa069f5e07595386ecfe2ad9"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ad99266cafa069f5e07595386ecfe2ad9">lbann::batch_normalization::m_mean_v</a></div><div class="ttdeci">AbsDistMat * m_mean_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00125">batch_normalization.hpp:125</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a2de71c25398f7d7e7e5382972a3e5f7f"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a2de71c25398f7d7e7e5382972a3e5f7f">lbann::batch_normalization::m_statistics_v</a></div><div class="ttdeci">AbsDistMat * m_statistics_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00123">batch_normalization.hpp:123</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a7ffea88a297a2ee162357f27d14b5837"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a7ffea88a297a2ee162357f27d14b5837">lbann::batch_normalization::m_var_v</a></div><div class="ttdeci">AbsDistMat * m_var_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00127">batch_normalization.hpp:127</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_a1d4491ba60843b8f1db86e258d346dbc"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#a1d4491ba60843b8f1db86e258d346dbc">lbann::batch_normalization::m_var_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_var_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00135">batch_normalization.hpp:135</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_a64da84b86a304065627ddb7a7482f81a_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_a64da84b86a304065627ddb7a7482f81a_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_a64da84b86a304065627ddb7a7482f81a_cgraph" id="classlbann_1_1batch__normalization_a64da84b86a304065627ddb7a7482f81a_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1Layer.html#a705cdeb600e57a076a24f6be1c31f5a5" title="lbann::Layer::setup\l_views" alt="" coords="232,5,365,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_a64da84b86a304065627ddb7a7482f81a_icgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_a64da84b86a304065627ddb7a7482f81a_icgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_a64da84b86a304065627ddb7a7482f81a_icgraph" id="classlbann_1_1batch__normalization_a64da84b86a304065627ddb7a7482f81a_icgraph">
<area shape="rect" id="node2" href="classlbann_1_1batch__normalization.html#a62e642fc7c064a49826e5d4a10a87e5c" title="lbann::batch_normalization\l::batch_normalization" alt="" coords="233,5,410,46"/><area shape="rect" id="node3" href="classlbann_1_1batch__normalization.html#aeb3c03a8dd166a64a77a26ee06ba81cd" title="lbann::batch_normalization\l::operator=" alt="" coords="233,70,410,111"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ada966e3ec503f6ef8361c4cd0aa423fb"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::update_compute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Perform the layers work / main function for the update step </p>

<p>Reimplemented from <a class="el" href="classlbann_1_1Layer.html#a70e08fc96a612f67ade6ba3809536d85">lbann::Layer</a>.</p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00946">946</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                        {</div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344">get_execution_mode</a>() == <a class="code" href="base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a>) {</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      this-&gt;<a class="code" href="classlbann_1_1learning__regularizer.html#a09a2a4285c8a6964f35e75ddf681d1d0">m_optimizer</a>-&gt;<a class="code" href="classlbann_1_1optimizer.html#a15f0487c474d261086723422a8bad921">update</a>(<a class="code" href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">m_scale_bias_gradient_v</a>);</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    }</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;  }</div>
<div class="ttc" id="classlbann_1_1optimizer_html_a15f0487c474d261086723422a8bad921"><div class="ttname"><a href="classlbann_1_1optimizer.html#a15f0487c474d261086723422a8bad921">lbann::optimizer::update</a></div><div class="ttdeci">virtual void update(const AbsDistMat *gradient)=0</div><div class="ttdoc">Update parameters using objective function gradient. </div></div>
<div class="ttc" id="classlbann_1_1Layer_html_a7f8a6efd69263d6268ced61c8121f344"><div class="ttname"><a href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344">lbann::Layer::get_execution_mode</a></div><div class="ttdeci">execution_mode get_execution_mode() const </div><div class="ttdef"><b>Definition:</b> <a href="layer_8hpp_source.html#l00138">layer.hpp:138</a></div></div>
<div class="ttc" id="classlbann_1_1batch__normalization_html_ac8685632d83933bd06d1dab311216648"><div class="ttname"><a href="classlbann_1_1batch__normalization.html#ac8685632d83933bd06d1dab311216648">lbann::batch_normalization::m_scale_bias_gradient_v</a></div><div class="ttdeci">AbsDistMat * m_scale_bias_gradient_v</div><div class="ttdef"><b>Definition:</b> <a href="batch__normalization_8hpp_source.html#l00152">batch_normalization.hpp:152</a></div></div>
<div class="ttc" id="base_8hpp_html_a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214"><div class="ttname"><a href="base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ac185ddac8b5a8f5aa23c5b80bc12d214">execution_mode::training</a></div></div>
<div class="ttc" id="classlbann_1_1learning__regularizer_html_a09a2a4285c8a6964f35e75ddf681d1d0"><div class="ttname"><a href="classlbann_1_1learning__regularizer.html#a09a2a4285c8a6964f35e75ddf681d1d0">lbann::learning_regularizer::m_optimizer</a></div><div class="ttdeci">optimizer * m_optimizer</div><div class="ttdef"><b>Definition:</b> <a href="learning__regularizer_8hpp_source.html#l00042">learning_regularizer.hpp:42</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classlbann_1_1batch__normalization_ada966e3ec503f6ef8361c4cd0aa423fb_cgraph.png" border="0" usemap="#classlbann_1_1batch__normalization_ada966e3ec503f6ef8361c4cd0aa423fb_cgraph" alt=""/></div>
<map name="classlbann_1_1batch__normalization_ada966e3ec503f6ef8361c4cd0aa423fb_cgraph" id="classlbann_1_1batch__normalization_ada966e3ec503f6ef8361c4cd0aa423fb_cgraph">
<area shape="rect" id="node2" href="classlbann_1_1Layer.html#a7f8a6efd69263d6268ced61c8121f344" title="lbann::Layer::get_execution_mode" alt="" coords="232,5,453,32"/><area shape="rect" id="node3" href="classlbann_1_1optimizer.html#a15f0487c474d261086723422a8bad921" title="Update parameters using objective function gradient. " alt="" coords="262,56,423,83"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a2b8166a66c3f67998da26c52a306bf75"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_bias_gradient_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into gradient w.r.t. bias term. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00150">150</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9d6c3edc4bbbfd3a64b8ac7b385f8ce5"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_bias_init</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initial value for bias term. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00140">140</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa38922fa01fa2cf422599db2e9704273"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_bias_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into bias term. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00144">144</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa2ee72d5efbf47c74796510ee61dbb14"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_decay</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Decay rate for the running statistics. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00121">121</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab82e74f905b7a117d9940f8542451e37"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_epsilon</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Small number to avoid division by zero. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00155">155</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9dd4d9c92ea46fd9a4ee1eabda356053"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_mean_gradient_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into gradient w.r.t. means. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00133">133</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad99266cafa069f5e07595386ecfe2ad9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_mean_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into current minibatch means. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00125">125</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="abbff433a622a1182b1a6329fcc34982d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_parameters</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Batch normalization parameters. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00116">116</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1268cb12bd13dcfdcc842b9ff30cc371"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_parameters_gradient</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Batch normalization parameter gradients. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00118">118</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ade1799e1276f95596f9abec29869c04f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_running_mean_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into running means. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00129">129</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a658bcd94b2a07552f0dad589dcf7e6a9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_running_var_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into running variance. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00131">131</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac8685632d83933bd06d1dab311216648"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_scale_bias_gradient_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into both the scale and bias gradients. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00152">152</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae19e389d9af998d59ae205d69919f8b6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_scale_bias_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into both the scale and bias terms. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00146">146</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a62c59c3e7e6b1a514c484c57e6e4fa89"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_scale_gradient_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into gradient w.r.t. scaling term. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00148">148</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a06648c33b0b48859e7f46697a9b9f3f7"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_scale_init</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initial value for scaling term. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00138">138</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="afaa7676d8f6474cd8a482c35ad75e0e2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_scale_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into scaling term. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00142">142</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2de71c25398f7d7e7e5382972a3e5f7f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_statistics_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into statistics for current minibatch. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00123">123</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0a33289150c01899f4b7ef2980771899"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_use_global_stats</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Whether to use global running statistics when training. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00157">157</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1d4491ba60843b8f1db86e258d346dbc"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_var_gradient_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into gradient w.r.t. standard deviations. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00135">135</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7ffea88a297a2ee162357f27d14b5837"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;data_layout T_layout&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="base_8hpp.html#a059664ed36d5eedd5ff4f7838d9c7a5a">AbsDistMat</a>* <a class="el" href="classlbann_1_1batch__normalization.html">lbann::batch_normalization</a>&lt; T_layout &gt;::m_var_v</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>View into current minibatch standard deviations. </p>

<p>Definition at line <a class="el" href="batch__normalization_8hpp_source.html#l00127">127</a> of file <a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/usr/workspace/wsa/mckinney/bamboo/lbannci-catalyst159-1/xml-data/build-dir/CT-TES-DG/include/lbann/layers/regularizers/<a class="el" href="batch__normalization_8hpp_source.html">batch_normalization.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacelbann.html">lbann</a></li><li class="navelem"><a class="el" href="classlbann_1_1batch__normalization.html">batch_normalization</a></li>
    <li class="footer">Generated on Thu Sep 21 2017 15:06:19 for LBANN by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
