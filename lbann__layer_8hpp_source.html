<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>LBANN: include/lbann/layers/lbann_layer.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<h1>include/lbann/layers/lbann_layer.hpp</h1><a href="lbann__layer_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="comment">// Copyright (c) 2014-2016, Lawrence Livermore National Security, LLC. </span>
<a name="l00003"></a>00003 <span class="comment">// Produced at the Lawrence Livermore National Laboratory. </span>
<a name="l00004"></a>00004 <span class="comment">// Written by the LBANN Research Team (B. Van Essen, et al.) listed in</span>
<a name="l00005"></a>00005 <span class="comment">// the CONTRIBUTORS file. &lt;lbann-dev@llnl.gov&gt;</span>
<a name="l00006"></a>00006 <span class="comment">//</span>
<a name="l00007"></a>00007 <span class="comment">// LLNL-CODE-697807.</span>
<a name="l00008"></a>00008 <span class="comment">// All rights reserved.</span>
<a name="l00009"></a>00009 <span class="comment">//</span>
<a name="l00010"></a>00010 <span class="comment">// This file is part of LBANN: Livermore Big Artificial Neural Network</span>
<a name="l00011"></a>00011 <span class="comment">// Toolkit. For details, see http://software.llnl.gov/LBANN or</span>
<a name="l00012"></a>00012 <span class="comment">// https://github.com/LLNL/LBANN. </span>
<a name="l00013"></a>00013 <span class="comment">//</span>
<a name="l00014"></a>00014 <span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;Licensee&quot;); you</span>
<a name="l00015"></a>00015 <span class="comment">// may not use this file except in compliance with the License.  You may</span>
<a name="l00016"></a>00016 <span class="comment">// obtain a copy of the License at:</span>
<a name="l00017"></a>00017 <span class="comment">//</span>
<a name="l00018"></a>00018 <span class="comment">// http://www.apache.org/licenses/LICENSE-2.0</span>
<a name="l00019"></a>00019 <span class="comment">//</span>
<a name="l00020"></a>00020 <span class="comment">// Unless required by applicable law or agreed to in writing, software</span>
<a name="l00021"></a>00021 <span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<a name="l00022"></a>00022 <span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or</span>
<a name="l00023"></a>00023 <span class="comment">// implied. See the License for the specific language governing</span>
<a name="l00024"></a>00024 <span class="comment">// permissions and limitations under the license.</span>
<a name="l00025"></a>00025 <span class="comment">//</span>
<a name="l00026"></a>00026 <span class="comment">// lbann_layer .h .cpp - Parent class for all layer types</span>
<a name="l00028"></a>00028 <span class="comment"></span>
<a name="l00029"></a>00029 <span class="preprocessor">#ifndef LBANN_LAYER_HPP_INCLUDED</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">#define LBANN_LAYER_HPP_INCLUDED</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="lbann__base_8hpp.html">lbann/lbann_base.hpp</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="lbann__comm_8hpp.html">lbann/lbann_comm.hpp</a>&quot;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &quot;<a class="code" href="lbann__layer__activations_8hpp.html">lbann/layers/lbann_layer_activations.hpp</a>&quot;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &quot;<a class="code" href="lbann__summary_8hpp.html">lbann/utils/lbann_summary.hpp</a>&quot;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &quot;<a class="code" href="lbann__optimizer_8hpp.html">lbann/optimizers/lbann_optimizer.hpp</a>&quot;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &quot;<a class="code" href="lbann__optimizer__sgd_8hpp.html">lbann/optimizers/lbann_optimizer_sgd.hpp</a>&quot;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &quot;<a class="code" href="lbann__optimizer__adagrad_8hpp.html">lbann/optimizers/lbann_optimizer_adagrad.hpp</a>&quot;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &quot;<a class="code" href="lbann__optimizer__rmsprop_8hpp.html">lbann/optimizers/lbann_optimizer_rmsprop.hpp</a>&quot;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="keyword">namespace </span>lbann
<a name="l00044"></a>00044 {
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="comment">// Forward-declare this.</span>
<a name="l00047"></a>00047 <span class="keyword">class </span>regularizer;
<a name="l00048"></a>00048 
<a name="l00049"></a><a class="code" href="classlbann_1_1Layer.html">00049</a>   <span class="keyword">class </span><a class="code" href="classlbann_1_1Layer.html">Layer</a> {
<a name="l00050"></a>00050   <span class="keyword">public</span>:
<a name="l00051"></a>00051     <a class="code" href="classlbann_1_1Layer.html#a58d1184ec0daa0dee378f7206ff6b4f1">Layer</a>(<span class="keyword">const</span> <a class="code" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> index, <a class="code" href="classlbann_1_1lbann__comm.html">lbann_comm</a>* <a class="code" href="classlbann_1_1Layer.html#ad20dd05617ed950162e0fdb95bc23096">comm</a>, <a class="code" href="classlbann_1_1Optimizer.html">Optimizer</a> *<a class="code" href="classlbann_1_1Layer.html#a5caea149f8ecebff4b77efd1248b8267">optimizer</a>,
<a name="l00052"></a>00052           <a class="code" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> mbsize, <a class="code" href="namespacelbann.html#ab00e153fabca7ab166e4d79d47c05c76">activation_type</a> activation=<a class="code" href="namespacelbann.html#ab00e153fabca7ab166e4d79d47c05c76a3ea412ed9058a6e1689cb7b1eb52a739">activation_type::ID</a>,
<a name="l00053"></a>00053           std::vector&lt;regularizer*&gt; regs={});
<a name="l00054"></a>00054     <span class="keyword">virtual</span> <a class="code" href="classlbann_1_1Layer.html#a68c3f57587956da938406812f13ecb78">~Layer</a>();
<a name="l00055"></a>00055     <span class="keyword">virtual</span> <a class="code" href="lbann__base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> <a class="code" href="classlbann_1_1Layer.html#a9bc5072a0c4105cce6f3526845abd07f">forwardProp</a>(<a class="code" href="lbann__base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> prev_WBL2NormSum);
<a name="l00056"></a>00056     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#a07f230d516c76f22ff42addb542424af">backProp</a>();
<a name="l00057"></a><a class="code" href="classlbann_1_1Layer.html#a0fbb376cebdaa4692fdc92df34bb366c">00057</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classlbann_1_1Layer.html#a0fbb376cebdaa4692fdc92df34bb366c">update</a>() { <span class="keywordflow">return</span> <span class="keyword">false</span>; };
<a name="l00058"></a>00058     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#aff82d98a534f0dfc3b0cb200a9aff90a">summarize</a>(<a class="code" href="classlbann_1_1lbann__summary.html">lbann_summary</a>&amp; summarizer, int64_t step);
<a name="l00064"></a><a class="code" href="classlbann_1_1Layer.html#af258db35456927df5df31af6bcd33473">00064</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#af258db35456927df5df31af6bcd33473">epoch_print</a>()<span class="keyword"> const </span>{}
<a name="l00069"></a><a class="code" href="classlbann_1_1Layer.html#a12706025928f5e3d3ec3d9407c66c96b">00069</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#a12706025928f5e3d3ec3d9407c66c96b">epoch_reset</a>() {}
<a name="l00070"></a><a class="code" href="classlbann_1_1Layer.html#a165d07794df1b67b6034e80ce003f714">00070</a>     <span class="keyword">virtual</span> <a class="code" href="lbann__base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> <a class="code" href="classlbann_1_1Layer.html#a165d07794df1b67b6034e80ce003f714">checkGradientMB</a>(<a class="code" href="classlbann_1_1Layer.html">Layer</a>&amp; PrevLayer, <span class="keyword">const</span> <a class="code" href="lbann__base_8hpp.html#a279b64f47fb2213ad73e59be937afcfa">DataType</a> Epsilon=1e-4) {
<a name="l00071"></a>00071       <span class="keywordflow">return</span> 0.0;
<a name="l00072"></a>00072     };
<a name="l00073"></a>00073 
<a name="l00074"></a>00074     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#a20442464265da1cb2aeb1cf82640702f">setup</a>(<span class="keywordtype">int</span>);
<a name="l00075"></a>00075 
<a name="l00077"></a><a class="code" href="classlbann_1_1Layer.html#ab178f73070d2764151a7e6be2614acda">00077</a>     <span class="keyword">inline</span> <a class="code" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classlbann_1_1Layer.html#ab178f73070d2764151a7e6be2614acda">get_index</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classlbann_1_1Layer.html#a5d76fcdf50d7ac4fb2fe757fb0cc23d8">Index</a>; }
<a name="l00079"></a><a class="code" href="classlbann_1_1Layer.html#a190982036d52d288d3528a16e30418e0">00079</a>     <span class="keyword">virtual</span> <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a>&amp; <a class="code" href="classlbann_1_1Layer.html#a190982036d52d288d3528a16e30418e0">get_weights_biases</a>() { <span class="keywordflow">return</span> *<a class="code" href="classlbann_1_1Layer.html#acb8f49938650995031405a6ecf8f7f93">WB</a>; }
<a name="l00081"></a><a class="code" href="classlbann_1_1Layer.html#a4b2b92aa11d932d62456c21ed929b263">00081</a>     <span class="keyword">virtual</span> <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a>&amp; <a class="code" href="classlbann_1_1Layer.html#a4b2b92aa11d932d62456c21ed929b263">get_weights_biases_gradient</a>() { <span class="keywordflow">return</span> *<a class="code" href="classlbann_1_1Layer.html#a94b994fd7f434636d0c73190f6209bf9">WB_D</a>; }
<a name="l00083"></a><a class="code" href="classlbann_1_1Layer.html#a6ae06b86f19fbfacdc7b4ec171a793d3">00083</a>     <span class="keyword">virtual</span> <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a>&amp; <a class="code" href="classlbann_1_1Layer.html#a6ae06b86f19fbfacdc7b4ec171a793d3">get_activations</a>() { <span class="keywordflow">return</span> *<a class="code" href="classlbann_1_1Layer.html#a1d09f81cc2d47264a38b7eecab9d7307">Acts</a>; }
<a name="l00085"></a><a class="code" href="classlbann_1_1Layer.html#a2f196ef8b7a8ed9562aca11eae8cf749">00085</a>     <span class="keyword">virtual</span> <a class="code" href="classlbann_1_1Optimizer.html">Optimizer</a>* <a class="code" href="classlbann_1_1Layer.html#a2f196ef8b7a8ed9562aca11eae8cf749">get_optimizer</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> optimizer; }
<a name="l00087"></a><a class="code" href="classlbann_1_1Layer.html#a0a0f8e32e2b17953f87652f855ccfbf9">00087</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#a0a0f8e32e2b17953f87652f855ccfbf9">reset_counters</a>() {
<a name="l00088"></a>00088       <a class="code" href="classlbann_1_1Layer.html#a94ee7bf7544942bc8cf208b565349c66">fp_time</a> = 0.0;
<a name="l00089"></a>00089       <a class="code" href="classlbann_1_1Layer.html#abaa9acb195346090fffcd64013295479">bp_time</a> = 0.0;
<a name="l00090"></a>00090     }
<a name="l00091"></a>00091 
<a name="l00093"></a><a class="code" href="classlbann_1_1Layer.html#ad0c18464cd5ea40f5f0c1f33e82fb803">00093</a>     <span class="keyword">virtual</span> <a class="code" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classlbann_1_1Layer.html#ad0c18464cd5ea40f5f0c1f33e82fb803">get_minibatch_size</a>()<span class="keyword"> const </span>{
<a name="l00094"></a>00094       <span class="keywordflow">return</span> <a class="code" href="classlbann_1_1Layer.html#a30aaa195765788f649ce70e855a74081">m_mini_batch_size</a>;
<a name="l00095"></a>00095     }
<a name="l00102"></a><a class="code" href="classlbann_1_1Layer.html#adaab698fe711b0dd0ada944059a18142">00102</a>     <span class="keyword">virtual</span> <a class="code" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classlbann_1_1Layer.html#adaab698fe711b0dd0ada944059a18142">get_effective_minibatch_size</a>()<span class="keyword"> const </span>{
<a name="l00103"></a>00103       <span class="keywordflow">return</span> <a class="code" href="classlbann_1_1Layer.html#a8b07424032d1b3c4e3a1fae100aff5c5">m_effective_mbsize</a>;
<a name="l00104"></a>00104     }
<a name="l00106"></a><a class="code" href="classlbann_1_1Layer.html#a764387b1c6c66436120bbbff79649e70">00106</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#a764387b1c6c66436120bbbff79649e70">set_effective_minibatch_size</a>(<a class="code" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> size) {
<a name="l00107"></a>00107       <a class="code" href="classlbann_1_1Layer.html#a8b07424032d1b3c4e3a1fae100aff5c5">m_effective_mbsize</a> = size;
<a name="l00108"></a>00108     }
<a name="l00109"></a>00109 
<a name="l00110"></a>00110     <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a> *<a class="code" href="classlbann_1_1Layer.html#ad547eae2227e9db8f5621b8f616be083">fp_output</a>();
<a name="l00111"></a>00111     <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a> *<a class="code" href="classlbann_1_1Layer.html#a030edc2fd4cc62d9e13c3b7e81167be3">bp_output</a>();
<a name="l00112"></a>00112     <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#a77218f0f8e30061563495930f5f454dd">setup_fp_input</a>(<a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a> *<a class="code" href="classlbann_1_1Layer.html#aa4f7b14ea6448703edc07ae4e43cb20a">fp_input</a>);
<a name="l00113"></a>00113     <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#a275987dded3345f86aa3c8fc5f2e37de">setup_bp_input</a>(<a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a> *<a class="code" href="classlbann_1_1Layer.html#ab8ec7fc7bd902123d7b7788b6284ca62">bp_input</a>);
<a name="l00114"></a>00114 
<a name="l00115"></a>00115     <span class="comment">/* void updateMB(const float LearnRate); */</span>
<a name="l00116"></a>00116     <span class="comment">//    virtual double computeCost(DistMat &amp;deltas) = 0;</span>
<a name="l00117"></a>00117     <span class="comment">//    { return 0.0;}</span>
<a name="l00118"></a>00118 
<a name="l00119"></a>00119     <span class="keywordtype">bool</span> <a class="code" href="classlbann_1_1Layer.html#ac46bf08faa4b4f0bea3dcbd88aa3dfe4">saveToFile</a>(<span class="keywordtype">int</span> fd, <span class="keyword">const</span> <span class="keywordtype">char</span>* filename);
<a name="l00120"></a>00120     <span class="keywordtype">bool</span> <a class="code" href="classlbann_1_1Layer.html#a29f7d292db0394489f1302b2aae81dc4">loadFromFile</a>(<span class="keywordtype">int</span> fd, <span class="keyword">const</span> <span class="keywordtype">char</span>* filename);
<a name="l00121"></a>00121 
<a name="l00122"></a>00122     <span class="keywordtype">bool</span> <a class="code" href="classlbann_1_1Layer.html#abe469288e72b03dcd5da83b994148f7b">saveToCheckpoint</a>(<span class="keywordtype">int</span> fd, <span class="keyword">const</span> <span class="keywordtype">char</span>* filename, uint64_t* bytes);
<a name="l00123"></a>00123     <span class="keywordtype">bool</span> <a class="code" href="classlbann_1_1Layer.html#a88c3ac4ca87586ec20558aaddda76691">loadFromCheckpoint</a>(<span class="keywordtype">int</span> fd, <span class="keyword">const</span> <span class="keywordtype">char</span>* filename, uint64_t* bytes);
<a name="l00124"></a>00124 
<a name="l00125"></a>00125     <span class="keywordtype">bool</span> <a class="code" href="classlbann_1_1Layer.html#ad2ca40fa9c438e235b897e2d180b6c93">saveToCheckpointShared</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* dir, uint64_t* bytes);
<a name="l00126"></a>00126     <span class="keywordtype">bool</span> <a class="code" href="classlbann_1_1Layer.html#a973c6841febca94a9ad755d18d696bf3">loadFromCheckpointShared</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* dir, uint64_t* bytes);
<a name="l00127"></a>00127 
<a name="l00128"></a>00128   <span class="keyword">public</span>:
<a name="l00129"></a><a class="code" href="classlbann_1_1Layer.html#a5d76fcdf50d7ac4fb2fe757fb0cc23d8">00129</a>     <a class="code" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>               <a class="code" href="classlbann_1_1Layer.html#a5d76fcdf50d7ac4fb2fe757fb0cc23d8">Index</a>;                  <span class="comment">// Layer index (start with 0)</span>
<a name="l00130"></a><a class="code" href="classlbann_1_1Layer.html#a9d4a379d5c9e1102e63b48c53dd8ed44">00130</a>     <a class="code" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>                <a class="code" href="classlbann_1_1Layer.html#a9d4a379d5c9e1102e63b48c53dd8ed44">NumNeurons</a>;     <span class="comment">// # neurons</span>
<a name="l00131"></a><a class="code" href="classlbann_1_1Layer.html#af8b115cb89d6e8081de3f148a8ad2ef7">00131</a>     <a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8" title="Neural network execution mode.">execution_mode</a>  <a class="code" href="classlbann_1_1Layer.html#af8b115cb89d6e8081de3f148a8ad2ef7">m_execution_mode</a>;
<a name="l00132"></a><a class="code" href="classlbann_1_1Layer.html#a7fb36ea1c2256cf0e330d1f9fabe83ba">00132</a>     <a class="code" href="namespacelbann.html#ab00e153fabca7ab166e4d79d47c05c76">activation_type</a> <a class="code" href="classlbann_1_1Layer.html#a7fb36ea1c2256cf0e330d1f9fabe83ba">m_activation_type</a>;
<a name="l00133"></a>00133 
<a name="l00134"></a>00134     <span class="comment">// TODO: move to lbann_layer_fully_connected.hpp</span>
<a name="l00135"></a><a class="code" href="classlbann_1_1Layer.html#acb8f49938650995031405a6ecf8f7f93">00135</a>     <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a> *<a class="code" href="classlbann_1_1Layer.html#acb8f49938650995031405a6ecf8f7f93">WB</a>;             <span class="comment">// Weight and Bias Set ((# neurons + 1) x (# previous layer&apos;s neurons + 1))</span>
<a name="l00136"></a><a class="code" href="classlbann_1_1Layer.html#a94b994fd7f434636d0c73190f6209bf9">00136</a>     <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a> *<a class="code" href="classlbann_1_1Layer.html#a94b994fd7f434636d0c73190f6209bf9">WB_D</a>;           <span class="comment">// Weights and Bias Gradient ((# neurons + 1) x (# previous layer&apos;s neurons + 1))</span>
<a name="l00137"></a><a class="code" href="classlbann_1_1Layer.html#abdd2a4f80fa9e5e4b1cde103eefeaeac">00137</a>     <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a> *<a class="code" href="classlbann_1_1Layer.html#abdd2a4f80fa9e5e4b1cde103eefeaeac">Zs</a>;             <span class="comment">// Zs ((# neurons + 1) x mini-batch size)</span>
<a name="l00138"></a><a class="code" href="classlbann_1_1Layer.html#a70b6c950580125b311216d7402d57f56">00138</a>     <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a> *<a class="code" href="classlbann_1_1Layer.html#a70b6c950580125b311216d7402d57f56">Ds</a>;             <span class="comment">// Deltas ((# neurons + 1) x mini-batch size)</span>
<a name="l00139"></a>00139 
<a name="l00140"></a><a class="code" href="classlbann_1_1Layer.html#a34f5517610ada7dd06205cb97d97b369">00140</a>     <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a> *<a class="code" href="classlbann_1_1Layer.html#a34f5517610ada7dd06205cb97d97b369">Ds_Temp</a>;        <span class="comment">// Temporary deltas for computation ((# neurons + 1) x mini-batch size)</span>
<a name="l00141"></a><a class="code" href="classlbann_1_1Layer.html#a1d09f81cc2d47264a38b7eecab9d7307">00141</a>     <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a> *<a class="code" href="classlbann_1_1Layer.html#a1d09f81cc2d47264a38b7eecab9d7307">Acts</a>;           <span class="comment">// Activations ((# neurons + 1) x mini-batch size)</span>
<a name="l00142"></a>00142 
<a name="l00143"></a><a class="code" href="classlbann_1_1Layer.html#a5caea149f8ecebff4b77efd1248b8267">00143</a>     <a class="code" href="classlbann_1_1Optimizer.html">Optimizer</a> *optimizer;
<a name="l00144"></a>00144 
<a name="l00145"></a><a class="code" href="classlbann_1_1Layer.html#aa4f7b14ea6448703edc07ae4e43cb20a">00145</a>     <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a> *<a class="code" href="classlbann_1_1Layer.html#aa4f7b14ea6448703edc07ae4e43cb20a">fp_input</a>;
<a name="l00146"></a><a class="code" href="classlbann_1_1Layer.html#ab8ec7fc7bd902123d7b7788b6284ca62">00146</a>     <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a> *<a class="code" href="classlbann_1_1Layer.html#ab8ec7fc7bd902123d7b7788b6284ca62">bp_input</a>;
<a name="l00147"></a>00147 
<a name="l00148"></a><a class="code" href="classlbann_1_1Layer.html#ad20dd05617ed950162e0fdb95bc23096">00148</a>     <a class="code" href="classlbann_1_1lbann__comm.html">lbann_comm</a>* comm;
<a name="l00149"></a>00149   <span class="keyword">protected</span>:
<a name="l00151"></a><a class="code" href="classlbann_1_1Layer.html#ae9e1c671ec408bdd539ec728ce1e8b28">00151</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#ae9e1c671ec408bdd539ec728ce1e8b28">fp_linearity</a>(<a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a>&amp; _WB, <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a>&amp; _X, <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a>&amp; _Z, <a class="code" href="lbann__base_8hpp.html#afad88fb587c304caea8a36ee5a5c1df8">ElMat</a>&amp; _Y) {}
<a name="l00153"></a><a class="code" href="classlbann_1_1Layer.html#a3cadcd93ddac0f0231449181a72edf1b">00153</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#a3cadcd93ddac0f0231449181a72edf1b">bp_linearity</a>() {}
<a name="l00155"></a>00155     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#aa5ca9f046b4833f3d914d301af8a8640">fp_nonlinearity</a>();
<a name="l00157"></a>00157     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classlbann_1_1Layer.html#a4bb6b1be36cd28cddbaedcb39a5f5230">bp_nonlinearity</a>();
<a name="l00158"></a>00158 
<a name="l00160"></a><a class="code" href="classlbann_1_1Layer.html#adc0a8d274f10860b3b1f1d8e4388a503">00160</a>     <a class="code" href="classlbann_1_1Activation.html">Activation</a>* <a class="code" href="classlbann_1_1Layer.html#adc0a8d274f10860b3b1f1d8e4388a503">m_activation_fn</a>;
<a name="l00162"></a><a class="code" href="classlbann_1_1Layer.html#a9989c75430678d69efc2794ed40693b3">00162</a>     std::vector&lt;regularizer*&gt; <a class="code" href="classlbann_1_1Layer.html#a9989c75430678d69efc2794ed40693b3">regularizers</a>;
<a name="l00164"></a><a class="code" href="classlbann_1_1Layer.html#a30aaa195765788f649ce70e855a74081">00164</a>     <a class="code" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classlbann_1_1Layer.html#a30aaa195765788f649ce70e855a74081">m_mini_batch_size</a>;
<a name="l00166"></a><a class="code" href="classlbann_1_1Layer.html#a8b07424032d1b3c4e3a1fae100aff5c5">00166</a>     <a class="code" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="classlbann_1_1Layer.html#a8b07424032d1b3c4e3a1fae100aff5c5">m_effective_mbsize</a>;
<a name="l00167"></a>00167 
<a name="l00169"></a><a class="code" href="classlbann_1_1Layer.html#a94ee7bf7544942bc8cf208b565349c66">00169</a>     <span class="keywordtype">double</span> <a class="code" href="classlbann_1_1Layer.html#a94ee7bf7544942bc8cf208b565349c66">fp_time</a>;
<a name="l00171"></a><a class="code" href="classlbann_1_1Layer.html#abaa9acb195346090fffcd64013295479">00171</a>     <span class="keywordtype">double</span> <a class="code" href="classlbann_1_1Layer.html#abaa9acb195346090fffcd64013295479">bp_time</a>;
<a name="l00172"></a>00172   };
<a name="l00173"></a>00173 }
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 
<a name="l00176"></a>00176 <span class="preprocessor">#endif // LBANN_LAYER_HPP_INCLUDED</span>
</pre></div></div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 21 Sep 2016 for LBANN by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
