<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>LBANN: lbann::distributed_minibatch_parallel_io Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
  <div class="navpath"><a class="el" href="namespacelbann.html">lbann</a>::<a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html">distributed_minibatch_parallel_io</a>
  </div>
<div class="contents">
<h1>lbann::distributed_minibatch_parallel_io Class Reference</h1><!-- doxytag: class="lbann::distributed_minibatch_parallel_io" -->
<p><code>#include &lt;<a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for lbann::distributed_minibatch_parallel_io:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io__inherit__graph.png" border="0" usemap="#lbann_1_1distributed__minibatch__parallel__io_inherit__map" alt="Inheritance graph"/></div>
<map name="lbann_1_1distributed__minibatch__parallel__io_inherit__map" id="lbann_1_1distributed__minibatch__parallel__io_inherit__map">
<area shape="rect" id="node3" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html" title="lbann::input_layer_distributed_minibatch_parallel_io" alt="" coords="308,5,625,35"/><area shape="rect" id="node5" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html" title="lbann::target_layer_distributed_minibatch_parallel_io" alt="" coords="305,59,628,88"/><area shape="rect" id="node7" href="classlbann_1_1target__layer__unsupervised.html" title="lbann::target_layer_unsupervised" alt="" coords="360,112,573,141"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for lbann::distributed_minibatch_parallel_io:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io__coll__graph.png" border="0" usemap="#lbann_1_1distributed__minibatch__parallel__io_coll__map" alt="Collaboration graph"/></div>
<map name="lbann_1_1distributed__minibatch__parallel__io_coll__map" id="lbann_1_1distributed__minibatch__parallel__io_coll__map">
<area shape="rect" id="node2" href="classlbann_1_1lbann__comm.html" title="lbann::lbann_comm" alt="" coords="63,5,196,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classlbann_1_1distributed__minibatch__parallel__io-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa35307f86d664e0fd3cc98a645f1589d">distributed_minibatch_parallel_io</a> (<a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *<a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>, int num_parallel_readers, <a class="el" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> mini_batch_size, std::map&lt; <a class="el" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8">execution_mode</a>, <a class="el" href="classlbann_1_1DataReader.html">DataReader</a> * &gt; data_readers)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad5cc95374bcb47c97105b387950ca8e1">fetch_to_local_matrix</a> (<a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;M_local)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#ac5d6b3b6740f91ef083eeac3cc52c10a">distribute_from_local_matrix</a> (<a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;M_local, <a class="el" href="lbann__base_8hpp.html#aaf89a79f1476644edba844c4937abbcc">CircMat</a> &amp;Ms)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a17aa20ba6b971b6433da058be0d4545a">is_data_set_processed</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d">get_num_parallel_readers</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa62a8e46c053771fe20831f81aeb0a25">fetch_from_data_reader</a> (<a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;M_local)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#acc0bb9e26d23850e19f00663bee86bcd">preprocess_data_samples</a> (<a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;M_local, int num_samples_in_batch)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a44e74967c30e4bc0faf54a1d50cab79d">update_data_reader</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8">execution_mode</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a72a85b41372e22cba16dddda84983093">get_execution_mode</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a1a1c8e6038e112145fa6eaf37e6cb3d4">is_current_root</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is this rank the current root node for the Elemental Distribution.  <a href="#a1a1c8e6038e112145fa6eaf37e6cb3d4"></a><br/></td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">m_local_reader_done</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa90a4f8da078c11f4953f76092d472de">m_mini_batch_size</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">m_local_data_valid</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa595846c85d451799e44d58b8203192d">m_num_data_per_epoch</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00038">38</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa35307f86d664e0fd3cc98a645f1589d"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::distributed_minibatch_parallel_io" ref="aa35307f86d664e0fd3cc98a645f1589d" args="(lbann_comm *comm, int num_parallel_readers, uint mini_batch_size, std::map&lt; execution_mode, DataReader * &gt; data_readers)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lbann::distributed_minibatch_parallel_io::distributed_minibatch_parallel_io </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a> *&nbsp;</td>
          <td class="paramname"> <em>comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_parallel_readers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>mini_batch_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::map&lt; <a class="el" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8">execution_mode</a>, <a class="el" href="classlbann_1_1DataReader.html">DataReader</a> * &gt;&nbsp;</td>
          <td class="paramname"> <em>data_readers</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>Check to make sure that there is enough training data for all of the parallel readers</p>
<p>Check to make sure that there is enough training data for all of the parallel readers</p>
<p>Check to make sure that there is enough testing data for all of the parallel readers </p>
</p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html#l00034">34</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html">lbann_distributed_minibatch_parallel_io.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00035"></a>00035   : <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>), <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a>(num_parallel_readers), <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a>(num_parallel_readers), <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a>(num_parallel_readers), <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa90a4f8da078c11f4953f76092d472de">m_mini_batch_size</a>(mini_batch_size)
<a name="l00036"></a>00036 {
<a name="l00037"></a>00037   <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a> = 0;
<a name="l00038"></a>00038 
<a name="l00039"></a>00039   <span class="keywordtype">int</span> training_data_set_size = 0;
<a name="l00040"></a>00040   <span class="keywordtype">int</span> validation_data_set_size = 0;
<a name="l00041"></a>00041   <span class="keywordtype">int</span> testing_data_set_size = 0;
<a name="l00042"></a>00042 
<a name="l00043"></a>00043   <span class="keywordflow">if</span>(data_readers[<a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aef839bdee87b9298d9be97d3f9c90469">execution_mode::training</a>] != <a class="code" href="datatype_8hpp.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00044"></a>00044     training_data_set_size = data_readers[<a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aef839bdee87b9298d9be97d3f9c90469">execution_mode::training</a>]-&gt;getNumData();
<a name="l00045"></a>00045   }
<a name="l00046"></a>00046 
<a name="l00047"></a>00047   <span class="keywordflow">if</span>(data_readers[<a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ade2ab1918cbd80e8332e87ef162075be">execution_mode::validation</a>] != <a class="code" href="datatype_8hpp.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00048"></a>00048     validation_data_set_size = data_readers[<a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ade2ab1918cbd80e8332e87ef162075be">execution_mode::validation</a>]-&gt;getNumData();
<a name="l00049"></a>00049   }
<a name="l00050"></a>00050 
<a name="l00051"></a>00051   <span class="keywordflow">if</span>(data_readers[<a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8a3f687cacfa4f67ecb465589ee1b37da6">execution_mode::testing</a>] != <a class="code" href="datatype_8hpp.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {
<a name="l00052"></a>00052     testing_data_set_size = data_readers[<a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8a3f687cacfa4f67ecb465589ee1b37da6">execution_mode::testing</a>]-&gt;getNumData();
<a name="l00053"></a>00053   }
<a name="l00054"></a>00054 
<a name="l00055"></a>00055   <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_model_grid().Size() &lt; num_parallel_readers) {
<a name="l00056"></a>00056     cout &lt;&lt; <span class="stringliteral">&quot;Warning the grid size &quot;</span>&lt;&lt;<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_model_grid().Size()
<a name="l00057"></a>00057          &lt;&lt;<span class="stringliteral">&quot;is smaller than the number of requested parallel readers &quot;</span>
<a name="l00058"></a>00058          &lt;&lt;num_parallel_readers&lt;&lt;<span class="stringliteral">&quot;.&quot;</span> &lt;&lt; endl;
<a name="l00059"></a>00059     <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a> = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_model_grid().Size();
<a name="l00060"></a>00060     <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a> = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_model_grid().Size();
<a name="l00061"></a>00061     <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a> = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_model_grid().Size();
<a name="l00062"></a>00062   }
<a name="l00063"></a>00063 
<a name="l00065"></a>00065   <span class="keywordflow">if</span>(training_data_set_size != 0) {
<a name="l00066"></a>00066     <span class="keywordtype">int</span> max_num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a>;
<a name="l00067"></a>00067     <span class="keywordflow">while</span>(ceil((<span class="keywordtype">float</span>)training_data_set_size/(<span class="keywordtype">float</span>)(mini_batch_size * <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_num_models())) &lt; max_num_parallel_readers) {
<a name="l00068"></a>00068       max_num_parallel_readers--;
<a name="l00069"></a>00069     }
<a name="l00070"></a>00070     <span class="keywordflow">if</span>(max_num_parallel_readers != <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a>) {
<a name="l00071"></a>00071       cout &lt;&lt; <span class="stringliteral">&quot;Warning the training data set size &quot;</span>&lt;&lt;training_data_set_size
<a name="l00072"></a>00072            &lt;&lt;<span class="stringliteral">&quot; is too small for the number of requested parallel readers &quot;</span>
<a name="l00073"></a>00073            &lt;&lt;<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a>&lt;&lt;<span class="stringliteral">&quot;, using &quot;</span>&lt;&lt; max_num_parallel_readers&lt;&lt;<span class="stringliteral">&quot;.&quot;</span> &lt;&lt; endl;
<a name="l00074"></a>00074       <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a> = max_num_parallel_readers;
<a name="l00075"></a>00075     }
<a name="l00076"></a>00076   }<span class="keywordflow">else</span> {
<a name="l00077"></a>00077     <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a> = 0;
<a name="l00078"></a>00078   }
<a name="l00079"></a>00079 
<a name="l00081"></a>00081   <span class="keywordflow">if</span>(validation_data_set_size != 0) {
<a name="l00082"></a>00082     <span class="keywordtype">int</span> max_num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a>;
<a name="l00083"></a>00083     <span class="keywordflow">while</span>(ceil((<span class="keywordtype">float</span>)validation_data_set_size/(float)(mini_batch_size * <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_num_models())) &lt; max_num_parallel_readers) {
<a name="l00084"></a>00084       max_num_parallel_readers--;
<a name="l00085"></a>00085     }
<a name="l00086"></a>00086     <span class="keywordflow">if</span>(max_num_parallel_readers != <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a>) {
<a name="l00087"></a>00087       cout &lt;&lt; <span class="stringliteral">&quot;Warning the validation data set size &quot;</span>&lt;&lt;validation_data_set_size
<a name="l00088"></a>00088            &lt;&lt;<span class="stringliteral">&quot; is too small for the number of requested parallel readers &quot;</span>
<a name="l00089"></a>00089            &lt;&lt;<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a>&lt;&lt;<span class="stringliteral">&quot;, using &quot;</span>&lt;&lt; max_num_parallel_readers&lt;&lt;<span class="stringliteral">&quot;.&quot;</span> &lt;&lt; endl;
<a name="l00090"></a>00090       <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a> = max_num_parallel_readers;
<a name="l00091"></a>00091     }
<a name="l00092"></a>00092   }<span class="keywordflow">else</span> {
<a name="l00093"></a>00093     <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a> = 0;
<a name="l00094"></a>00094   }
<a name="l00095"></a>00095 
<a name="l00097"></a>00097   <span class="keywordflow">if</span>(testing_data_set_size != 0) {
<a name="l00098"></a>00098     <span class="keywordtype">int</span> max_num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a>;
<a name="l00099"></a>00099     <span class="keywordflow">while</span>(ceil((<span class="keywordtype">float</span>)testing_data_set_size/(float)(mini_batch_size * <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_num_models())) &lt; max_num_parallel_readers) {
<a name="l00100"></a>00100       max_num_parallel_readers--;
<a name="l00101"></a>00101     }
<a name="l00102"></a>00102     <span class="keywordflow">if</span>(max_num_parallel_readers != <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a>) {
<a name="l00103"></a>00103       cout &lt;&lt; <span class="stringliteral">&quot;Warning the testing data set size &quot;</span>&lt;&lt;testing_data_set_size
<a name="l00104"></a>00104            &lt;&lt;<span class="stringliteral">&quot; is too small for the number of requested parallel readers &quot;</span>
<a name="l00105"></a>00105            &lt;&lt;<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a>&lt;&lt;<span class="stringliteral">&quot;, using &quot;</span>&lt;&lt; max_num_parallel_readers&lt;&lt;<span class="stringliteral">&quot;.&quot;</span> &lt;&lt; endl;
<a name="l00106"></a>00106       <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a> = max_num_parallel_readers;
<a name="l00107"></a>00107     }
<a name="l00108"></a>00108   }<span class="keywordflow">else</span> {
<a name="l00109"></a>00109     <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a> = 0;
<a name="l00110"></a>00110   }
<a name="l00111"></a>00111 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_aa35307f86d664e0fd3cc98a645f1589d_cgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_aa35307f86d664e0fd3cc98a645f1589d_cgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_aa35307f86d664e0fd3cc98a645f1589d_cgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_aa35307f86d664e0fd3cc98a645f1589d_cgraph">
<area shape="rect" id="node3" href="classlbann_1_1lbann__comm.html#a483bf8a72d44a0e83da45f3d47bd20d4" title="lbann::lbann_comm::get_model_grid" alt="" coords="505,5,735,35"/><area shape="rect" id="node5" href="classlbann_1_1lbann__comm.html#a54842b679a3756cf79b43baf46caf637" title="lbann::lbann_comm::get_num_models" alt="" coords="499,59,741,88"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ac5d6b3b6740f91ef083eeac3cc52c10a"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::distribute_from_local_matrix" ref="ac5d6b3b6740f91ef083eeac3cc52c10a" args="(Mat &amp;M_local, CircMat &amp;Ms)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lbann::distributed_minibatch_parallel_io::distribute_from_local_matrix </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>M_local</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#aaf89a79f1476644edba844c4937abbcc">CircMat</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>Ms</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html#l00137">137</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html">lbann_distributed_minibatch_parallel_io.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00137"></a>00137                                                                                                    {
<a name="l00138"></a>00138   <span class="keywordtype">int</span> num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d">get_num_parallel_readers</a>();
<a name="l00139"></a>00139   Ms.SetRoot(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a>);
<a name="l00140"></a>00140 
<a name="l00141"></a>00141   <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;model_barrier();
<a name="l00142"></a>00142 
<a name="l00143"></a>00143   <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_rank_in_model() == <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a>) {
<a name="l00144"></a>00144     <span class="keywordflow">if</span>(!<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">m_local_data_valid</a>) {
<a name="l00145"></a>00145       <span class="keywordflow">throw</span> lbann_exception(<span class="stringliteral">&quot;lbann_distributed_minibatch_parallel_io: No valid data for this step -- local data was invalid&quot;</span>);
<a name="l00146"></a>00146     }
<a name="l00147"></a>00147     CopyFromRoot(M_local, Ms);
<a name="l00148"></a>00148     <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">m_local_data_valid</a> = <span class="keyword">false</span>;
<a name="l00149"></a>00149   }<span class="keywordflow">else</span> {
<a name="l00150"></a>00150     CopyFromNonRoot(Ms);
<a name="l00151"></a>00151   }
<a name="l00152"></a>00152 
<a name="l00153"></a>00153   <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;model_barrier();
<a name="l00154"></a>00154    
<a name="l00155"></a>00155   <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a> = (<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a> + 1) % num_parallel_readers;
<a name="l00156"></a>00156   <span class="keywordflow">return</span>;
<a name="l00157"></a>00157 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_ac5d6b3b6740f91ef083eeac3cc52c10a_cgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_ac5d6b3b6740f91ef083eeac3cc52c10a_cgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_ac5d6b3b6740f91ef083eeac3cc52c10a_cgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_ac5d6b3b6740f91ef083eeac3cc52c10a_cgraph">
<area shape="rect" id="node3" href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d" title="lbann::distributed_minibatch_parallel_io::get_num_parallel_readers" alt="" coords="475,5,880,35"/><area shape="rect" id="node7" href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656" title="lbann::lbann_comm::get_rank_in_model" alt="" coords="552,59,803,88"/><area shape="rect" id="node9" href="classlbann_1_1lbann__comm.html#a6086ced12c3eefeea6e2a78eff286983" title="lbann::lbann_comm::model_barrier" alt="" coords="567,112,788,141"/><area shape="rect" id="node5" href="classlbann_1_1distributed__minibatch__parallel__io.html#a72a85b41372e22cba16dddda84983093" title="lbann::distributed_minibatch_parallel_io::get_execution_mode" alt="" coords="929,5,1305,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_ac5d6b3b6740f91ef083eeac3cc52c10a_icgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_ac5d6b3b6740f91ef083eeac3cc52c10a_icgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_ac5d6b3b6740f91ef083eeac3cc52c10a_icgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_ac5d6b3b6740f91ef083eeac3cc52c10a_icgraph">
<area shape="rect" id="node3" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a14c4106696d7ae83784b22de93a46e0a" title="lbann::target_layer_distributed_minibatch_parallel_io::forwardProp" alt="" coords="475,5,877,35"/><area shape="rect" id="node5" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ab6fb4866fd63f04a95e61cbb0892f826" title="lbann::input_layer_distributed_minibatch_parallel_io::fp_linearity" alt="" coords="481,59,871,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa62a8e46c053771fe20831f81aeb0a25"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::fetch_from_data_reader" ref="aa62a8e46c053771fe20831f81aeb0a25" args="(Mat &amp;M_local)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual int lbann::distributed_minibatch_parallel_io::fetch_from_data_reader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>M_local</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#a63ac1e19f5ef461c23496a5169eaa3f4">lbann::input_layer_distributed_minibatch_parallel_io</a>, and <a class="el" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#ac848395e55b96cf53462d67efc42efb9">lbann::target_layer_distributed_minibatch_parallel_io</a>.</p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00047">47</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00047"></a>00047 { <span class="keywordflow">return</span> 0; }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_aa62a8e46c053771fe20831f81aeb0a25_icgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_aa62a8e46c053771fe20831f81aeb0a25_icgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_aa62a8e46c053771fe20831f81aeb0a25_icgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_aa62a8e46c053771fe20831f81aeb0a25_icgraph">
<area shape="rect" id="node3" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad5cc95374bcb47c97105b387950ca8e1" title="lbann::distributed_minibatch_parallel_io::fetch_to_local_matrix" alt="" coords="448,32,829,61"/><area shape="rect" id="node5" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a14c4106696d7ae83784b22de93a46e0a" title="lbann::target_layer_distributed_minibatch_parallel_io::forwardProp" alt="" coords="877,5,1280,35"/><area shape="rect" id="node7" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ab6fb4866fd63f04a95e61cbb0892f826" title="lbann::input_layer_distributed_minibatch_parallel_io::fp_linearity" alt="" coords="884,59,1273,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad5cc95374bcb47c97105b387950ca8e1"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::fetch_to_local_matrix" ref="ad5cc95374bcb47c97105b387950ca8e1" args="(Mat &amp;M_local)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::distributed_minibatch_parallel_io::fetch_to_local_matrix </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>M_local</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>Check to see if this rank has valid data -- if not read in the next batch Coordinate all available readers so that the perform I/O in the same step</p>
<p>Each data reader needs to either have independent / split data, or take an offset / stride </p>
</p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html#l00113">113</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html">lbann_distributed_minibatch_parallel_io.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00113"></a>00113                                                                               {
<a name="l00114"></a>00114   <span class="keywordtype">int</span> num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d">get_num_parallel_readers</a>();
<a name="l00115"></a>00115   <span class="keywordtype">int</span> num_samples_in_batch = 0;
<a name="l00116"></a>00116 
<a name="l00119"></a>00119   <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a> == 0) {
<a name="l00120"></a>00120     <span class="keywordflow">if</span> (<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_rank_in_model() &lt; num_parallel_readers &amp;&amp; !<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">m_local_reader_done</a>) {
<a name="l00121"></a>00121       Zero(M_local);
<a name="l00122"></a>00122 
<a name="l00125"></a>00125       num_samples_in_batch = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa62a8e46c053771fe20831f81aeb0a25">fetch_from_data_reader</a>(M_local);
<a name="l00126"></a>00126       <span class="keywordtype">bool</span> data_valid = (num_samples_in_batch &gt; 0);
<a name="l00127"></a>00127       <span class="keywordflow">if</span>(data_valid) {
<a name="l00128"></a>00128         <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa595846c85d451799e44d58b8203192d">m_num_data_per_epoch</a>+=num_samples_in_batch;
<a name="l00129"></a>00129       }
<a name="l00130"></a>00130       <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#acc0bb9e26d23850e19f00663bee86bcd">preprocess_data_samples</a>(M_local, num_samples_in_batch);
<a name="l00131"></a>00131       <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">m_local_data_valid</a> = data_valid;
<a name="l00132"></a>00132     }
<a name="l00133"></a>00133   }
<a name="l00134"></a>00134   <span class="keywordflow">return</span> num_samples_in_batch;
<a name="l00135"></a>00135 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_ad5cc95374bcb47c97105b387950ca8e1_cgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_ad5cc95374bcb47c97105b387950ca8e1_cgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_ad5cc95374bcb47c97105b387950ca8e1_cgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_ad5cc95374bcb47c97105b387950ca8e1_cgraph">
<area shape="rect" id="node3" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa62a8e46c053771fe20831f81aeb0a25" title="lbann::distributed_minibatch_parallel_io::fetch_from_data_reader" alt="" coords="443,5,837,35"/><area shape="rect" id="node5" href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d" title="lbann::distributed_minibatch_parallel_io::get_num_parallel_readers" alt="" coords="437,59,843,88"/><area shape="rect" id="node9" href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656" title="lbann::lbann_comm::get_rank_in_model" alt="" coords="515,112,765,141"/><area shape="rect" id="node11" href="classlbann_1_1distributed__minibatch__parallel__io.html#acc0bb9e26d23850e19f00663bee86bcd" title="lbann::distributed_minibatch_parallel_io::preprocess_data_samples" alt="" coords="436,165,844,195"/><area shape="rect" id="node7" href="classlbann_1_1distributed__minibatch__parallel__io.html#a72a85b41372e22cba16dddda84983093" title="lbann::distributed_minibatch_parallel_io::get_execution_mode" alt="" coords="895,59,1271,88"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_ad5cc95374bcb47c97105b387950ca8e1_icgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_ad5cc95374bcb47c97105b387950ca8e1_icgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_ad5cc95374bcb47c97105b387950ca8e1_icgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_ad5cc95374bcb47c97105b387950ca8e1_icgraph">
<area shape="rect" id="node3" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a14c4106696d7ae83784b22de93a46e0a" title="lbann::target_layer_distributed_minibatch_parallel_io::forwardProp" alt="" coords="435,5,837,35"/><area shape="rect" id="node5" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ab6fb4866fd63f04a95e61cbb0892f826" title="lbann::input_layer_distributed_minibatch_parallel_io::fp_linearity" alt="" coords="441,59,831,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a72a85b41372e22cba16dddda84983093"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::get_execution_mode" ref="a72a85b41372e22cba16dddda84983093" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8">execution_mode</a> lbann::distributed_minibatch_parallel_io::get_execution_mode </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ae315930bffeade2c03d774af71810236">lbann::input_layer_distributed_minibatch_parallel_io</a>, <a class="el" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a1656c9772680bc8d4ba8277274c6f27d">lbann::target_layer_distributed_minibatch_parallel_io</a>, and <a class="el" href="classlbann_1_1target__layer__unsupervised.html#a59e7fe1e426a2d670cd8907e37da7e87">lbann::target_layer_unsupervised</a>.</p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00050">50</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00050"></a>00050 { <span class="keywordflow">return</span> <a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aaf3d1efdf1095604d189748d8b46fc56">execution_mode::invalid</a>; }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_a72a85b41372e22cba16dddda84983093_icgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_a72a85b41372e22cba16dddda84983093_icgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_a72a85b41372e22cba16dddda84983093_icgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_a72a85b41372e22cba16dddda84983093_icgraph">
<area shape="rect" id="node3" href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d" title="lbann::distributed_minibatch_parallel_io::get_num_parallel_readers" alt="" coords="432,85,837,115"/><area shape="rect" id="node5" href="classlbann_1_1distributed__minibatch__parallel__io.html#ac5d6b3b6740f91ef083eeac3cc52c10a" title="lbann::distributed_minibatch_parallel_io::distribute_from_local_matrix" alt="" coords="887,5,1305,35"/><area shape="rect" id="node9" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ab6fb4866fd63f04a95e61cbb0892f826" title="lbann::input_layer_distributed_minibatch_parallel_io::fp_linearity" alt="" coords="1361,59,1751,88"/><area shape="rect" id="node11" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad5cc95374bcb47c97105b387950ca8e1" title="lbann::distributed_minibatch_parallel_io::fetch_to_local_matrix" alt="" coords="905,59,1287,88"/><area shape="rect" id="node16" href="classlbann_1_1distributed__minibatch__parallel__io.html#a17aa20ba6b971b6433da058be0d4545a" title="lbann::distributed_minibatch_parallel_io::is_data_set_processed" alt="" coords="901,163,1291,192"/><area shape="rect" id="node7" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a14c4106696d7ae83784b22de93a46e0a" title="lbann::target_layer_distributed_minibatch_parallel_io::forwardProp" alt="" coords="1355,5,1757,35"/><area shape="rect" id="node18" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a628b485db774f8a5a4e093edd8b73f3f" title="lbann::target_layer_distributed_minibatch_parallel_io::update" alt="" coords="1371,137,1741,167"/><area shape="rect" id="node20" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ad4c080ab55daafb34cbf80fb9ab48efe" title="lbann::input_layer_distributed_minibatch_parallel_io::update" alt="" coords="1373,191,1739,220"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae63fb14ed9851fdebd6fde53a15b450d"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::get_num_parallel_readers" ref="ae63fb14ed9851fdebd6fde53a15b450d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::distributed_minibatch_parallel_io::get_num_parallel_readers </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html#l00191">191</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html">lbann_distributed_minibatch_parallel_io.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00191"></a>00191                                                                      {
<a name="l00192"></a>00192   <span class="keywordtype">int</span> num_parallel_readers = 0;
<a name="l00193"></a>00193   <span class="keywordflow">switch</span>(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a72a85b41372e22cba16dddda84983093">get_execution_mode</a>()) {
<a name="l00194"></a>00194   <span class="keywordflow">case</span> <a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8aef839bdee87b9298d9be97d3f9c90469">execution_mode::training</a>:
<a name="l00195"></a>00195     num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">m_num_parallel_readers_training</a>;
<a name="l00196"></a>00196     <span class="keywordflow">break</span>;
<a name="l00197"></a>00197   <span class="keywordflow">case</span> <a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8ade2ab1918cbd80e8332e87ef162075be">execution_mode::validation</a>:
<a name="l00198"></a>00198     num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">m_num_parallel_readers_validating</a>;
<a name="l00199"></a>00199     <span class="keywordflow">break</span>;
<a name="l00200"></a>00200   <span class="keywordflow">case</span> <a class="code" href="lbann__base_8hpp.html#a2781a159088df64ed7d47cc91c4dc0a8a3f687cacfa4f67ecb465589ee1b37da6">execution_mode::testing</a>:
<a name="l00201"></a>00201     num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">m_num_parallel_readers_testing</a>;
<a name="l00202"></a>00202     <span class="keywordflow">break</span>;
<a name="l00203"></a>00203   <span class="keywordflow">default</span>:
<a name="l00204"></a>00204     <span class="keywordflow">throw</span> lbann_exception(<span class="stringliteral">&quot;lbann_distributed_minibatch_parallel_io: invalid execution phase&quot;</span>);
<a name="l00205"></a>00205   }
<a name="l00206"></a>00206   <span class="keywordflow">return</span> num_parallel_readers;
<a name="l00207"></a>00207 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_ae63fb14ed9851fdebd6fde53a15b450d_cgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_ae63fb14ed9851fdebd6fde53a15b450d_cgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_ae63fb14ed9851fdebd6fde53a15b450d_cgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_ae63fb14ed9851fdebd6fde53a15b450d_cgraph">
<area shape="rect" id="node3" href="classlbann_1_1distributed__minibatch__parallel__io.html#a72a85b41372e22cba16dddda84983093" title="lbann::distributed_minibatch_parallel_io::get_execution_mode" alt="" coords="460,5,836,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_ae63fb14ed9851fdebd6fde53a15b450d_icgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_ae63fb14ed9851fdebd6fde53a15b450d_icgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_ae63fb14ed9851fdebd6fde53a15b450d_icgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_ae63fb14ed9851fdebd6fde53a15b450d_icgraph">
<area shape="rect" id="node3" href="classlbann_1_1distributed__minibatch__parallel__io.html#ac5d6b3b6740f91ef083eeac3cc52c10a" title="lbann::distributed_minibatch_parallel_io::distribute_from_local_matrix" alt="" coords="460,5,879,35"/><area shape="rect" id="node7" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ab6fb4866fd63f04a95e61cbb0892f826" title="lbann::input_layer_distributed_minibatch_parallel_io::fp_linearity" alt="" coords="935,59,1324,88"/><area shape="rect" id="node9" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad5cc95374bcb47c97105b387950ca8e1" title="lbann::distributed_minibatch_parallel_io::fetch_to_local_matrix" alt="" coords="479,59,860,88"/><area shape="rect" id="node14" href="classlbann_1_1distributed__minibatch__parallel__io.html#a17aa20ba6b971b6433da058be0d4545a" title="lbann::distributed_minibatch_parallel_io::is_data_set_processed" alt="" coords="475,163,864,192"/><area shape="rect" id="node5" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a14c4106696d7ae83784b22de93a46e0a" title="lbann::target_layer_distributed_minibatch_parallel_io::forwardProp" alt="" coords="928,5,1331,35"/><area shape="rect" id="node16" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a628b485db774f8a5a4e093edd8b73f3f" title="lbann::target_layer_distributed_minibatch_parallel_io::update" alt="" coords="944,137,1315,167"/><area shape="rect" id="node18" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ad4c080ab55daafb34cbf80fb9ab48efe" title="lbann::input_layer_distributed_minibatch_parallel_io::update" alt="" coords="947,191,1312,220"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1a1c8e6038e112145fa6eaf37e6cb3d4"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::is_current_root" ref="a1a1c8e6038e112145fa6eaf37e6cb3d4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lbann::distributed_minibatch_parallel_io::is_current_root </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Is this rank the current root node for the Elemental Distribution. </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00053">53</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00053"></a>00053 { <span class="keywordflow">return</span> (<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_rank_in_model() == <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a>); }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_a1a1c8e6038e112145fa6eaf37e6cb3d4_cgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_a1a1c8e6038e112145fa6eaf37e6cb3d4_cgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_a1a1c8e6038e112145fa6eaf37e6cb3d4_cgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_a1a1c8e6038e112145fa6eaf37e6cb3d4_cgraph">
<area shape="rect" id="node3" href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656" title="lbann::lbann_comm::get_rank_in_model" alt="" coords="399,5,649,35"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_a1a1c8e6038e112145fa6eaf37e6cb3d4_icgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_a1a1c8e6038e112145fa6eaf37e6cb3d4_icgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_a1a1c8e6038e112145fa6eaf37e6cb3d4_icgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_a1a1c8e6038e112145fa6eaf37e6cb3d4_icgraph">
<area shape="rect" id="node3" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a14c4106696d7ae83784b22de93a46e0a" title="lbann::target_layer_distributed_minibatch_parallel_io::forwardProp" alt="" coords="397,5,800,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a17aa20ba6b971b6433da058be0d4545a"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::is_data_set_processed" ref="a17aa20ba6b971b6433da058be0d4545a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lbann::distributed_minibatch_parallel_io::is_data_set_processed </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><p>Make sure that all local data has been processed</p>
<p>Set the reduction variable</p>
<p>Once all of the readers have finished their part of the mini-batch indicate that the epoch is finished</p>
<p>When the epoch is finished, make sure that the root node for distributing data is reset because if the number of parallel readers does not evenly divide the data set size, the epoch will finish without all of the parallel readers participating in the last round. </p>
</p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html#l00159">159</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html">lbann_distributed_minibatch_parallel_io.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00159"></a>00159                                                                    {
<a name="l00160"></a>00160   <span class="keywordtype">int</span> num_readers_done = 0;
<a name="l00161"></a>00161   <span class="keywordtype">int</span> num_parallel_readers = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d">get_num_parallel_readers</a>();
<a name="l00162"></a>00162 
<a name="l00163"></a>00163   <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_rank_in_model() &lt; num_parallel_readers) {
<a name="l00164"></a>00164     <span class="keywordflow">if</span>((<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;get_rank_in_model()+1)%num_parallel_readers == <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a>) {
<a name="l00165"></a>00165       <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">m_local_data_valid</a>) { 
<a name="l00166"></a>00166         <span class="keywordflow">throw</span> lbann_exception(<span class="stringliteral">&quot;lbann_input_layer_distributed_minibatch_parallel_io: all valid data was not processed.&quot;</span>);
<a name="l00167"></a>00167       }
<a name="l00168"></a>00168       <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">m_local_reader_done</a> = !<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a44e74967c30e4bc0faf54a1d50cab79d">update_data_reader</a>();
<a name="l00169"></a>00169     }
<a name="l00170"></a>00170   }
<a name="l00171"></a>00171 
<a name="l00173"></a>00173   <span class="keywordflow">if</span>(<a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">m_local_reader_done</a>) {
<a name="l00174"></a>00174     num_readers_done = 1;
<a name="l00175"></a>00175   }
<a name="l00176"></a>00176 
<a name="l00178"></a>00178   num_readers_done = <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">comm</a>-&gt;model_allreduce(num_readers_done);
<a name="l00179"></a>00179   <span class="keywordflow">if</span>(num_readers_done == num_parallel_readers) {
<a name="l00180"></a>00180     <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">m_local_reader_done</a> = <span class="keyword">false</span>;
<a name="l00181"></a>00181     <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">m_root</a> = 0; 
<a name="l00182"></a>00182 
<a name="l00183"></a>00183 
<a name="l00184"></a>00184     <a class="code" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa595846c85d451799e44d58b8203192d">m_num_data_per_epoch</a> = 0;
<a name="l00185"></a>00185     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00186"></a>00186   }<span class="keywordflow">else</span> {
<a name="l00187"></a>00187     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00188"></a>00188   }
<a name="l00189"></a>00189 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_a17aa20ba6b971b6433da058be0d4545a_cgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_a17aa20ba6b971b6433da058be0d4545a_cgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_a17aa20ba6b971b6433da058be0d4545a_cgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_a17aa20ba6b971b6433da058be0d4545a_cgraph">
<area shape="rect" id="node3" href="classlbann_1_1distributed__minibatch__parallel__io.html#ae63fb14ed9851fdebd6fde53a15b450d" title="lbann::distributed_minibatch_parallel_io::get_num_parallel_readers" alt="" coords="445,5,851,35"/><area shape="rect" id="node7" href="classlbann_1_1lbann__comm.html#a206bafe522a0962c450f4fc69d030656" title="lbann::lbann_comm::get_rank_in_model" alt="" coords="523,59,773,88"/><area shape="rect" id="node9" href="classlbann_1_1lbann__comm.html#a735d6432d0a1ba7c5651355c6f24576b" title="lbann::lbann_comm::model_allreduce" alt="" coords="529,112,767,141"/><area shape="rect" id="node13" href="classlbann_1_1distributed__minibatch__parallel__io.html#a44e74967c30e4bc0faf54a1d50cab79d" title="lbann::distributed_minibatch_parallel_io::update_data_reader" alt="" coords="463,165,833,195"/><area shape="rect" id="node5" href="classlbann_1_1distributed__minibatch__parallel__io.html#a72a85b41372e22cba16dddda84983093" title="lbann::distributed_minibatch_parallel_io::get_execution_mode" alt="" coords="900,5,1276,35"/><area shape="rect" id="node11" href="classlbann_1_1lbann__comm.html#ad67668baa49b8713f3c74816d1aeb175" title="lbann::lbann_comm::get_procs_per_model" alt="" coords="955,112,1221,141"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_a17aa20ba6b971b6433da058be0d4545a_icgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_a17aa20ba6b971b6433da058be0d4545a_icgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_a17aa20ba6b971b6433da058be0d4545a_icgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_a17aa20ba6b971b6433da058be0d4545a_icgraph">
<area shape="rect" id="node3" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a628b485db774f8a5a4e093edd8b73f3f" title="lbann::target_layer_distributed_minibatch_parallel_io::update" alt="" coords="445,5,816,35"/><area shape="rect" id="node5" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ad4c080ab55daafb34cbf80fb9ab48efe" title="lbann::input_layer_distributed_minibatch_parallel_io::update" alt="" coords="448,59,813,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acc0bb9e26d23850e19f00663bee86bcd"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::preprocess_data_samples" ref="acc0bb9e26d23850e19f00663bee86bcd" args="(Mat &amp;M_local, int num_samples_in_batch)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void lbann::distributed_minibatch_parallel_io::preprocess_data_samples </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>M_local</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>num_samples_in_batch</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ad6fee7878bdf7b3f3f0c43ff4e0e0b20">lbann::input_layer_distributed_minibatch_parallel_io</a>, and <a class="el" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#af0866c6c725c0938d388fea84f3ad398">lbann::target_layer_distributed_minibatch_parallel_io</a>.</p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00048">48</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00048"></a>00048 {}
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_acc0bb9e26d23850e19f00663bee86bcd_icgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_acc0bb9e26d23850e19f00663bee86bcd_icgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_acc0bb9e26d23850e19f00663bee86bcd_icgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_acc0bb9e26d23850e19f00663bee86bcd_icgraph">
<area shape="rect" id="node3" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad5cc95374bcb47c97105b387950ca8e1" title="lbann::distributed_minibatch_parallel_io::fetch_to_local_matrix" alt="" coords="464,32,845,61"/><area shape="rect" id="node5" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a14c4106696d7ae83784b22de93a46e0a" title="lbann::target_layer_distributed_minibatch_parallel_io::forwardProp" alt="" coords="893,5,1296,35"/><area shape="rect" id="node7" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ab6fb4866fd63f04a95e61cbb0892f826" title="lbann::input_layer_distributed_minibatch_parallel_io::fp_linearity" alt="" coords="900,59,1289,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a44e74967c30e4bc0faf54a1d50cab79d"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::update_data_reader" ref="a44e74967c30e4bc0faf54a1d50cab79d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool lbann::distributed_minibatch_parallel_io::update_data_reader </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented in <a class="el" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#adc092363f45b022429bf094ce1633f56">lbann::input_layer_distributed_minibatch_parallel_io</a>, and <a class="el" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a06800a7f630fef832057bd232911efb2">lbann::target_layer_distributed_minibatch_parallel_io</a>.</p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00049">49</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00049"></a>00049 { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1distributed__minibatch__parallel__io_a44e74967c30e4bc0faf54a1d50cab79d_icgraph.png" border="0" usemap="#classlbann_1_1distributed__minibatch__parallel__io_a44e74967c30e4bc0faf54a1d50cab79d_icgraph_map" alt=""></div>
<map name="classlbann_1_1distributed__minibatch__parallel__io_a44e74967c30e4bc0faf54a1d50cab79d_icgraph_map" id="classlbann_1_1distributed__minibatch__parallel__io_a44e74967c30e4bc0faf54a1d50cab79d_icgraph">
<area shape="rect" id="node3" href="classlbann_1_1distributed__minibatch__parallel__io.html#a17aa20ba6b971b6433da058be0d4545a" title="lbann::distributed_minibatch_parallel_io::is_data_set_processed" alt="" coords="425,32,815,61"/><area shape="rect" id="node5" href="classlbann_1_1target__layer__distributed__minibatch__parallel__io.html#a628b485db774f8a5a4e093edd8b73f3f" title="lbann::target_layer_distributed_minibatch_parallel_io::update" alt="" coords="864,5,1235,35"/><area shape="rect" id="node7" href="classlbann_1_1input__layer__distributed__minibatch__parallel__io.html#ad4c080ab55daafb34cbf80fb9ab48efe" title="lbann::input_layer_distributed_minibatch_parallel_io::update" alt="" coords="867,59,1232,88"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a651f8eab68ea1ca97a9689b372d93293"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::comm" ref="a651f8eab68ea1ca97a9689b372d93293" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlbann_1_1lbann__comm.html">lbann_comm</a>* <a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a651f8eab68ea1ca97a9689b372d93293">lbann::distributed_minibatch_parallel_io::comm</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00056">56</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a39cc10542de6a808b578460b2a76475c"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::m_local_data_valid" ref="a39cc10542de6a808b578460b2a76475c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a39cc10542de6a808b578460b2a76475c">lbann::distributed_minibatch_parallel_io::m_local_data_valid</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Size of the mini-batch </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00063">63</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6be7e7aad366708899a949813dc2554f"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::m_local_reader_done" ref="a6be7e7aad366708899a949813dc2554f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a6be7e7aad366708899a949813dc2554f">lbann::distributed_minibatch_parallel_io::m_local_reader_done</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of parallel readers (I/O streams) for testing data </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00061">61</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa90a4f8da078c11f4953f76092d472de"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::m_mini_batch_size" ref="aa90a4f8da078c11f4953f76092d472de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="datatype_8hpp.html#a91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa90a4f8da078c11f4953f76092d472de">lbann::distributed_minibatch_parallel_io::m_mini_batch_size</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00062">62</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa595846c85d451799e44d58b8203192d"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::m_num_data_per_epoch" ref="aa595846c85d451799e44d58b8203192d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long <a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa595846c85d451799e44d58b8203192d">lbann::distributed_minibatch_parallel_io::m_num_data_per_epoch</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Has the layer copied valid data into the local matrix </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00065">65</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa27d55e192717c28ce6785411585e60a"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_testing" ref="aa27d55e192717c28ce6785411585e60a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#aa27d55e192717c28ce6785411585e60a">lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_testing</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of parallel readers (I/O streams) for testing data </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00060">60</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="afd4635e8e81acf72e9164d91fb3209ef"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_training" ref="afd4635e8e81acf72e9164d91fb3209ef" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#afd4635e8e81acf72e9164d91fb3209ef">lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_training</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Which rank is the root of the CircMat </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00058">58</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad0a41b1f44f6a79a5ec07bd895d6bcf6"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_validating" ref="ad0a41b1f44f6a79a5ec07bd895d6bcf6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#ad0a41b1f44f6a79a5ec07bd895d6bcf6">lbann::distributed_minibatch_parallel_io::m_num_parallel_readers_validating</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Number of parallel readers (I/O streams) for training data </p>

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00059">59</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3ccc275f90122c59f3eb966402f521fc"></a><!-- doxytag: member="lbann::distributed_minibatch_parallel_io::m_root" ref="a3ccc275f90122c59f3eb966402f521fc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classlbann_1_1distributed__minibatch__parallel__io.html#a3ccc275f90122c59f3eb966402f521fc">lbann::distributed_minibatch_parallel_io::m_root</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html#l00057">57</a> of file <a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/lbann/io/<a class="el" href="lbann__distributed__minibatch__parallel__io_8hpp_source.html">lbann_distributed_minibatch_parallel_io.hpp</a></li>
<li>src/io/<a class="el" href="lbann__distributed__minibatch__parallel__io_8cpp_source.html">lbann_distributed_minibatch_parallel_io.cpp</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 21 Sep 2016 for LBANN by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
