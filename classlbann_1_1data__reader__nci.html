<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>LBANN: lbann::data_reader_nci Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
  <div class="navpath"><a class="el" href="namespacelbann.html">lbann</a>::<a class="el" href="classlbann_1_1data__reader__nci.html">data_reader_nci</a>
  </div>
<div class="contents">
<h1>lbann::data_reader_nci Class Reference</h1><!-- doxytag: class="lbann::data_reader_nci" --><!-- doxytag: inherits="lbann::DataReader" -->
<p><code>#include &lt;<a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for lbann::data_reader_nci:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1data__reader__nci__inherit__graph.png" border="0" usemap="#lbann_1_1data__reader__nci_inherit__map" alt="Inheritance graph"/></div>
<map name="lbann_1_1data__reader__nci_inherit__map" id="lbann_1_1data__reader__nci_inherit__map">
<area shape="rect" id="node2" href="classlbann_1_1DataReader.html" title="lbann::DataReader" alt="" coords="16,5,147,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for lbann::data_reader_nci:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1data__reader__nci__coll__graph.png" border="0" usemap="#lbann_1_1data__reader__nci_coll__map" alt="Collaboration graph"/></div>
<map name="lbann_1_1data__reader__nci_coll__map" id="lbann_1_1data__reader__nci_coll__map">
<area shape="rect" id="node2" href="classlbann_1_1DataReader.html" title="lbann::DataReader" alt="" coords="16,5,147,35"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classlbann_1_1data__reader__nci-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a630b728e6b639561f6581c4036ef2da0">data_reader_nci</a> (int batchSize, bool shuffle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a236c045c7c0f9a7cdef769a1d620061f">data_reader_nci</a> (int batchSize)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a99fde9779d271578c934994e04accd6c">data_reader_nci</a> (const <a class="el" href="classlbann_1_1data__reader__nci.html">data_reader_nci</a> &amp;source)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlbann_1_1data__reader__nci.html">data_reader_nci</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a4408a11dd0cfcca9fa086ce8eb3bc6d6">operator=</a> (const <a class="el" href="classlbann_1_1data__reader__nci.html">data_reader_nci</a> &amp;source)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a294931f6eb39b1736b8935696dcef052">~data_reader_nci</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#afa506ee711efad5be46146b9164eb105">fetch_data</a> (<a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;X)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#abc8fa6fee6f2e8d7c1c9a958224f3b23">fetch_label</a> (<a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;Y)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a5120ec3bfcd3475e1acf860ebd52f3ab">getNumLabels</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a2dcae789c53dbd190db94b5192baff1f">load</a> (const std::string infile)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a99bbcfc19e711f22d9fc65d74a95eefb">load</a> (const std::string infile, size_t max_sample_count, bool firstN=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#ab6577921e67488b44761d36ac0960050">load</a> (const std::string infile, double validation_percent, bool firstN=false)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a4d7957f76b96d3ff7f5f8a8226130255">get_num_samples</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a7203794afdf765eb1b2fba5da1e3f35a">get_num_features</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#aceb1170d93d94d922e86b13532e1f966">map_label_2int</a> (const std::string label)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#af47b99f33298b9fcee0870e9d2a6972a">get_linearized_data_size</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a2d45c0392ce632b046465a0272c1bb9b">get_linearized_label_size</a> ()</td></tr>
<tr><td colspan="2"><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#aef987ac9ebcbb175a1003fcf60b458f6">m_num_labels</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#ae72c20c806bd38f92c394bc612fabff4">m_num_samples</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a135b7a98e7b6934753561eeaad4e462c">m_num_features</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; int &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#ad07c090a7d827eb71e516de30040a2b1">m_labels</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::map&lt; int, double &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a3220912c74b9acc78d31efd1f008b2aa">m_index_map</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::string&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlbann_1_1data__reader__nci.html#a8b8a8ae3683f20343533090baf6131b6">m_infile</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8hpp_source.html#l00039">39</a> of file <a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>.</p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a630b728e6b639561f6581c4036ef2da0"></a><!-- doxytag: member="lbann::data_reader_nci::data_reader_nci" ref="a630b728e6b639561f6581c4036ef2da0" args="(int batchSize, bool shuffle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lbann::data_reader_nci::data_reader_nci </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>batchSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>shuffle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8cpp_source.html#l00038">38</a> of file <a class="el" href="lbann__data__reader__nci_8cpp_source.html">lbann_data_reader_nci.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00039"></a>00039   : <a class="code" href="classlbann_1_1DataReader.html#ac4e15e329ed03eb653fcd02cf09b0150">DataReader</a>(batchSize, shuffle)
<a name="l00040"></a>00040 {
<a name="l00041"></a>00041   <a class="code" href="classlbann_1_1data__reader__nci.html#ae72c20c806bd38f92c394bc612fabff4">m_num_samples</a> = 0;
<a name="l00042"></a>00042   <span class="comment">//m_num_samples = -1;</span>
<a name="l00043"></a>00043   <a class="code" href="classlbann_1_1data__reader__nci.html#a135b7a98e7b6934753561eeaad4e462c">m_num_features</a> = 0;
<a name="l00044"></a>00044   <a class="code" href="classlbann_1_1data__reader__nci.html#aef987ac9ebcbb175a1003fcf60b458f6">m_num_labels</a> = 2; <span class="comment">//@todo fix</span>
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a236c045c7c0f9a7cdef769a1d620061f"></a><!-- doxytag: member="lbann::data_reader_nci::data_reader_nci" ref="a236c045c7c0f9a7cdef769a1d620061f" args="(int batchSize)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lbann::data_reader_nci::data_reader_nci </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>batchSize</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8cpp_source.html#l00048">48</a> of file <a class="el" href="lbann__data__reader__nci_8cpp_source.html">lbann_data_reader_nci.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00049"></a>00049   : <a class="code" href="classlbann_1_1data__reader__nci.html#a630b728e6b639561f6581c4036ef2da0">data_reader_nci</a>(batchSize, <span class="keyword">true</span>) {}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a99fde9779d271578c934994e04accd6c"></a><!-- doxytag: member="lbann::data_reader_nci::data_reader_nci" ref="a99fde9779d271578c934994e04accd6c" args="(const data_reader_nci &amp;source)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lbann::data_reader_nci::data_reader_nci </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlbann_1_1data__reader__nci.html">data_reader_nci</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>source</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8cpp_source.html#l00052">52</a> of file <a class="el" href="lbann__data__reader__nci_8cpp_source.html">lbann_data_reader_nci.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00053"></a>00053   : <a class="code" href="classlbann_1_1DataReader.html#ac4e15e329ed03eb653fcd02cf09b0150">DataReader</a>((<span class="keyword">const</span> <a class="code" href="classlbann_1_1DataReader.html#ac4e15e329ed03eb653fcd02cf09b0150">DataReader</a>&amp;) source),
<a name="l00054"></a>00054   <a class="code" href="classlbann_1_1data__reader__nci.html#aef987ac9ebcbb175a1003fcf60b458f6">m_num_labels</a>(source.m_num_labels), <a class="code" href="classlbann_1_1data__reader__nci.html#ae72c20c806bd38f92c394bc612fabff4">m_num_samples</a>(source.m_num_samples),
<a name="l00055"></a>00055   <a class="code" href="classlbann_1_1data__reader__nci.html#a135b7a98e7b6934753561eeaad4e462c">m_num_features</a>(source.m_num_features),<a class="code" href="classlbann_1_1data__reader__nci.html#ad07c090a7d827eb71e516de30040a2b1">m_labels</a>(source.m_labels),
<a name="l00056"></a>00056   <a class="code" href="classlbann_1_1data__reader__nci.html#a3220912c74b9acc78d31efd1f008b2aa">m_index_map</a>(source.m_index_map),<a class="code" href="classlbann_1_1data__reader__nci.html#a8b8a8ae3683f20343533090baf6131b6">m_infile</a>(source.m_infile)
<a name="l00057"></a>00057   {
<a name="l00058"></a>00058 
<a name="l00059"></a>00059   }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a294931f6eb39b1736b8935696dcef052"></a><!-- doxytag: member="lbann::data_reader_nci::~data_reader_nci" ref="a294931f6eb39b1736b8935696dcef052" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">lbann::data_reader_nci::~data_reader_nci </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8cpp_source.html#l00061">61</a> of file <a class="el" href="lbann__data__reader__nci_8cpp_source.html">lbann_data_reader_nci.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00062"></a>00062 {
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="afa506ee711efad5be46146b9164eb105"></a><!-- doxytag: member="lbann::data_reader_nci::fetch_data" ref="afa506ee711efad5be46146b9164eb105" args="(Mat &amp;X)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::data_reader_nci::fetch_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>X</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classlbann_1_1DataReader.html#a36d3c8f5f9e61b3e79261f3b32686191">lbann::DataReader</a>.</p>

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8cpp_source.html#l00077">77</a> of file <a class="el" href="lbann__data__reader__nci_8cpp_source.html">lbann_data_reader_nci.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00078"></a>00078 {
<a name="l00079"></a>00079   <span class="keywordflow">if</span>(!<a class="code" href="classlbann_1_1DataReader.html#a0cb7850655f78075dec9875c9ef40a31">DataReader::position_valid</a>()) {
<a name="l00080"></a>00080     <span class="keywordflow">return</span> 0;
<a name="l00081"></a>00081   }
<a name="l00082"></a>00082 
<a name="l00083"></a>00083   <span class="keywordtype">int</span> current_batch_size = <a class="code" href="classlbann_1_1DataReader.html#a1efcfbbdca579fc0b356e49ef181d416">getBatchSize</a>();
<a name="l00084"></a>00084   ifstream ifs(<a class="code" href="classlbann_1_1data__reader__nci.html#a8b8a8ae3683f20343533090baf6131b6">m_infile</a>.c_str());
<a name="l00085"></a>00085   <span class="keywordflow">if</span> (!ifs) { std::cout &lt;&lt; <span class="stringliteral">&quot;\n In load: can&apos;t open file : &quot;</span> &lt;&lt; <a class="code" href="classlbann_1_1data__reader__nci.html#a8b8a8ae3683f20343533090baf6131b6">m_infile</a>;  exit(1); }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087   <span class="keywordtype">string</span> line;
<a name="l00088"></a>00088   <span class="keywordtype">int</span> n = 0;
<a name="l00089"></a>00089   <span class="keywordflow">for</span> (n = <a class="code" href="classlbann_1_1DataReader.html#a50648e62f6eafb634aa1faae9e3c8cac">CurrentPos</a>; n &lt; <a class="code" href="classlbann_1_1DataReader.html#a50648e62f6eafb634aa1faae9e3c8cac">CurrentPos</a> + current_batch_size; ++n) {
<a name="l00090"></a>00090     <span class="keywordflow">if</span> (n &gt;= (<span class="keywordtype">int</span>)<a class="code" href="classlbann_1_1DataReader.html#a17405e51da149192baadc64a601fd352">ShuffledIndices</a>.size())
<a name="l00091"></a>00091       <span class="keywordflow">break</span>;
<a name="l00092"></a>00092 
<a name="l00093"></a>00093     <span class="keywordtype">int</span> k = n - <a class="code" href="classlbann_1_1DataReader.html#a50648e62f6eafb634aa1faae9e3c8cac">CurrentPos</a>;
<a name="l00094"></a>00094     <span class="keywordtype">int</span> index = <a class="code" href="classlbann_1_1DataReader.html#a17405e51da149192baadc64a601fd352">ShuffledIndices</a>[n];
<a name="l00095"></a>00095 
<a name="l00096"></a>00096     <span class="keywordflow">if</span>(index == 0) <span class="keywordflow">continue</span>; <span class="comment">//skip header</span>
<a name="l00097"></a>00097     <span class="keywordflow">else</span> std::getline(ifs.seekg(<a class="code" href="classlbann_1_1data__reader__nci.html#a3220912c74b9acc78d31efd1f008b2aa">m_index_map</a>[index-1]+index),line);
<a name="l00098"></a>00098     istringstream lstream(line);
<a name="l00099"></a>00099     <span class="keywordtype">string</span> field;
<a name="l00100"></a>00100     <span class="keywordtype">int</span> col = 0, f=0;
<a name="l00101"></a>00101 
<a name="l00102"></a>00102     <span class="keywordflow">while</span>(getline(lstream, field, <span class="charliteral">&apos; &apos;</span>)) {
<a name="l00103"></a>00103       col++;
<a name="l00104"></a>00104       <span class="comment">//if(col == 4) m_labels[index] = this-&gt;map_label_2int(field);</span>
<a name="l00105"></a>00105       <span class="keywordflow">if</span>(col == 4) <a class="code" href="classlbann_1_1data__reader__nci.html#ad07c090a7d827eb71e516de30040a2b1">m_labels</a>[index] = this-&gt;<a class="code" href="classlbann_1_1data__reader__nci.html#aceb1170d93d94d922e86b13532e1f966">map_label_2int</a>(field);
<a name="l00106"></a>00106       <span class="keywordflow">if</span> (col &gt; 5) {
<a name="l00107"></a>00107         <span class="keywordflow">if</span>(field.empty()) field = <span class="stringliteral">&quot;0&quot;</span>; <span class="comment">//set empty feature field (unit) to zero</span>
<a name="l00108"></a>00108         X.Set(f,k,stof(field));
<a name="l00109"></a>00109         f++;
<a name="l00110"></a>00110       }<span class="comment">//end if col &gt; 5</span>
<a name="l00111"></a>00111     }<span class="comment">// end while loop</span>
<a name="l00112"></a>00112   } <span class="comment">// end for loop (batch)</span>
<a name="l00113"></a>00113   ifs.close();
<a name="l00114"></a>00114   <span class="keywordflow">return</span> (n - CurrentPos);
<a name="l00115"></a>00115 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1data__reader__nci_afa506ee711efad5be46146b9164eb105_cgraph.png" border="0" usemap="#classlbann_1_1data__reader__nci_afa506ee711efad5be46146b9164eb105_cgraph_map" alt=""></div>
<map name="classlbann_1_1data__reader__nci_afa506ee711efad5be46146b9164eb105_cgraph_map" id="classlbann_1_1data__reader__nci_afa506ee711efad5be46146b9164eb105_cgraph">
<area shape="rect" id="node3" href="classlbann_1_1DataReader.html#a1efcfbbdca579fc0b356e49ef181d416" title="lbann::DataReader::getBatchSize" alt="" coords="293,5,509,35"/><area shape="rect" id="node5" href="classlbann_1_1data__reader__nci.html#aceb1170d93d94d922e86b13532e1f966" title="lbann::data_reader_nci::map_label_2int" alt="" coords="277,59,525,88"/><area shape="rect" id="node7" href="classlbann_1_1DataReader.html#a0cb7850655f78075dec9875c9ef40a31" title="lbann::DataReader::position_valid" alt="" coords="292,112,511,141"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abc8fa6fee6f2e8d7c1c9a958224f3b23"></a><!-- doxytag: member="lbann::data_reader_nci::fetch_label" ref="abc8fa6fee6f2e8d7c1c9a958224f3b23" args="(Mat &amp;Y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::data_reader_nci::fetch_label </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="lbann__base_8hpp.html#a483ed30937584c6d3a4d76bff5215a34">Mat</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>Y</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classlbann_1_1DataReader.html#ab9f0bd6994c5f78b5ea89c9af00fefaf">lbann::DataReader</a>.</p>

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8cpp_source.html#l00117">117</a> of file <a class="el" href="lbann__data__reader__nci_8cpp_source.html">lbann_data_reader_nci.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00118"></a>00118 {
<a name="l00119"></a>00119   <span class="keywordflow">if</span>(!<a class="code" href="classlbann_1_1DataReader.html#a0cb7850655f78075dec9875c9ef40a31">DataReader::position_valid</a>()) {
<a name="l00120"></a>00120     <span class="keywordflow">return</span> 0;
<a name="l00121"></a>00121   }
<a name="l00122"></a>00122   <span class="keywordtype">int</span> current_batch_size = <a class="code" href="classlbann_1_1DataReader.html#a1efcfbbdca579fc0b356e49ef181d416">getBatchSize</a>();
<a name="l00123"></a>00123   <span class="keywordtype">int</span> n = 0;
<a name="l00124"></a>00124   <span class="keywordflow">for</span> (n = <a class="code" href="classlbann_1_1DataReader.html#a50648e62f6eafb634aa1faae9e3c8cac">CurrentPos</a>; n &lt; <a class="code" href="classlbann_1_1DataReader.html#a50648e62f6eafb634aa1faae9e3c8cac">CurrentPos</a> + current_batch_size; ++n) {
<a name="l00125"></a>00125     <span class="keywordflow">if</span> (n &gt;= (<span class="keywordtype">int</span>)<a class="code" href="classlbann_1_1DataReader.html#a17405e51da149192baadc64a601fd352">ShuffledIndices</a>.size())
<a name="l00126"></a>00126       <span class="keywordflow">break</span>;
<a name="l00127"></a>00127 
<a name="l00128"></a>00128     <span class="keywordtype">int</span> k = n - <a class="code" href="classlbann_1_1DataReader.html#a50648e62f6eafb634aa1faae9e3c8cac">CurrentPos</a>;
<a name="l00129"></a>00129     <span class="keywordtype">int</span> index = <a class="code" href="classlbann_1_1DataReader.html#a17405e51da149192baadc64a601fd352">ShuffledIndices</a>[n];
<a name="l00130"></a>00130     <span class="keywordtype">int</span> sample_label = 0;
<a name="l00131"></a>00131     <span class="keywordflow">if</span>(index == 0) <span class="keywordflow">continue</span>; <span class="comment">//skip header</span>
<a name="l00132"></a>00132     <span class="keywordflow">else</span> sample_label = <a class="code" href="classlbann_1_1data__reader__nci.html#ad07c090a7d827eb71e516de30040a2b1">m_labels</a>[index];
<a name="l00133"></a>00133 
<a name="l00134"></a>00134     Y.Set(sample_label, k, 1);
<a name="l00135"></a>00135   }
<a name="l00136"></a>00136   <span class="keywordflow">return</span> (n - CurrentPos);
<a name="l00137"></a>00137 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1data__reader__nci_abc8fa6fee6f2e8d7c1c9a958224f3b23_cgraph.png" border="0" usemap="#classlbann_1_1data__reader__nci_abc8fa6fee6f2e8d7c1c9a958224f3b23_cgraph_map" alt=""></div>
<map name="classlbann_1_1data__reader__nci_abc8fa6fee6f2e8d7c1c9a958224f3b23_cgraph_map" id="classlbann_1_1data__reader__nci_abc8fa6fee6f2e8d7c1c9a958224f3b23_cgraph">
<area shape="rect" id="node3" href="classlbann_1_1DataReader.html#a1efcfbbdca579fc0b356e49ef181d416" title="lbann::DataReader::getBatchSize" alt="" coords="279,5,495,35"/><area shape="rect" id="node5" href="classlbann_1_1DataReader.html#a0cb7850655f78075dec9875c9ef40a31" title="lbann::DataReader::position_valid" alt="" coords="277,59,496,88"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af47b99f33298b9fcee0870e9d2a6972a"></a><!-- doxytag: member="lbann::data_reader_nci::get_linearized_data_size" ref="af47b99f33298b9fcee0870e9d2a6972a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::data_reader_nci::get_linearized_data_size </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classlbann_1_1DataReader.html#a4324d4deedbb92f5306b3289c4812f9f">lbann::DataReader</a>.</p>

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8hpp_source.html#l00060">60</a> of file <a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00060"></a>00060 { <span class="keywordflow">return</span> <a class="code" href="classlbann_1_1data__reader__nci.html#a135b7a98e7b6934753561eeaad4e462c">m_num_features</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a2d45c0392ce632b046465a0272c1bb9b"></a><!-- doxytag: member="lbann::data_reader_nci::get_linearized_label_size" ref="a2d45c0392ce632b046465a0272c1bb9b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::data_reader_nci::get_linearized_label_size </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classlbann_1_1DataReader.html#a09ed170d559c2e8c61678c83a178a804">lbann::DataReader</a>.</p>

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8hpp_source.html#l00061">61</a> of file <a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00061"></a>00061 { <span class="keywordflow">return</span> <a class="code" href="classlbann_1_1data__reader__nci.html#aef987ac9ebcbb175a1003fcf60b458f6">m_num_labels</a>; }
</pre></div></p>

</div>
</div>
<a class="anchor" id="a7203794afdf765eb1b2fba5da1e3f35a"></a><!-- doxytag: member="lbann::data_reader_nci::get_num_features" ref="a7203794afdf765eb1b2fba5da1e3f35a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t lbann::data_reader_nci::get_num_features </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8hpp_source.html#l00057">57</a> of file <a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00057"></a>00057 {<span class="keywordflow">return</span> <a class="code" href="classlbann_1_1data__reader__nci.html#a135b7a98e7b6934753561eeaad4e462c">m_num_features</a>;}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a4d7957f76b96d3ff7f5f8a8226130255"></a><!-- doxytag: member="lbann::data_reader_nci::get_num_samples" ref="a4d7957f76b96d3ff7f5f8a8226130255" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t lbann::data_reader_nci::get_num_samples </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8hpp_source.html#l00056">56</a> of file <a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00056"></a>00056 {<span class="keywordflow">return</span> <a class="code" href="classlbann_1_1data__reader__nci.html#ae72c20c806bd38f92c394bc612fabff4">m_num_samples</a>;}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a5120ec3bfcd3475e1acf860ebd52f3ab"></a><!-- doxytag: member="lbann::data_reader_nci::getNumLabels" ref="a5120ec3bfcd3475e1acf860ebd52f3ab" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::data_reader_nci::getNumLabels </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classlbann_1_1DataReader.html#a752ab2ae57cf6b7af065cdc950b27741">lbann::DataReader</a>.</p>

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8hpp_source.html#l00050">50</a> of file <a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00050"></a>00050 { <span class="keywordflow">return</span> <a class="code" href="classlbann_1_1data__reader__nci.html#aef987ac9ebcbb175a1003fcf60b458f6">m_num_labels</a>; } <span class="comment">//@todo; check if used</span>
</pre></div></p>

</div>
</div>
<a class="anchor" id="ab6577921e67488b44761d36ac0960050"></a><!-- doxytag: member="lbann::data_reader_nci::load" ref="ab6577921e67488b44761d36ac0960050" args="(const std::string infile, double validation_percent, bool firstN=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lbann::data_reader_nci::load </td>
          <td>(</td>
          <td class="paramtype">const std::string&nbsp;</td>
          <td class="paramname"> <em>infile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&nbsp;</td>
          <td class="paramname"> <em>validation_percent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>firstN</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8cpp_source.html#l00195">195</a> of file <a class="el" href="lbann__data__reader__nci_8cpp_source.html">lbann_data_reader_nci.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00195"></a>00195                                                                                           {
<a name="l00196"></a>00196   <span class="keywordtype">bool</span> load_successful = <span class="keyword">false</span>;
<a name="l00197"></a>00197 
<a name="l00198"></a>00198   load_successful = <a class="code" href="classlbann_1_1data__reader__nci.html#a2dcae789c53dbd190db94b5192baff1f">load</a>(infile);
<a name="l00199"></a>00199 
<a name="l00200"></a>00200   <span class="keywordtype">size_t</span> max_sample_count = rint(<a class="code" href="classlbann_1_1DataReader.html#a78d3f20a5ab7628011068127ea8b4028">getNumData</a>()*use_percentage);
<a name="l00201"></a>00201 
<a name="l00202"></a>00202   <span class="keywordflow">if</span>(max_sample_count &gt; <a class="code" href="classlbann_1_1DataReader.html#a78d3f20a5ab7628011068127ea8b4028">getNumData</a>() || ((<span class="keywordtype">long</span>) max_sample_count) &lt; 0) {
<a name="l00203"></a>00203     <span class="keywordflow">throw</span> lbann_exception(<span class="stringliteral">&quot;NCI: data reader load error: invalid number of samples selected&quot;</span>);
<a name="l00204"></a>00204   }
<a name="l00205"></a>00205   <a class="code" href="classlbann_1_1DataReader.html#a4c0af35054f8ec755187eab77b34803a">select_subset_of_data</a>(max_sample_count, firstN);
<a name="l00206"></a>00206 
<a name="l00207"></a>00207   <span class="keywordflow">return</span> load_successful;
<a name="l00208"></a>00208 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1data__reader__nci_ab6577921e67488b44761d36ac0960050_cgraph.png" border="0" usemap="#classlbann_1_1data__reader__nci_ab6577921e67488b44761d36ac0960050_cgraph_map" alt=""></div>
<map name="classlbann_1_1data__reader__nci_ab6577921e67488b44761d36ac0960050_cgraph_map" id="classlbann_1_1data__reader__nci_ab6577921e67488b44761d36ac0960050_cgraph">
<area shape="rect" id="node3" href="classlbann_1_1DataReader.html#a78d3f20a5ab7628011068127ea8b4028" title="lbann::DataReader::getNumData" alt="" coords="560,5,773,35"/><area shape="rect" id="node5" href="classlbann_1_1data__reader__nci.html#a2dcae789c53dbd190db94b5192baff1f" title="lbann::data_reader_nci::load" alt="" coords="284,31,468,60"/><area shape="rect" id="node7" href="classlbann_1_1DataReader.html#a4c0af35054f8ec755187eab77b34803a" title="lbann::DataReader::select_subset_of_data" alt="" coords="241,84,511,113"/><area shape="rect" id="node9" href="namespacelbann.html#a4fea7ba21017b49d1e34394b4c20c764" title="lbann::get_generator" alt="" coords="597,84,736,113"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a99bbcfc19e711f22d9fc65d74a95eefb"></a><!-- doxytag: member="lbann::data_reader_nci::load" ref="a99bbcfc19e711f22d9fc65d74a95eefb" args="(const std::string infile, size_t max_sample_count, bool firstN=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lbann::data_reader_nci::load </td>
          <td>(</td>
          <td class="paramtype">const std::string&nbsp;</td>
          <td class="paramname"> <em>infile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>max_sample_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>firstN</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8cpp_source.html#l00181">181</a> of file <a class="el" href="lbann__data__reader__nci_8cpp_source.html">lbann_data_reader_nci.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00182"></a>00182 {
<a name="l00183"></a>00183   <span class="keywordtype">bool</span> load_successful = <span class="keyword">false</span>;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185   load_successful = <a class="code" href="classlbann_1_1data__reader__nci.html#a2dcae789c53dbd190db94b5192baff1f">load</a>(infile);
<a name="l00186"></a>00186 
<a name="l00187"></a>00187   <span class="keywordflow">if</span>(max_sample_count &gt; <a class="code" href="classlbann_1_1DataReader.html#a78d3f20a5ab7628011068127ea8b4028">getNumData</a>() || ((<span class="keywordtype">long</span>) max_sample_count) &lt; 0) {
<a name="l00188"></a>00188     <span class="keywordflow">throw</span> lbann_exception(<span class="stringliteral">&quot;NCI: data reader load error: invalid number of samples selected&quot;</span>);
<a name="l00189"></a>00189   }
<a name="l00190"></a>00190   <a class="code" href="classlbann_1_1DataReader.html#a4c0af35054f8ec755187eab77b34803a">select_subset_of_data</a>(max_sample_count, firstN);
<a name="l00191"></a>00191 
<a name="l00192"></a>00192   <span class="keywordflow">return</span> load_successful;
<a name="l00193"></a>00193 }
</pre></div></p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1data__reader__nci_a99bbcfc19e711f22d9fc65d74a95eefb_cgraph.png" border="0" usemap="#classlbann_1_1data__reader__nci_a99bbcfc19e711f22d9fc65d74a95eefb_cgraph_map" alt=""></div>
<map name="classlbann_1_1data__reader__nci_a99bbcfc19e711f22d9fc65d74a95eefb_cgraph_map" id="classlbann_1_1data__reader__nci_a99bbcfc19e711f22d9fc65d74a95eefb_cgraph">
<area shape="rect" id="node3" href="classlbann_1_1DataReader.html#a78d3f20a5ab7628011068127ea8b4028" title="lbann::DataReader::getNumData" alt="" coords="560,5,773,35"/><area shape="rect" id="node5" href="classlbann_1_1data__reader__nci.html#a2dcae789c53dbd190db94b5192baff1f" title="lbann::data_reader_nci::load" alt="" coords="284,31,468,60"/><area shape="rect" id="node7" href="classlbann_1_1DataReader.html#a4c0af35054f8ec755187eab77b34803a" title="lbann::DataReader::select_subset_of_data" alt="" coords="241,84,511,113"/><area shape="rect" id="node9" href="namespacelbann.html#a4fea7ba21017b49d1e34394b4c20c764" title="lbann::get_generator" alt="" coords="597,84,736,113"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2dcae789c53dbd190db94b5192baff1f"></a><!-- doxytag: member="lbann::data_reader_nci::load" ref="a2dcae789c53dbd190db94b5192baff1f" args="(const std::string infile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lbann::data_reader_nci::load </td>
          <td>(</td>
          <td class="paramtype">const std::string&nbsp;</td>
          <td class="paramname"> <em>infile</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8cpp_source.html#l00147">147</a> of file <a class="el" href="lbann__data__reader__nci_8cpp_source.html">lbann_data_reader_nci.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00148"></a>00148 {
<a name="l00149"></a>00149   ifstream ifs(infile.c_str());
<a name="l00150"></a>00150   <span class="keywordflow">if</span> (!ifs) { std::cout &lt;&lt; <span class="stringliteral">&quot;\n In load: can&apos;t open file : &quot;</span> &lt;&lt; infile;  exit(1); }
<a name="l00151"></a>00151   <a class="code" href="classlbann_1_1data__reader__nci.html#a8b8a8ae3683f20343533090baf6131b6">m_infile</a> = infile;
<a name="l00152"></a>00152   <span class="keywordtype">string</span> line;
<a name="l00153"></a>00153   <span class="keywordtype">int</span> i;
<a name="l00154"></a>00154   <span class="keywordtype">double</span> offset =0;
<a name="l00155"></a>00155   <span class="keywordflow">while</span>(std::getline (ifs, line) ) {
<a name="l00156"></a>00156     <span class="keywordtype">string</span> field;
<a name="l00157"></a>00157     offset = offset + line.length();
<a name="l00158"></a>00158     istringstream lstream(line);
<a name="l00159"></a>00159     i=0;
<a name="l00160"></a>00160     <a class="code" href="classlbann_1_1data__reader__nci.html#a135b7a98e7b6934753561eeaad4e462c">m_num_features</a> = 0;
<a name="l00161"></a>00161     <span class="keywordflow">while</span>(getline(lstream, field, <span class="charliteral">&apos; &apos;</span>)) {
<a name="l00162"></a>00162       i++;
<a name="l00163"></a>00163       <span class="keywordflow">if</span> (i &gt; 5) {
<a name="l00164"></a>00164         <a class="code" href="classlbann_1_1data__reader__nci.html#a135b7a98e7b6934753561eeaad4e462c">m_num_features</a>++;
<a name="l00165"></a>00165       }
<a name="l00166"></a>00166      }
<a name="l00167"></a>00167      <a class="code" href="classlbann_1_1data__reader__nci.html#a3220912c74b9acc78d31efd1f008b2aa">m_index_map</a>[<a class="code" href="classlbann_1_1data__reader__nci.html#ae72c20c806bd38f92c394bc612fabff4">m_num_samples</a>] = offset;
<a name="l00168"></a>00168      <a class="code" href="classlbann_1_1data__reader__nci.html#ae72c20c806bd38f92c394bc612fabff4">m_num_samples</a>++;
<a name="l00169"></a>00169   }
<a name="l00170"></a>00170   ifs.close();
<a name="l00171"></a>00171   <a class="code" href="classlbann_1_1data__reader__nci.html#ad07c090a7d827eb71e516de30040a2b1">m_labels</a>.resize(<a class="code" href="classlbann_1_1data__reader__nci.html#ae72c20c806bd38f92c394bc612fabff4">m_num_samples</a>);
<a name="l00172"></a>00172   <span class="comment">// reset indices</span>
<a name="l00173"></a>00173   <a class="code" href="classlbann_1_1DataReader.html#a17405e51da149192baadc64a601fd352">ShuffledIndices</a>.clear();
<a name="l00174"></a>00174   <a class="code" href="classlbann_1_1DataReader.html#a17405e51da149192baadc64a601fd352">ShuffledIndices</a>.resize(<a class="code" href="classlbann_1_1data__reader__nci.html#ae72c20c806bd38f92c394bc612fabff4">m_num_samples</a>);
<a name="l00175"></a>00175   <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> n = 0; n &lt; <a class="code" href="classlbann_1_1DataReader.html#a17405e51da149192baadc64a601fd352">ShuffledIndices</a>.size(); ++n) {
<a name="l00176"></a>00176     <a class="code" href="classlbann_1_1DataReader.html#a17405e51da149192baadc64a601fd352">ShuffledIndices</a>[n] = n;
<a name="l00177"></a>00177   }
<a name="l00178"></a>00178   <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00179"></a>00179 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1data__reader__nci_a2dcae789c53dbd190db94b5192baff1f_icgraph.png" border="0" usemap="#classlbann_1_1data__reader__nci_a2dcae789c53dbd190db94b5192baff1f_icgraph_map" alt=""></div>
<map name="classlbann_1_1data__reader__nci_a2dcae789c53dbd190db94b5192baff1f_icgraph_map" id="classlbann_1_1data__reader__nci_a2dcae789c53dbd190db94b5192baff1f_icgraph">
<area shape="rect" id="node3" href="classlbann_1_1data__reader__nci.html#a99bbcfc19e711f22d9fc65d74a95eefb" title="lbann::data_reader_nci::load" alt="" coords="241,5,425,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aceb1170d93d94d922e86b13532e1f966"></a><!-- doxytag: member="lbann::data_reader_nci::map_label_2int" ref="aceb1170d93d94d922e86b13532e1f966" args="(const std::string label)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lbann::data_reader_nci::map_label_2int </td>
          <td>(</td>
          <td class="paramtype">const std::string&nbsp;</td>
          <td class="paramname"> <em>label</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8cpp_source.html#l00067">67</a> of file <a class="el" href="lbann__data__reader__nci_8cpp_source.html">lbann_data_reader_nci.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00067"></a>00067                                                                     {
<a name="l00068"></a>00068   <span class="keywordflow">if</span>(label == <span class="stringliteral">&quot;rs&quot;</span>) <span class="keywordflow">return</span> 0;
<a name="l00069"></a>00069   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (label == <span class="stringliteral">&quot;nr&quot;</span>) <span class="keywordflow">return</span> 1;
<a name="l00070"></a>00070   <span class="comment">//else if (label == &quot;mi&quot;) return 3;</span>
<a name="l00071"></a>00071   <span class="keywordflow">else</span> {
<a name="l00072"></a>00072     std::cout &lt;&lt; <span class="stringliteral">&quot;\n Unknow label type : &quot;</span> &lt;&lt; label;  exit(1);
<a name="l00073"></a>00073   }
<a name="l00074"></a>00074 }
</pre></div></p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dynsection">
<div class="center"><img src="classlbann_1_1data__reader__nci_aceb1170d93d94d922e86b13532e1f966_icgraph.png" border="0" usemap="#classlbann_1_1data__reader__nci_aceb1170d93d94d922e86b13532e1f966_icgraph_map" alt=""></div>
<map name="classlbann_1_1data__reader__nci_aceb1170d93d94d922e86b13532e1f966_icgraph_map" id="classlbann_1_1data__reader__nci_aceb1170d93d94d922e86b13532e1f966_icgraph">
<area shape="rect" id="node3" href="classlbann_1_1data__reader__nci.html#afa506ee711efad5be46146b9164eb105" title="lbann::data_reader_nci::fetch_data" alt="" coords="303,5,524,35"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4408a11dd0cfcca9fa086ce8eb3bc6d6"></a><!-- doxytag: member="lbann::data_reader_nci::operator=" ref="a4408a11dd0cfcca9fa086ce8eb3bc6d6" args="(const data_reader_nci &amp;source)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlbann_1_1data__reader__nci.html">lbann::data_reader_nci</a> &amp; lbann::data_reader_nci::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classlbann_1_1data__reader__nci.html">data_reader_nci</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>source</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reimplemented from <a class="el" href="classlbann_1_1DataReader.html#ae4a9fd49091a410d5b163e8650399464">lbann::DataReader</a>.</p>

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8cpp_source.html#l00210">210</a> of file <a class="el" href="lbann__data__reader__nci_8cpp_source.html">lbann_data_reader_nci.cpp</a>.</p>

<p><div class="fragment"><pre class="fragment"><a name="l00211"></a>00211 {
<a name="l00212"></a>00212 
<a name="l00213"></a>00213   <span class="comment">// check for self-assignment</span>
<a name="l00214"></a>00214   <span class="keywordflow">if</span> (<span class="keyword">this</span> == &amp;source)
<a name="l00215"></a>00215     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00216"></a>00216 
<a name="l00217"></a>00217   <span class="comment">// Call the parent operator= function</span>
<a name="l00218"></a>00218   <a class="code" href="classlbann_1_1data__reader__nci.html#a4408a11dd0cfcca9fa086ce8eb3bc6d6">DataReader::operator=</a>(source);
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 
<a name="l00221"></a>00221   this-&gt;<a class="code" href="classlbann_1_1data__reader__nci.html#aef987ac9ebcbb175a1003fcf60b458f6">m_num_labels</a> = source.m_num_labels;
<a name="l00222"></a>00222   this-&gt;<a class="code" href="classlbann_1_1data__reader__nci.html#ae72c20c806bd38f92c394bc612fabff4">m_num_samples</a> = source.m_num_samples;
<a name="l00223"></a>00223   this-&gt;<a class="code" href="classlbann_1_1data__reader__nci.html#a135b7a98e7b6934753561eeaad4e462c">m_num_features</a> = source.m_num_features;
<a name="l00224"></a>00224   this-&gt;<a class="code" href="classlbann_1_1data__reader__nci.html#ad07c090a7d827eb71e516de30040a2b1">m_labels</a> = source.m_labels;
<a name="l00225"></a>00225   this-&gt;<a class="code" href="classlbann_1_1data__reader__nci.html#a3220912c74b9acc78d31efd1f008b2aa">m_index_map</a> = source.m_index_map;
<a name="l00226"></a>00226   this-&gt;<a class="code" href="classlbann_1_1data__reader__nci.html#a8b8a8ae3683f20343533090baf6131b6">m_infile</a> = source.m_infile;
<a name="l00227"></a>00227 
<a name="l00228"></a>00228   <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00229"></a>00229 }
</pre></div></p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a3220912c74b9acc78d31efd1f008b2aa"></a><!-- doxytag: member="lbann::data_reader_nci::m_index_map" ref="a3220912c74b9acc78d31efd1f008b2aa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;int,double&gt; <a class="el" href="classlbann_1_1data__reader__nci.html#a3220912c74b9acc78d31efd1f008b2aa">lbann::data_reader_nci::m_index_map</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8hpp_source.html#l00069">69</a> of file <a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8b8a8ae3683f20343533090baf6131b6"></a><!-- doxytag: member="lbann::data_reader_nci::m_infile" ref="a8b8a8ae3683f20343533090baf6131b6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="classlbann_1_1data__reader__nci.html#a8b8a8ae3683f20343533090baf6131b6">lbann::data_reader_nci::m_infile</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8hpp_source.html#l00070">70</a> of file <a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad07c090a7d827eb71e516de30040a2b1"></a><!-- doxytag: member="lbann::data_reader_nci::m_labels" ref="ad07c090a7d827eb71e516de30040a2b1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int&gt; <a class="el" href="classlbann_1_1data__reader__nci.html#ad07c090a7d827eb71e516de30040a2b1">lbann::data_reader_nci::m_labels</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8hpp_source.html#l00068">68</a> of file <a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a135b7a98e7b6934753561eeaad4e462c"></a><!-- doxytag: member="lbann::data_reader_nci::m_num_features" ref="a135b7a98e7b6934753561eeaad4e462c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classlbann_1_1data__reader__nci.html#a135b7a98e7b6934753561eeaad4e462c">lbann::data_reader_nci::m_num_features</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8hpp_source.html#l00067">67</a> of file <a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aef987ac9ebcbb175a1003fcf60b458f6"></a><!-- doxytag: member="lbann::data_reader_nci::m_num_labels" ref="aef987ac9ebcbb175a1003fcf60b458f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="classlbann_1_1data__reader__nci.html#aef987ac9ebcbb175a1003fcf60b458f6">lbann::data_reader_nci::m_num_labels</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8hpp_source.html#l00065">65</a> of file <a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae72c20c806bd38f92c394bc612fabff4"></a><!-- doxytag: member="lbann::data_reader_nci::m_num_samples" ref="ae72c20c806bd38f92c394bc612fabff4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classlbann_1_1data__reader__nci.html#ae72c20c806bd38f92c394bc612fabff4">lbann::data_reader_nci::m_num_samples</a><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="lbann__data__reader__nci_8hpp_source.html#l00066">66</a> of file <a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>include/lbann/data_readers/<a class="el" href="lbann__data__reader__nci_8hpp_source.html">lbann_data_reader_nci.hpp</a></li>
<li>src/data_readers/<a class="el" href="lbann__data__reader__nci_8cpp_source.html">lbann_data_reader_nci.cpp</a></li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 21 Sep 2016 for LBANN by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
